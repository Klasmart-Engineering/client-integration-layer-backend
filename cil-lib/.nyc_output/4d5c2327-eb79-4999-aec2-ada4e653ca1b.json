{"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/index.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":16,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":126}},"13":{"start":{"line":15,"column":21},"end":{"line":15,"column":126}},"14":{"start":{"line":15,"column":95},"end":{"line":15,"column":126}},"15":{"start":{"line":17,"column":19},"end":{"line":23,"column":1}},"16":{"start":{"line":18,"column":4},"end":{"line":18,"column":42}},"17":{"start":{"line":18,"column":31},"end":{"line":18,"column":42}},"18":{"start":{"line":19,"column":17},"end":{"line":19,"column":19}},"19":{"start":{"line":20,"column":4},"end":{"line":20,"column":141}},"20":{"start":{"line":20,"column":21},"end":{"line":20,"column":141}},"21":{"start":{"line":20,"column":40},"end":{"line":20,"column":141}},"22":{"start":{"line":20,"column":109},"end":{"line":20,"column":141}},"23":{"start":{"line":21,"column":4},"end":{"line":21,"column":36}},"24":{"start":{"line":22,"column":4},"end":{"line":22,"column":18}},"25":{"start":{"line":24,"column":0},"end":{"line":24,"column":62}},"26":{"start":{"line":25,"column":0},"end":{"line":25,"column":77}},"27":{"start":{"line":26,"column":0},"end":{"line":26,"column":49}},"28":{"start":{"line":27,"column":0},"end":{"line":27,"column":47}},"29":{"start":{"line":28,"column":0},"end":{"line":28,"column":54}},"30":{"start":{"line":29,"column":0},"end":{"line":29,"column":46}},"31":{"start":{"line":30,"column":0},"end":{"line":30,"column":51}},"32":{"start":{"line":31,"column":0},"end":{"line":31,"column":46}},"33":{"start":{"line":32,"column":0},"end":{"line":32,"column":46}},"34":{"start":{"line":33,"column":0},"end":{"line":33,"column":49}},"35":{"start":{"line":34,"column":14},"end":{"line":34,"column":36}},"36":{"start":{"line":35,"column":0},"end":{"line":35,"column":102}},"37":{"start":{"line":35,"column":77},"end":{"line":35,"column":96}},"38":{"start":{"line":36,"column":15},"end":{"line":36,"column":40}},"39":{"start":{"line":37,"column":0},"end":{"line":37,"column":109}},"40":{"start":{"line":37,"column":80},"end":{"line":37,"column":103}},"41":{"start":{"line":38,"column":0},"end":{"line":38,"column":121}},"42":{"start":{"line":38,"column":86},"end":{"line":38,"column":115}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":71},"end":{"line":16,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":17,"column":50},"end":{"line":17,"column":51}},"loc":{"start":{"line":17,"column":65},"end":{"line":23,"column":1}},"line":17},"7":{"name":"(anonymous_7)","decl":{"start":{"line":35,"column":63},"end":{"line":35,"column":64}},"loc":{"start":{"line":35,"column":75},"end":{"line":35,"column":98}},"line":35},"8":{"name":"(anonymous_8)","decl":{"start":{"line":37,"column":66},"end":{"line":37,"column":67}},"loc":{"start":{"line":37,"column":78},"end":{"line":37,"column":105}},"line":37},"9":{"name":"(anonymous_9)","decl":{"start":{"line":38,"column":72},"end":{"line":38,"column":73}},"loc":{"start":{"line":38,"column":84},"end":{"line":38,"column":117}},"line":38}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":16,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":16,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":21},"end":{"line":15,"column":126}},"type":"if","locations":[{"start":{"line":15,"column":21},"end":{"line":15,"column":126}},{"start":{"line":15,"column":21},"end":{"line":15,"column":126}}],"line":15},"8":{"loc":{"start":{"line":15,"column":25},"end":{"line":15,"column":93}},"type":"binary-expr","locations":[{"start":{"line":15,"column":25},"end":{"line":15,"column":40}},{"start":{"line":15,"column":44},"end":{"line":15,"column":93}}],"line":15},"9":{"loc":{"start":{"line":17,"column":19},"end":{"line":23,"column":1}},"type":"binary-expr","locations":[{"start":{"line":17,"column":20},"end":{"line":17,"column":24}},{"start":{"line":17,"column":28},"end":{"line":17,"column":45}},{"start":{"line":17,"column":50},"end":{"line":23,"column":1}}],"line":17},"10":{"loc":{"start":{"line":18,"column":4},"end":{"line":18,"column":42}},"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":18,"column":42}},{"start":{"line":18,"column":4},"end":{"line":18,"column":42}}],"line":18},"11":{"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":29}},"type":"binary-expr","locations":[{"start":{"line":18,"column":8},"end":{"line":18,"column":11}},{"start":{"line":18,"column":15},"end":{"line":18,"column":29}}],"line":18},"12":{"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":141}},"type":"if","locations":[{"start":{"line":20,"column":4},"end":{"line":20,"column":141}},{"start":{"line":20,"column":4},"end":{"line":20,"column":141}}],"line":20},"13":{"loc":{"start":{"line":20,"column":40},"end":{"line":20,"column":141}},"type":"if","locations":[{"start":{"line":20,"column":40},"end":{"line":20,"column":141}},{"start":{"line":20,"column":40},"end":{"line":20,"column":141}}],"line":20},"14":{"loc":{"start":{"line":20,"column":44},"end":{"line":20,"column":107}},"type":"binary-expr","locations":[{"start":{"line":20,"column":44},"end":{"line":20,"column":59}},{"start":{"line":20,"column":63},"end":{"line":20,"column":107}}],"line":20}},"s":{"0":1,"1":31,"2":31,"3":31,"4":254,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":1,"12":7,"13":32,"14":31,"15":1,"16":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":6,"38":1,"39":1,"40":0,"41":1,"42":0},"f":{"0":31,"1":254,"2":0,"3":0,"4":0,"5":7,"6":1,"7":6,"8":0,"9":0},"b":{"0":[1,1,1],"1":[1,0],"2":[31,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[31,1],"8":[32,32],"9":[1,1,1],"10":[1,0],"11":[1,1],"12":[0,0],"13":[0,0],"14":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/index.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iDAA+B;AAC/B,+CAA6B;AAC7B,sDAAsC;AACtC,8CAA4B;AAC5B,mDAAiC;AACjC,8CAA4B;AAC5B,8CAA4B;AAC5B,iDAA+B;AAC/B,qCAAkC;AAAzB,4FAAA,GAAG,OAAA;AACZ,yCAAsD;AAA7C,gGAAA,MAAM,OAAA;AAAE,sGAAA,YAAY,OAAA","sourcesContent":["export * from './lib/entities';\nexport * from './lib/errors';\nexport * as proto from './lib/protos';\nexport * from './lib/redis';\nexport * from './lib/validation';\nexport * from './lib/utils';\nexport * from './lib/types';\nexport * from './lib/services';\nexport { log } from './lib/utils';\nexport { Prisma, PrismaClient } from '@prisma/client';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4fba96d597ce4979237ce4b50113fca6437df31e"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/index.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":111}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":46}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":127}},"4":{"start":{"line":5,"column":86},"end":{"line":5,"column":121}},"5":{"start":{"line":6,"column":15},"end":{"line":6,"column":34}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":109}},"7":{"start":{"line":7,"column":80},"end":{"line":7,"column":103}},"8":{"start":{"line":8,"column":14},"end":{"line":8,"column":32}},"9":{"start":{"line":9,"column":0},"end":{"line":9,"column":106}},"10":{"start":{"line":9,"column":79},"end":{"line":9,"column":100}},"11":{"start":{"line":10,"column":13},"end":{"line":10,"column":30}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":103}},"13":{"start":{"line":11,"column":78},"end":{"line":11,"column":97}},"14":{"start":{"line":12,"column":16},"end":{"line":12,"column":36}},"15":{"start":{"line":13,"column":0},"end":{"line":13,"column":112}},"16":{"start":{"line":13,"column":81},"end":{"line":13,"column":106}},"17":{"start":{"line":14,"column":13},"end":{"line":14,"column":30}},"18":{"start":{"line":15,"column":0},"end":{"line":15,"column":103}},"19":{"start":{"line":15,"column":78},"end":{"line":15,"column":97}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":72},"end":{"line":5,"column":73}},"loc":{"start":{"line":5,"column":84},"end":{"line":5,"column":123}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":66},"end":{"line":7,"column":67}},"loc":{"start":{"line":7,"column":78},"end":{"line":7,"column":105}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":65},"end":{"line":9,"column":66}},"loc":{"start":{"line":9,"column":77},"end":{"line":9,"column":102}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":11,"column":64},"end":{"line":11,"column":65}},"loc":{"start":{"line":11,"column":76},"end":{"line":11,"column":99}},"line":11},"4":{"name":"(anonymous_4)","decl":{"start":{"line":13,"column":67},"end":{"line":13,"column":68}},"loc":{"start":{"line":13,"column":79},"end":{"line":13,"column":108}},"line":13},"5":{"name":"(anonymous_5)","decl":{"start":{"line":15,"column":64},"end":{"line":15,"column":65}},"loc":{"start":{"line":15,"column":76},"end":{"line":15,"column":99}},"line":15}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":11,"5":1,"6":1,"7":0,"8":1,"9":1,"10":0,"11":1,"12":1,"13":0,"14":1,"15":1,"16":0,"17":1,"18":1,"19":0},"f":{"0":11,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/index.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/index.ts"],"names":[],"mappings":";;;AAAA,+CAA8C;AAArC,4GAAA,YAAY,OAAA;AACrB,mCAAkC;AAAzB,gGAAA,MAAM,OAAA;AACf,iCAAgC;AAAvB,8FAAA,KAAK,OAAA;AACd,+BAA8B;AAArB,4FAAA,IAAI,OAAA;AACb,qCAAoC;AAA3B,kGAAA,OAAO,OAAA;AAChB,+BAA8B;AAArB,4FAAA,IAAI,OAAA","sourcesContent":["export { Organization } from './organization';\nexport { School } from './school';\nexport { Class } from './class';\nexport { User } from './user';\nexport { Program } from './program';\nexport { Role } from './role';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e18434ff39033f357626265170745dbf6d5b4f11"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/organization.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/organization.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":42}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":37}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":58}},"5":{"start":{"line":7,"column":16},"end":{"line":7,"column":35}},"6":{"start":{"line":8,"column":18},"end":{"line":8,"column":38}},"7":{"start":{"line":9,"column":15},"end":{"line":9,"column":32}},"8":{"start":{"line":10,"column":15},"end":{"line":10,"column":42}},"9":{"start":{"line":13,"column":8},"end":{"line":21,"column":9}},"10":{"start":{"line":14,"column":12},"end":{"line":16,"column":15}},"11":{"start":{"line":19,"column":24},"end":{"line":19,"column":80}},"12":{"start":{"line":20,"column":12},"end":{"line":20,"column":184}},"13":{"start":{"line":24,"column":8},"end":{"line":37,"column":9}},"14":{"start":{"line":25,"column":24},"end":{"line":29,"column":14}},"15":{"start":{"line":30,"column":12},"end":{"line":31,"column":75}},"16":{"start":{"line":31,"column":16},"end":{"line":31,"column":75}},"17":{"start":{"line":32,"column":12},"end":{"line":32,"column":23}},"18":{"start":{"line":35,"column":24},"end":{"line":35,"column":80}},"19":{"start":{"line":36,"column":12},"end":{"line":36,"column":158}},"20":{"start":{"line":40,"column":8},"end":{"line":56,"column":9}},"21":{"start":{"line":41,"column":27},"end":{"line":48,"column":14}},"22":{"start":{"line":49,"column":12},"end":{"line":50,"column":28}},"23":{"start":{"line":50,"column":16},"end":{"line":50,"column":28}},"24":{"start":{"line":51,"column":12},"end":{"line":51,"column":71}},"25":{"start":{"line":54,"column":24},"end":{"line":54,"column":80}},"26":{"start":{"line":55,"column":12},"end":{"line":55,"column":83}},"27":{"start":{"line":59,"column":8},"end":{"line":75,"column":9}},"28":{"start":{"line":60,"column":27},"end":{"line":67,"column":14}},"29":{"start":{"line":68,"column":12},"end":{"line":69,"column":37}},"30":{"start":{"line":69,"column":16},"end":{"line":69,"column":37}},"31":{"start":{"line":70,"column":12},"end":{"line":70,"column":71}},"32":{"start":{"line":73,"column":24},"end":{"line":73,"column":80}},"33":{"start":{"line":74,"column":12},"end":{"line":74,"column":90}},"34":{"start":{"line":78,"column":8},"end":{"line":98,"column":9}},"35":{"start":{"line":79,"column":29},"end":{"line":90,"column":14}},"36":{"start":{"line":91,"column":12},"end":{"line":92,"column":75}},"37":{"start":{"line":92,"column":16},"end":{"line":92,"column":75}},"38":{"start":{"line":93,"column":12},"end":{"line":93,"column":58}},"39":{"start":{"line":93,"column":48},"end":{"line":93,"column":56}},"40":{"start":{"line":96,"column":24},"end":{"line":96,"column":80}},"41":{"start":{"line":97,"column":12},"end":{"line":97,"column":162}},"42":{"start":{"line":101,"column":30},"end":{"line":101,"column":81}},"43":{"start":{"line":102,"column":32},"end":{"line":102,"column":34}},"44":{"start":{"line":103,"column":8},"end":{"line":106,"column":9}},"45":{"start":{"line":104,"column":12},"end":{"line":105,"column":46}},"46":{"start":{"line":105,"column":16},"end":{"line":105,"column":46}},"47":{"start":{"line":107,"column":8},"end":{"line":108,"column":281}},"48":{"start":{"line":108,"column":12},"end":{"line":108,"column":281}},"49":{"start":{"line":111,"column":8},"end":{"line":131,"column":9}},"50":{"start":{"line":112,"column":26},"end":{"line":123,"column":14}},"51":{"start":{"line":124,"column":12},"end":{"line":125,"column":75}},"52":{"start":{"line":125,"column":16},"end":{"line":125,"column":75}},"53":{"start":{"line":126,"column":12},"end":{"line":126,"column":52}},"54":{"start":{"line":126,"column":42},"end":{"line":126,"column":50}},"55":{"start":{"line":129,"column":24},"end":{"line":129,"column":80}},"56":{"start":{"line":130,"column":12},"end":{"line":130,"column":159}},"57":{"start":{"line":134,"column":8},"end":{"line":155,"column":9}},"58":{"start":{"line":135,"column":26},"end":{"line":135,"column":73}},"59":{"start":{"line":136,"column":43},"end":{"line":136,"column":46}},"60":{"start":{"line":137,"column":27},"end":{"line":137,"column":65}},"61":{"start":{"line":138,"column":35},"end":{"line":138,"column":69}},"62":{"start":{"line":139,"column":32},"end":{"line":139,"column":63}},"63":{"start":{"line":140,"column":35},"end":{"line":140,"column":83}},"64":{"start":{"line":141,"column":32},"end":{"line":141,"column":77}},"65":{"start":{"line":142,"column":33},"end":{"line":142,"column":70}},"66":{"start":{"line":143,"column":30},"end":{"line":143,"column":61}},"67":{"start":{"line":144,"column":12},"end":{"line":148,"column":20}},"68":{"start":{"line":149,"column":12},"end":{"line":149,"column":80}},"69":{"start":{"line":150,"column":12},"end":{"line":150,"column":71}},"70":{"start":{"line":153,"column":24},"end":{"line":153,"column":80}},"71":{"start":{"line":154,"column":12},"end":{"line":154,"column":118}},"72":{"start":{"line":158,"column":0},"end":{"line":158,"column":36}},"73":{"start":{"line":159,"column":0},"end":{"line":159,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":46},"end":{"line":22,"column":5}},"line":12},"1":{"name":"(anonymous_1)","decl":{"start":{"line":23,"column":4},"end":{"line":23,"column":5}},"loc":{"start":{"line":23,"column":34},"end":{"line":38,"column":5}},"line":23},"2":{"name":"(anonymous_2)","decl":{"start":{"line":39,"column":4},"end":{"line":39,"column":5}},"loc":{"start":{"line":39,"column":34},"end":{"line":57,"column":5}},"line":39},"3":{"name":"(anonymous_3)","decl":{"start":{"line":58,"column":4},"end":{"line":58,"column":5}},"loc":{"start":{"line":58,"column":32},"end":{"line":76,"column":5}},"line":58},"4":{"name":"(anonymous_4)","decl":{"start":{"line":77,"column":4},"end":{"line":77,"column":5}},"loc":{"start":{"line":77,"column":38},"end":{"line":99,"column":5}},"line":77},"5":{"name":"(anonymous_5)","decl":{"start":{"line":93,"column":41},"end":{"line":93,"column":42}},"loc":{"start":{"line":93,"column":48},"end":{"line":93,"column":56}},"line":93},"6":{"name":"(anonymous_6)","decl":{"start":{"line":100,"column":4},"end":{"line":100,"column":5}},"loc":{"start":{"line":100,"column":56},"end":{"line":109,"column":5}},"line":100},"7":{"name":"(anonymous_7)","decl":{"start":{"line":110,"column":4},"end":{"line":110,"column":5}},"loc":{"start":{"line":110,"column":35},"end":{"line":132,"column":5}},"line":110},"8":{"name":"(anonymous_8)","decl":{"start":{"line":126,"column":35},"end":{"line":126,"column":36}},"loc":{"start":{"line":126,"column":42},"end":{"line":126,"column":50}},"line":126},"9":{"name":"(anonymous_9)","decl":{"start":{"line":133,"column":4},"end":{"line":133,"column":5}},"loc":{"start":{"line":133,"column":50},"end":{"line":156,"column":5}},"line":133}},"branchMap":{"0":{"loc":{"start":{"line":30,"column":12},"end":{"line":31,"column":75}},"type":"if","locations":[{"start":{"line":30,"column":12},"end":{"line":31,"column":75}},{"start":{"line":30,"column":12},"end":{"line":31,"column":75}}],"line":30},"1":{"loc":{"start":{"line":49,"column":12},"end":{"line":50,"column":28}},"type":"if","locations":[{"start":{"line":49,"column":12},"end":{"line":50,"column":28}},{"start":{"line":49,"column":12},"end":{"line":50,"column":28}}],"line":49},"2":{"loc":{"start":{"line":68,"column":12},"end":{"line":69,"column":37}},"type":"if","locations":[{"start":{"line":68,"column":12},"end":{"line":69,"column":37}},{"start":{"line":68,"column":12},"end":{"line":69,"column":37}}],"line":68},"3":{"loc":{"start":{"line":68,"column":16},"end":{"line":68,"column":39}},"type":"binary-expr","locations":[{"start":{"line":68,"column":16},"end":{"line":68,"column":22}},{"start":{"line":68,"column":26},"end":{"line":68,"column":39}}],"line":68},"4":{"loc":{"start":{"line":91,"column":12},"end":{"line":92,"column":75}},"type":"if","locations":[{"start":{"line":91,"column":12},"end":{"line":92,"column":75}},{"start":{"line":91,"column":12},"end":{"line":92,"column":75}}],"line":91},"5":{"loc":{"start":{"line":104,"column":12},"end":{"line":105,"column":46}},"type":"if","locations":[{"start":{"line":104,"column":12},"end":{"line":105,"column":46}},{"start":{"line":104,"column":12},"end":{"line":105,"column":46}}],"line":104},"6":{"loc":{"start":{"line":107,"column":8},"end":{"line":108,"column":281}},"type":"if","locations":[{"start":{"line":107,"column":8},"end":{"line":108,"column":281}},{"start":{"line":107,"column":8},"end":{"line":108,"column":281}}],"line":107},"7":{"loc":{"start":{"line":124,"column":12},"end":{"line":125,"column":75}},"type":"if","locations":[{"start":{"line":124,"column":12},"end":{"line":125,"column":75}},{"start":{"line":124,"column":12},"end":{"line":125,"column":75}}],"line":124}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":1,"73":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/organization.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/organization.ts"],"names":[],"mappings":"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","sourcesContent":["import { Organization as DbOrg, Prisma, PrismaClient } from '@prisma/client';\nimport { Logger } from 'pino';\n\nimport {\n  Category,\n  ENTITY_NOT_FOUND,\n  MachineError,\n  OnboardingError,\n  POSTGRES_GET_KIDSLOOP_ID_QUERY,\n  POSTGRES_IS_VALID_QUERY,\n  returnMessageOrThrowOnboardingError,\n} from '../errors';\nimport { Organization as Org } from '../protos/api_pb';\nimport { AdminService } from '../services/adminService';\nimport { Entity } from '../types';\nimport { ExternalUuid, Uuid } from '../utils';\n\nimport { Program } from './program';\nimport { Role } from './role';\n\nconst prisma = new PrismaClient();\n\nexport class Organization {\n  public static entity = Entity.ORGANIZATION;\n\n  public static async insertOne(\n    organization: Prisma.OrganizationCreateInput,\n    log: Logger\n  ): Promise<void> {\n    try {\n      await prisma.organization.create({\n        data: organization,\n      });\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw new OnboardingError(\n        MachineError.WRITE,\n        msg,\n        Category.POSTGRES,\n        log,\n        [],\n        { entityId: organization.externalUuid, operation: 'INSERT ONE' }\n      );\n    }\n  }\n\n  public static async findOne(id: ExternalUuid, log: Logger): Promise<DbOrg> {\n    try {\n      const org = await prisma.organization.findUnique({\n        where: {\n          externalUuid: id,\n        },\n      });\n      if (!org) throw ENTITY_NOT_FOUND(id, this.entity, log);\n      return org;\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw new OnboardingError(\n        MachineError.READ,\n        msg,\n        Category.POSTGRES,\n        log,\n        [],\n        { entityId: id, operation: 'FIND ONE' }\n      );\n    }\n  }\n\n  public static async isValid(id: ExternalUuid, log: Logger): Promise<boolean> {\n    try {\n      const school = await prisma.organization.findUnique({\n        where: {\n          externalUuid: id,\n        },\n        select: {\n          externalUuid: true,\n        },\n      });\n      if (school) return true;\n      throw ENTITY_NOT_FOUND(id, this.entity, log);\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw POSTGRES_IS_VALID_QUERY(id, this.entity, msg, log);\n    }\n  }\n\n  public static async getId(id: ExternalUuid, log: Logger): Promise<Uuid> {\n    try {\n      const klUuid = await prisma.organization.findUnique({\n        where: {\n          externalUuid: id,\n        },\n        select: {\n          klUuid: true,\n        },\n      });\n      if (klUuid && klUuid.klUuid) return klUuid.klUuid;\n      throw ENTITY_NOT_FOUND(id, this.entity, log);\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw POSTGRES_GET_KIDSLOOP_ID_QUERY(id, this.entity, msg, log);\n    }\n  }\n\n  public static async getPrograms(\n    id: ExternalUuid,\n    log: Logger\n  ): Promise<string[]> {\n    try {\n      const programs = await prisma.organization.findUnique({\n        where: {\n          externalUuid: id,\n        },\n        select: {\n          programs: {\n            select: {\n              klUuid: true,\n            },\n          },\n        },\n      });\n      if (!programs) throw ENTITY_NOT_FOUND(id, this.entity, log);\n      return programs.programs.map((p) => p.klUuid);\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw new OnboardingError(\n        MachineError.READ,\n        msg,\n        Category.POSTGRES,\n        log,\n        [],\n        { entityId: id, operation: 'GET PROGRAMS' }\n      );\n    }\n  }\n\n  public static async programsAreValid(\n    orgId: ExternalUuid,\n    programs: ExternalUuid[],\n    log: Logger\n  ): Promise<void> {\n    const validPrograms = new Set(await Organization.getPrograms(orgId, log));\n    const invalidPrograms = [];\n    for (const program of programs) {\n      if (!validPrograms.has(program)) invalidPrograms.push(program);\n    }\n    if (invalidPrograms.length > 0)\n      throw new OnboardingError(\n        MachineError.VALIDATION,\n        `Programs: ${invalidPrograms.join(\n          ', '\n        )} are invalid when comparing to the parent Organization ${orgId}`,\n        Category.REQUEST,\n        log,\n        [],\n        { entityIds: programs, operation: 'PROGRAMS ARE VALID' }\n      );\n  }\n\n  public static async getRoles(\n    id: ExternalUuid,\n    log: Logger\n  ): Promise<ExternalUuid[]> {\n    try {\n      const roles = await prisma.organization.findUnique({\n        where: {\n          externalUuid: id,\n        },\n        select: {\n          roles: {\n            select: {\n              klUuid: true,\n            },\n          },\n        },\n      });\n      if (!roles) throw ENTITY_NOT_FOUND(id, this.entity, log);\n      return roles.roles.map((r) => r.klUuid);\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw new OnboardingError(\n        MachineError.READ,\n        msg,\n        Category.POSTGRES,\n        log,\n        [],\n        { entityId: id, operation: 'GET ROLES' }\n      );\n    }\n  }\n\n  public static async initializeOrganization(\n    org: Org.AsObject,\n    log: Logger\n  ): Promise<void> {\n    try {\n      const admin = await AdminService.getInstance();\n      const { name, externalUuid } = org;\n      const klUuid = await admin.getOrganization(name, log);\n      const systemPrograms = await admin.getSystemPrograms(log);\n      const systemRoles = await admin.getSystemRoles(log);\n      const customPrograms = await admin.getOrganizationPrograms(klUuid, log);\n      const customRoles = await admin.getOrganizationRoles(klUuid, log);\n      const programUuids = systemPrograms.concat(customPrograms);\n      const roleUuids = systemRoles.concat(customRoles);\n\n      await Organization.insertOne(\n        {\n          externalUuid,\n          klUuid,\n          name,\n        },\n        log\n      );\n      await Program.insertMany(programUuids, externalUuid, log);\n      await Role.insertMany(roleUuids, externalUuid, log);\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw new OnboardingError(\n        MachineError.VALIDATION,\n        msg,\n        Category.REQUEST,\n        log\n      );\n    }\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0b7cd6ae7b32ebc2624fa91e28e4e78eb77dca9f"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/errors.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/errors.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":396}},"2":{"start":{"line":4,"column":12},"end":{"line":4,"column":25}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":36}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":41}},"5":{"start":{"line":8,"column":0},"end":{"line":16,"column":59}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":36}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":36}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":32}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":38}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":48}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":36}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":38}},"13":{"start":{"line":18,"column":0},"end":{"line":31,"column":71}},"14":{"start":{"line":19,"column":4},"end":{"line":19,"column":46}},"15":{"start":{"line":20,"column":4},"end":{"line":20,"column":68}},"16":{"start":{"line":21,"column":4},"end":{"line":21,"column":68}},"17":{"start":{"line":22,"column":4},"end":{"line":22,"column":53}},"18":{"start":{"line":23,"column":4},"end":{"line":23,"column":44}},"19":{"start":{"line":24,"column":4},"end":{"line":24,"column":46}},"20":{"start":{"line":25,"column":4},"end":{"line":25,"column":43}},"21":{"start":{"line":26,"column":4},"end":{"line":26,"column":61}},"22":{"start":{"line":27,"column":4},"end":{"line":27,"column":36}},"23":{"start":{"line":28,"column":4},"end":{"line":28,"column":40}},"24":{"start":{"line":29,"column":4},"end":{"line":29,"column":44}},"25":{"start":{"line":30,"column":4},"end":{"line":30,"column":44}},"26":{"start":{"line":34,"column":8},"end":{"line":34,"column":29}},"27":{"start":{"line":38,"column":18},"end":{"line":38,"column":38}},"28":{"start":{"line":39,"column":33},"end":{"line":39,"column":35}},"29":{"start":{"line":40,"column":34},"end":{"line":40,"column":38}},"30":{"start":{"line":41,"column":33},"end":{"line":41,"column":37}},"31":{"start":{"line":42,"column":20},"end":{"line":42,"column":24}},"32":{"start":{"line":43,"column":8},"end":{"line":73,"column":9}},"33":{"start":{"line":44,"column":12},"end":{"line":72,"column":13}},"34":{"start":{"line":46,"column":38},"end":{"line":46,"column":67}},"35":{"start":{"line":47,"column":20},"end":{"line":47,"column":59}},"36":{"start":{"line":48,"column":20},"end":{"line":48,"column":58}},"37":{"start":{"line":49,"column":20},"end":{"line":49,"column":53}},"38":{"start":{"line":50,"column":20},"end":{"line":50,"column":26}},"39":{"start":{"line":53,"column":34},"end":{"line":53,"column":73}},"40":{"start":{"line":54,"column":20},"end":{"line":54,"column":54}},"41":{"start":{"line":55,"column":20},"end":{"line":55,"column":48}},"42":{"start":{"line":56,"column":20},"end":{"line":56,"column":26}},"43":{"start":{"line":59,"column":34},"end":{"line":59,"column":72}},"44":{"start":{"line":60,"column":20},"end":{"line":60,"column":54}},"45":{"start":{"line":61,"column":20},"end":{"line":61,"column":47}},"46":{"start":{"line":62,"column":20},"end":{"line":62,"column":26}},"47":{"start":{"line":65,"column":34},"end":{"line":65,"column":68}},"48":{"start":{"line":66,"column":20},"end":{"line":68,"column":23}},"49":{"start":{"line":69,"column":20},"end":{"line":69,"column":34}},"50":{"start":{"line":70,"column":20},"end":{"line":70,"column":26}},"51":{"start":{"line":74,"column":8},"end":{"line":87,"column":9}},"52":{"start":{"line":75,"column":24},"end":{"line":75,"column":54}},"53":{"start":{"line":76,"column":12},"end":{"line":76,"column":48}},"54":{"start":{"line":77,"column":12},"end":{"line":77,"column":33}},"55":{"start":{"line":79,"column":13},"end":{"line":87,"column":9}},"56":{"start":{"line":80,"column":12},"end":{"line":80,"column":51}},"57":{"start":{"line":82,"column":13},"end":{"line":87,"column":9}},"58":{"start":{"line":83,"column":12},"end":{"line":83,"column":56}},"59":{"start":{"line":85,"column":13},"end":{"line":87,"column":9}},"60":{"start":{"line":86,"column":12},"end":{"line":86,"column":39}},"61":{"start":{"line":88,"column":8},"end":{"line":88,"column":17}},"62":{"start":{"line":91,"column":0},"end":{"line":91,"column":24}},"63":{"start":{"line":94,"column":8},"end":{"line":94,"column":27}},"64":{"start":{"line":95,"column":8},"end":{"line":95,"column":23}},"65":{"start":{"line":96,"column":8},"end":{"line":96,"column":33}},"66":{"start":{"line":97,"column":8},"end":{"line":97,"column":29}},"67":{"start":{"line":98,"column":8},"end":{"line":98,"column":25}},"68":{"start":{"line":99,"column":8},"end":{"line":99,"column":37}},"69":{"start":{"line":100,"column":8},"end":{"line":100,"column":31}},"70":{"start":{"line":101,"column":8},"end":{"line":101,"column":33}},"71":{"start":{"line":102,"column":8},"end":{"line":102,"column":43}},"72":{"start":{"line":103,"column":8},"end":{"line":103,"column":35}},"73":{"start":{"line":104,"column":8},"end":{"line":105,"column":23}},"74":{"start":{"line":105,"column":12},"end":{"line":105,"column":23}},"75":{"start":{"line":108,"column":8},"end":{"line":109,"column":19}},"76":{"start":{"line":109,"column":12},"end":{"line":109,"column":19}},"77":{"start":{"line":110,"column":22},"end":{"line":110,"column":146}},"78":{"start":{"line":111,"column":8},"end":{"line":112,"column":44}},"79":{"start":{"line":112,"column":12},"end":{"line":112,"column":44}},"80":{"start":{"line":113,"column":8},"end":{"line":130,"column":9}},"81":{"start":{"line":115,"column":16},"end":{"line":115,"column":50}},"82":{"start":{"line":116,"column":16},"end":{"line":116,"column":22}},"83":{"start":{"line":118,"column":16},"end":{"line":118,"column":50}},"84":{"start":{"line":119,"column":16},"end":{"line":119,"column":22}},"85":{"start":{"line":121,"column":16},"end":{"line":121,"column":51}},"86":{"start":{"line":122,"column":16},"end":{"line":122,"column":22}},"87":{"start":{"line":124,"column":16},"end":{"line":124,"column":51}},"88":{"start":{"line":125,"column":16},"end":{"line":125,"column":22}},"89":{"start":{"line":128,"column":16},"end":{"line":128,"column":51}},"90":{"start":{"line":129,"column":16},"end":{"line":129,"column":22}},"91":{"start":{"line":131,"column":8},"end":{"line":131,"column":34}},"92":{"start":{"line":134,"column":18},"end":{"line":134,"column":38}},"93":{"start":{"line":135,"column":8},"end":{"line":165,"column":9}},"94":{"start":{"line":137,"column":30},"end":{"line":137,"column":60}},"95":{"start":{"line":138,"column":34},"end":{"line":138,"column":63}},"96":{"start":{"line":139,"column":16},"end":{"line":139,"column":56}},"97":{"start":{"line":140,"column":16},"end":{"line":140,"column":55}},"98":{"start":{"line":141,"column":16},"end":{"line":141,"column":49}},"99":{"start":{"line":142,"column":16},"end":{"line":142,"column":39}},"100":{"start":{"line":143,"column":16},"end":{"line":143,"column":22}},"101":{"start":{"line":146,"column":30},"end":{"line":146,"column":69}},"102":{"start":{"line":147,"column":16},"end":{"line":147,"column":51}},"103":{"start":{"line":148,"column":16},"end":{"line":148,"column":41}},"104":{"start":{"line":149,"column":16},"end":{"line":149,"column":22}},"105":{"start":{"line":152,"column":30},"end":{"line":152,"column":68}},"106":{"start":{"line":153,"column":16},"end":{"line":153,"column":51}},"107":{"start":{"line":154,"column":16},"end":{"line":154,"column":47}},"108":{"start":{"line":155,"column":16},"end":{"line":155,"column":22}},"109":{"start":{"line":158,"column":30},"end":{"line":158,"column":64}},"110":{"start":{"line":159,"column":16},"end":{"line":161,"column":19}},"111":{"start":{"line":162,"column":16},"end":{"line":162,"column":43}},"112":{"start":{"line":163,"column":16},"end":{"line":163,"column":22}},"113":{"start":{"line":166,"column":8},"end":{"line":166,"column":17}},"114":{"start":{"line":169,"column":0},"end":{"line":169,"column":42}},"115":{"start":{"line":170,"column":20},"end":{"line":170,"column":128}},"116":{"start":{"line":170,"column":26},"end":{"line":170,"column":128}},"117":{"start":{"line":171,"column":0},"end":{"line":171,"column":34}},"118":{"start":{"line":172,"column":35},"end":{"line":172,"column":155}},"119":{"start":{"line":172,"column":47},"end":{"line":172,"column":155}},"120":{"start":{"line":173,"column":0},"end":{"line":173,"column":64}},"121":{"start":{"line":174,"column":20},"end":{"line":174,"column":134}},"122":{"start":{"line":174,"column":52},"end":{"line":174,"column":134}},"123":{"start":{"line":175,"column":0},"end":{"line":175,"column":34}},"124":{"start":{"line":176,"column":25},"end":{"line":176,"column":166}},"125":{"start":{"line":176,"column":46},"end":{"line":176,"column":166}},"126":{"start":{"line":177,"column":0},"end":{"line":177,"column":44}},"127":{"start":{"line":178,"column":30},"end":{"line":178,"column":171}},"128":{"start":{"line":178,"column":51},"end":{"line":178,"column":171}},"129":{"start":{"line":179,"column":0},"end":{"line":179,"column":54}},"130":{"start":{"line":180,"column":32},"end":{"line":185,"column":1}},"131":{"start":{"line":181,"column":4},"end":{"line":183,"column":5}},"132":{"start":{"line":182,"column":8},"end":{"line":182,"column":166}},"133":{"start":{"line":184,"column":4},"end":{"line":184,"column":150}},"134":{"start":{"line":186,"column":0},"end":{"line":186,"column":58}},"135":{"start":{"line":187,"column":39},"end":{"line":200,"column":1}},"136":{"start":{"line":188,"column":4},"end":{"line":194,"column":5}},"137":{"start":{"line":189,"column":8},"end":{"line":193,"column":11}},"138":{"start":{"line":195,"column":4},"end":{"line":199,"column":7}},"139":{"start":{"line":201,"column":0},"end":{"line":201,"column":72}},"140":{"start":{"line":203,"column":4},"end":{"line":204,"column":138}},"141":{"start":{"line":204,"column":8},"end":{"line":204,"column":138}},"142":{"start":{"line":205,"column":4},"end":{"line":205,"column":13}},"143":{"start":{"line":207,"column":0},"end":{"line":207,"column":36}},"144":{"start":{"line":208,"column":44},"end":{"line":212,"column":1}},"145":{"start":{"line":209,"column":4},"end":{"line":210,"column":16}},"146":{"start":{"line":210,"column":8},"end":{"line":210,"column":16}},"147":{"start":{"line":211,"column":4},"end":{"line":211,"column":51}},"148":{"start":{"line":213,"column":0},"end":{"line":213,"column":82}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":1},"end":{"line":8,"column":2}},"loc":{"start":{"line":8,"column":21},"end":{"line":16,"column":1}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":18,"column":1},"end":{"line":18,"column":2}},"loc":{"start":{"line":18,"column":25},"end":{"line":31,"column":1}},"line":18},"2":{"name":"(anonymous_2)","decl":{"start":{"line":33,"column":4},"end":{"line":33,"column":5}},"loc":{"start":{"line":33,"column":24},"end":{"line":35,"column":5}},"line":33},"3":{"name":"(anonymous_3)","decl":{"start":{"line":37,"column":4},"end":{"line":37,"column":5}},"loc":{"start":{"line":37,"column":22},"end":{"line":89,"column":5}},"line":37},"4":{"name":"(anonymous_4)","decl":{"start":{"line":93,"column":4},"end":{"line":93,"column":5}},"loc":{"start":{"line":93,"column":140},"end":{"line":106,"column":5}},"line":93},"5":{"name":"(anonymous_5)","decl":{"start":{"line":107,"column":4},"end":{"line":107,"column":5}},"loc":{"start":{"line":107,"column":10},"end":{"line":132,"column":5}},"line":107},"6":{"name":"(anonymous_6)","decl":{"start":{"line":133,"column":4},"end":{"line":133,"column":5}},"loc":{"start":{"line":133,"column":22},"end":{"line":167,"column":5}},"line":133},"7":{"name":"(anonymous_7)","decl":{"start":{"line":170,"column":20},"end":{"line":170,"column":21}},"loc":{"start":{"line":170,"column":26},"end":{"line":170,"column":128}},"line":170},"8":{"name":"(anonymous_8)","decl":{"start":{"line":172,"column":35},"end":{"line":172,"column":36}},"loc":{"start":{"line":172,"column":47},"end":{"line":172,"column":155}},"line":172},"9":{"name":"(anonymous_9)","decl":{"start":{"line":174,"column":20},"end":{"line":174,"column":21}},"loc":{"start":{"line":174,"column":52},"end":{"line":174,"column":134}},"line":174},"10":{"name":"(anonymous_10)","decl":{"start":{"line":176,"column":25},"end":{"line":176,"column":26}},"loc":{"start":{"line":176,"column":46},"end":{"line":176,"column":166}},"line":176},"11":{"name":"(anonymous_11)","decl":{"start":{"line":178,"column":30},"end":{"line":178,"column":31}},"loc":{"start":{"line":178,"column":51},"end":{"line":178,"column":171}},"line":178},"12":{"name":"(anonymous_12)","decl":{"start":{"line":180,"column":32},"end":{"line":180,"column":33}},"loc":{"start":{"line":180,"column":64},"end":{"line":185,"column":1}},"line":180},"13":{"name":"(anonymous_13)","decl":{"start":{"line":187,"column":39},"end":{"line":187,"column":40}},"loc":{"start":{"line":187,"column":71},"end":{"line":200,"column":1}},"line":187},"14":{"name":"tryGetMember","decl":{"start":{"line":202,"column":9},"end":{"line":202,"column":21}},"loc":{"start":{"line":202,"column":41},"end":{"line":206,"column":1}},"line":202},"15":{"name":"(anonymous_15)","decl":{"start":{"line":208,"column":44},"end":{"line":208,"column":45}},"loc":{"start":{"line":208,"column":51},"end":{"line":212,"column":1}},"line":208}},"branchMap":{"0":{"loc":{"start":{"line":16,"column":14},"end":{"line":16,"column":57}},"type":"binary-expr","locations":[{"start":{"line":16,"column":14},"end":{"line":16,"column":30}},{"start":{"line":16,"column":35},"end":{"line":16,"column":56}}],"line":16},"1":{"loc":{"start":{"line":31,"column":18},"end":{"line":31,"column":69}},"type":"binary-expr","locations":[{"start":{"line":31,"column":18},"end":{"line":31,"column":38}},{"start":{"line":31,"column":43},"end":{"line":31,"column":68}}],"line":31},"2":{"loc":{"start":{"line":44,"column":12},"end":{"line":72,"column":13}},"type":"switch","locations":[{"start":{"line":45,"column":16},"end":{"line":51,"column":17}},{"start":{"line":52,"column":16},"end":{"line":57,"column":17}},{"start":{"line":58,"column":16},"end":{"line":63,"column":17}},{"start":{"line":64,"column":16},"end":{"line":71,"column":17}}],"line":44},"3":{"loc":{"start":{"line":74,"column":8},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":74,"column":8},"end":{"line":87,"column":9}},{"start":{"line":74,"column":8},"end":{"line":87,"column":9}}],"line":74},"4":{"loc":{"start":{"line":79,"column":13},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":79,"column":13},"end":{"line":87,"column":9}},{"start":{"line":79,"column":13},"end":{"line":87,"column":9}}],"line":79},"5":{"loc":{"start":{"line":82,"column":13},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":82,"column":13},"end":{"line":87,"column":9}},{"start":{"line":82,"column":13},"end":{"line":87,"column":9}}],"line":82},"6":{"loc":{"start":{"line":85,"column":13},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":85,"column":13},"end":{"line":87,"column":9}},{"start":{"line":85,"column":13},"end":{"line":87,"column":9}}],"line":85},"7":{"loc":{"start":{"line":93,"column":38},"end":{"line":93,"column":54}},"type":"default-arg","locations":[{"start":{"line":93,"column":47},"end":{"line":93,"column":54}}],"line":93},"8":{"loc":{"start":{"line":93,"column":56},"end":{"line":93,"column":65}},"type":"default-arg","locations":[{"start":{"line":93,"column":63},"end":{"line":93,"column":65}}],"line":93},"9":{"loc":{"start":{"line":93,"column":67},"end":{"line":93,"column":82}},"type":"default-arg","locations":[{"start":{"line":93,"column":80},"end":{"line":93,"column":82}}],"line":93},"10":{"loc":{"start":{"line":93,"column":84},"end":{"line":93,"column":96}},"type":"default-arg","locations":[{"start":{"line":93,"column":94},"end":{"line":93,"column":96}}],"line":93},"11":{"loc":{"start":{"line":93,"column":98},"end":{"line":93,"column":116}},"type":"default-arg","locations":[{"start":{"line":93,"column":109},"end":{"line":93,"column":116}}],"line":93},"12":{"loc":{"start":{"line":93,"column":118},"end":{"line":93,"column":138}},"type":"default-arg","locations":[{"start":{"line":93,"column":134},"end":{"line":93,"column":138}}],"line":93},"13":{"loc":{"start":{"line":104,"column":8},"end":{"line":105,"column":23}},"type":"if","locations":[{"start":{"line":104,"column":8},"end":{"line":105,"column":23}},{"start":{"line":104,"column":8},"end":{"line":105,"column":23}}],"line":104},"14":{"loc":{"start":{"line":108,"column":8},"end":{"line":109,"column":19}},"type":"if","locations":[{"start":{"line":108,"column":8},"end":{"line":109,"column":19}},{"start":{"line":108,"column":8},"end":{"line":109,"column":19}}],"line":108},"15":{"loc":{"start":{"line":111,"column":8},"end":{"line":112,"column":44}},"type":"if","locations":[{"start":{"line":111,"column":8},"end":{"line":112,"column":44}},{"start":{"line":111,"column":8},"end":{"line":112,"column":44}}],"line":111},"16":{"loc":{"start":{"line":113,"column":8},"end":{"line":130,"column":9}},"type":"switch","locations":[{"start":{"line":114,"column":12},"end":{"line":116,"column":22}},{"start":{"line":117,"column":12},"end":{"line":119,"column":22}},{"start":{"line":120,"column":12},"end":{"line":122,"column":22}},{"start":{"line":123,"column":12},"end":{"line":125,"column":22}},{"start":{"line":126,"column":12},"end":{"line":126,"column":25}},{"start":{"line":127,"column":12},"end":{"line":129,"column":22}}],"line":113},"17":{"loc":{"start":{"line":135,"column":8},"end":{"line":165,"column":9}},"type":"switch","locations":[{"start":{"line":136,"column":12},"end":{"line":144,"column":13}},{"start":{"line":145,"column":12},"end":{"line":150,"column":13}},{"start":{"line":151,"column":12},"end":{"line":156,"column":13}},{"start":{"line":157,"column":12},"end":{"line":164,"column":13}}],"line":135},"18":{"loc":{"start":{"line":174,"column":37},"end":{"line":174,"column":47}},"type":"default-arg","locations":[{"start":{"line":174,"column":45},"end":{"line":174,"column":47}}],"line":174},"19":{"loc":{"start":{"line":181,"column":4},"end":{"line":183,"column":5}},"type":"if","locations":[{"start":{"line":181,"column":4},"end":{"line":183,"column":5}},{"start":{"line":181,"column":4},"end":{"line":183,"column":5}}],"line":181},"20":{"loc":{"start":{"line":188,"column":4},"end":{"line":194,"column":5}},"type":"if","locations":[{"start":{"line":188,"column":4},"end":{"line":194,"column":5}},{"start":{"line":188,"column":4},"end":{"line":194,"column":5}}],"line":188},"21":{"loc":{"start":{"line":202,"column":30},"end":{"line":202,"column":39}},"type":"default-arg","locations":[{"start":{"line":202,"column":37},"end":{"line":202,"column":39}}],"line":202},"22":{"loc":{"start":{"line":203,"column":4},"end":{"line":204,"column":138}},"type":"if","locations":[{"start":{"line":203,"column":4},"end":{"line":204,"column":138}},{"start":{"line":203,"column":4},"end":{"line":204,"column":138}}],"line":203},"23":{"loc":{"start":{"line":209,"column":4},"end":{"line":210,"column":16}},"type":"if","locations":[{"start":{"line":209,"column":4},"end":{"line":210,"column":16}},{"start":{"line":209,"column":4},"end":{"line":210,"column":16}}],"line":209},"24":{"loc":{"start":{"line":209,"column":8},"end":{"line":209,"column":59}},"type":"binary-expr","locations":[{"start":{"line":209,"column":8},"end":{"line":209,"column":36}},{"start":{"line":209,"column":40},"end":{"line":209,"column":59}}],"line":209},"25":{"loc":{"start":{"line":211,"column":11},"end":{"line":211,"column":50}},"type":"cond-expr","locations":[{"start":{"line":211,"column":32},"end":{"line":211,"column":41}},{"start":{"line":211,"column":44},"end":{"line":211,"column":50}}],"line":211}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":48,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":1,"63":58,"64":58,"65":58,"66":58,"67":58,"68":58,"69":58,"70":58,"71":58,"72":58,"73":58,"74":58,"75":58,"76":0,"77":58,"78":58,"79":1,"80":58,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":58,"90":58,"91":58,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":1,"115":1,"116":0,"117":1,"118":1,"119":0,"120":1,"121":1,"122":0,"123":1,"124":1,"125":0,"126":1,"127":1,"128":3,"129":1,"130":1,"131":0,"132":0,"133":0,"134":1,"135":1,"136":0,"137":0,"138":0,"139":1,"140":63,"141":0,"142":63,"143":1,"144":1,"145":0,"146":0,"147":0,"148":1},"f":{"0":1,"1":1,"2":48,"3":0,"4":58,"5":58,"6":0,"7":0,"8":0,"9":0,"10":0,"11":3,"12":0,"13":0,"14":63,"15":0},"b":{"0":[1,1],"1":[1,1],"2":[0,0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[6],"8":[9],"9":[9],"10":[57],"11":[58],"12":[58],"13":[58,0],"14":[0,58],"15":[1,57],"16":[0,0,0,0,58,58],"17":[0,0,0,0],"18":[0],"19":[0,0],"20":[0,0],"21":[0],"22":[0,63],"23":[0,0],"24":[0,0],"25":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/errors.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/errors.ts"],"names":[],"mappings":"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","sourcesContent":["import { Logger } from 'pino';\n\nimport { Entity, ExternalUuid, log } from '..';\n\nimport {\n  EntityAlreadyExistsError,\n  EntityDoesNotExistError,\n  InternalServerError,\n  PathBasedError,\n  Error as PbError,\n  ValidationError,\n} from './protos';\n\nexport const BASE_PATH = Object.freeze(['$']);\n\nexport enum Category {\n  REQUEST = 'REQUEST',\n  APP = 'APPLICATION',\n  REDIS = 'REDIS',\n  POSTGRES = 'POSTGRES',\n  ADMIN_SERVICE = 'ADMIN SERVICE',\n  UNKNOWN = 'UNKNOWN',\n  PROTOBUF = 'PROTOBUF',\n}\n\nexport enum MachineError {\n  VALIDATION = 'validation',\n  ENTITY_ALREADY_EXISTS = 'entity already exists',\n  ENTITY_DOES_NOT_EXIST = 'entity does not exist',\n  UNREACHABLE_CODE = 'unreachable',\n  READ = 'read operation',\n  WRITE = 'write operation',\n  STREAM = 'data stream',\n  APP_CONFIG = 'application configuration',\n  SERDE = 'serde',\n  NETWORK = 'network',\n  NOT_FOUND = 'not found',\n  REQUEST = 'bad request',\n}\n\ntype LogLevel = 'error' | 'warn' | 'info' | 'debug' | 'trace';\n\nexport type Props = Record<string, string | string[] | number | boolean>;\n\nexport class Errors {\n  constructor(public errors: OnboardingError[]) {}\n\n  // @TODO - Rework this, it's pretty gnarly\n  public toProtobufError(): PbError {\n    const e = new PbError();\n    const validationErrors = [];\n    let entityAlreadyExists = null;\n    let entityDoesntExists = null;\n    let other = null;\n    for (const err of this.errors) {\n      switch (err.error) {\n        case MachineError.VALIDATION: {\n          const pathBased = new PathBasedError();\n          pathBased.setPath(err.path.join(', '));\n          pathBased.setDetailsList(err.details);\n          validationErrors.push(pathBased);\n          break;\n        }\n        case MachineError.ENTITY_ALREADY_EXISTS: {\n          const error = new EntityAlreadyExistsError();\n          error.setDetailsList(err.details);\n          entityAlreadyExists = error;\n          break;\n        }\n        case MachineError.ENTITY_DOES_NOT_EXIST: {\n          const error = new EntityDoesNotExistError();\n          error.setDetailsList(err.details);\n          entityDoesntExists = error;\n          break;\n        }\n        default: {\n          const error = new InternalServerError();\n          error.setDetailsList([\n            'Unexpected error occurred when attempting to process request',\n          ]);\n          other = error;\n          break;\n        }\n      }\n    }\n    if (validationErrors.length > 0) {\n      const err = new ValidationError();\n      err.setErrorsList(validationErrors);\n      e.setValidation(err);\n    } else if (entityAlreadyExists) {\n      e.setEntityExists(entityAlreadyExists);\n    } else if (entityDoesntExists) {\n      e.setEntityDoesNotExist(entityDoesntExists);\n    } else if (other) {\n      e.setInternalServer(other);\n    }\n    return e;\n  }\n}\n\nexport class OnboardingError {\n  private hasBeenLogged = false;\n  constructor(\n    public readonly error: MachineError,\n    public readonly msg: string,\n    public readonly category: Category,\n    public logger: Logger = log,\n    public readonly path: string[] = [],\n    public readonly properties = {},\n    public details: string[] = [],\n    public readonly logLevel: LogLevel = 'error',\n    public readonly logOnCreation = true\n  ) {\n    if (logOnCreation) this.log();\n  }\n\n  public log(): void {\n    if (this.hasBeenLogged) return;\n    const props: Props = {\n      ...this.properties,\n      category: this.category,\n      error: this.error,\n      path: this.path.join('.'),\n    };\n    if (this.details.length > 0) props['details'] = this.details;\n    switch (this.logLevel) {\n      case 'warn':\n        this.logger.warn(props, this.msg);\n        break;\n      case 'info':\n        this.logger.info(props, this.msg);\n        break;\n      case 'trace':\n        this.logger.trace(props, this.msg);\n        break;\n      case 'debug':\n        this.logger.debug(props, this.msg);\n        break;\n      case 'error':\n      default:\n        this.logger.error(props, this.msg);\n        break;\n    }\n    this.hasBeenLogged = true;\n  }\n\n  public toProtobufError(): PbError {\n    const e = new PbError();\n    switch (this.error) {\n      case MachineError.VALIDATION: {\n        const error = new ValidationError();\n        const pathBased = new PathBasedError();\n        pathBased.setPath(this.path.join(', '));\n        pathBased.setDetailsList(this.details);\n        error.setErrorsList([pathBased]);\n        e.setValidation(error);\n        break;\n      }\n      case MachineError.ENTITY_ALREADY_EXISTS: {\n        const error = new EntityAlreadyExistsError();\n        error.setDetailsList(this.details);\n        e.setEntityExists(error);\n        break;\n      }\n      case MachineError.ENTITY_DOES_NOT_EXIST: {\n        const error = new EntityDoesNotExistError();\n        error.setDetailsList(this.details);\n        e.setEntityDoesNotExist(error);\n        break;\n      }\n      default: {\n        const error = new InternalServerError();\n        error.setDetailsList([\n          'Unexpected error occurred when attempting to process request',\n        ]);\n        e.setInternalServer(error);\n        break;\n      }\n    }\n    return e;\n  }\n}\n\nexport const UNREACHABLE = () =>\n  new OnboardingError(\n    MachineError.UNREACHABLE_CODE,\n    'This error should not be reachable',\n    Category.APP\n  );\n\nexport const ENVIRONMENT_VARIABLE_ERROR = (envVar: string) =>\n  new OnboardingError(\n    MachineError.APP_CONFIG,\n    `Environment Variable ${envVar} set incorrectly`,\n    Category.APP\n  );\n\nexport const BAD_REQUEST = (\n  msg: string,\n  path: string[],\n  log: Logger,\n  props: Props = {}\n) =>\n  new OnboardingError(\n    MachineError.REQUEST,\n    msg,\n    Category.REQUEST,\n    log,\n    path,\n    props\n  );\n\nexport const ENTITY_NOT_FOUND = (\n  id: ExternalUuid,\n  entity: Entity,\n  log: Logger\n) =>\n  new OnboardingError(\n    MachineError.ENTITY_DOES_NOT_EXIST,\n    `${entity} with id ${id} does not exist`,\n    Category.REQUEST,\n    log\n  );\n\nexport const ENTITY_ALREADY_EXISTS = (\n  id: ExternalUuid,\n  entity: Entity,\n  log: Logger\n) =>\n  new OnboardingError(\n    MachineError.ENTITY_ALREADY_EXISTS,\n    `${entity} with id ${id} already exists`,\n    Category.REQUEST,\n    log\n  );\n\nexport const POSTGRES_IS_VALID_QUERY = (\n  id: ExternalUuid | ExternalUuid[],\n  targetEntity: Entity,\n  msg: string,\n  log: Logger\n) => {\n  if (Array.isArray(id)) {\n    return new OnboardingError(\n      MachineError.VALIDATION,\n      msg,\n      Category.POSTGRES,\n      log,\n      [],\n      { operation: 'IS VALID', targetEntity, targetEntityIds: id.join(', ') }\n    );\n  }\n\n  return new OnboardingError(\n    MachineError.VALIDATION,\n    msg,\n    Category.POSTGRES,\n    log,\n    [],\n    { operation: 'IS VALID', targetEntity, targetEntityId: id }\n  );\n};\n\nexport const POSTGRES_GET_KIDSLOOP_ID_QUERY = (\n  id: ExternalUuid | ExternalUuid[],\n  targetEntity: Entity,\n  msg: string,\n  log: Logger\n) => {\n  if (Array.isArray(id)) {\n    return new OnboardingError(\n      MachineError.READ,\n      msg,\n      Category.POSTGRES,\n      log,\n      [],\n      {\n        operation: 'GET KIDSLOOP IDS',\n        targetEntity,\n        targetEntityIds: id.join(', '),\n      }\n    );\n  }\n  return new OnboardingError(\n    MachineError.READ,\n    msg,\n    Category.POSTGRES,\n    log,\n    [],\n    {\n      operation: 'GET KIDSLOOP ID',\n      targetEntity,\n      targetEntityId: id,\n    }\n  );\n};\n\nexport function tryGetMember<T>(\n  e: T | undefined,\n  log: Logger,\n  path: string[] = []\n): T {\n  if (e === undefined)\n    throw new OnboardingError(\n      MachineError.VALIDATION,\n      `Expected to find data however it was undefined`,\n      Category.REQUEST,\n      log,\n      path\n    );\n  return e;\n}\n\nexport const returnMessageOrThrowOnboardingError = (e: unknown): string => {\n  if (e instanceof OnboardingError || e instanceof Errors) throw e;\n  return e instanceof Error ? e.message : `${e}`;\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c8e674f971fecb630ef418c6190bcb3381f198c6"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/protos/index.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/protos/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":126}},"10":{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},"11":{"start":{"line":10,"column":95},"end":{"line":10,"column":126}},"12":{"start":{"line":12,"column":0},"end":{"line":12,"column":62}},"13":{"start":{"line":13,"column":0},"end":{"line":13,"column":48}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":43}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":43}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":50},"end":{"line":9,"column":51}},"loc":{"start":{"line":9,"column":71},"end":{"line":11,"column":1}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"type":"binary-expr","locations":[{"start":{"line":9,"column":20},"end":{"line":9,"column":24}},{"start":{"line":9,"column":28},"end":{"line":9,"column":45}},{"start":{"line":9,"column":50},"end":{"line":11,"column":1}}],"line":9},"5":{"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},"type":"if","locations":[{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},{"start":{"line":10,"column":21},"end":{"line":10,"column":126}}],"line":10},"6":{"loc":{"start":{"line":10,"column":25},"end":{"line":10,"column":93}},"type":"binary-expr","locations":[{"start":{"line":10,"column":25},"end":{"line":10,"column":40}},{"start":{"line":10,"column":44},"end":{"line":10,"column":93}}],"line":10}},"s":{"0":1,"1":25,"2":25,"3":25,"4":454,"5":0,"6":0,"7":0,"8":1,"9":3,"10":25,"11":25,"12":1,"13":1,"14":1,"15":1},"f":{"0":25,"1":454,"2":0,"3":3},"b":{"0":[1,1,1],"1":[1,0],"2":[25,0],"3":[0,0],"4":[1,1,1],"5":[25,0],"6":[25,25]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/protos/index.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/protos/index.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,gDAA8B;AAC9B,2CAAyB;AACzB,2CAAyB","sourcesContent":["export * from './api_grpc_pb';\nexport * from './api_pb';\nexport * from './job_pb';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e95474903c77f4665bb39d30aa4e972eff9dae6f"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/protos/api_grpc_pb.js":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/protos/api_grpc_pb.js","statementMap":{"0":{"start":{"line":4,"column":11},"end":{"line":4,"column":35}},"1":{"start":{"line":5,"column":13},"end":{"line":5,"column":35}},"2":{"start":{"line":8,"column":2},"end":{"line":10,"column":3}},"3":{"start":{"line":9,"column":4},"end":{"line":9,"column":84}},"4":{"start":{"line":11,"column":2},"end":{"line":11,"column":44}},"5":{"start":{"line":15,"column":2},"end":{"line":15,"column":78}},"6":{"start":{"line":19,"column":2},"end":{"line":21,"column":3}},"7":{"start":{"line":20,"column":4},"end":{"line":20,"column":77}},"8":{"start":{"line":22,"column":2},"end":{"line":22,"column":44}},"9":{"start":{"line":26,"column":2},"end":{"line":26,"column":71}},"10":{"start":{"line":30,"column":2},"end":{"line":32,"column":3}},"11":{"start":{"line":31,"column":4},"end":{"line":31,"column":78}},"12":{"start":{"line":33,"column":2},"end":{"line":33,"column":44}},"13":{"start":{"line":37,"column":2},"end":{"line":37,"column":72}},"14":{"start":{"line":41,"column":24},"end":{"line":64,"column":1}},"15":{"start":{"line":66,"column":0},"end":{"line":66,"column":80}}},"fnMap":{"0":{"name":"serialize_cil_onboarding_api_BatchOnboarding","decl":{"start":{"line":7,"column":9},"end":{"line":7,"column":53}},"loc":{"start":{"line":7,"column":59},"end":{"line":12,"column":1}},"line":7},"1":{"name":"deserialize_cil_onboarding_api_BatchOnboarding","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":55}},"loc":{"start":{"line":14,"column":68},"end":{"line":16,"column":1}},"line":14},"2":{"name":"serialize_cil_onboarding_api_Response","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":46}},"loc":{"start":{"line":18,"column":52},"end":{"line":23,"column":1}},"line":18},"3":{"name":"deserialize_cil_onboarding_api_Response","decl":{"start":{"line":25,"column":9},"end":{"line":25,"column":48}},"loc":{"start":{"line":25,"column":61},"end":{"line":27,"column":1}},"line":25},"4":{"name":"serialize_cil_onboarding_api_Responses","decl":{"start":{"line":29,"column":9},"end":{"line":29,"column":47}},"loc":{"start":{"line":29,"column":53},"end":{"line":34,"column":1}},"line":29},"5":{"name":"deserialize_cil_onboarding_api_Responses","decl":{"start":{"line":36,"column":9},"end":{"line":36,"column":49}},"loc":{"start":{"line":36,"column":62},"end":{"line":38,"column":1}},"line":36}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":2},"end":{"line":10,"column":3}},"type":"if","locations":[{"start":{"line":8,"column":2},"end":{"line":10,"column":3}},{"start":{"line":8,"column":2},"end":{"line":10,"column":3}}],"line":8},"1":{"loc":{"start":{"line":19,"column":2},"end":{"line":21,"column":3}},"type":"if","locations":[{"start":{"line":19,"column":2},"end":{"line":21,"column":3}},{"start":{"line":19,"column":2},"end":{"line":21,"column":3}}],"line":19},"2":{"loc":{"start":{"line":30,"column":2},"end":{"line":32,"column":3}},"type":"if","locations":[{"start":{"line":30,"column":2},"end":{"line":32,"column":3}},{"start":{"line":30,"column":2},"end":{"line":32,"column":3}}],"line":30}},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"75410ccd881d1ed2183bce7de2ef8a0fcea68294"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/protos/api_pb.js":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/protos/api_pb.js","statementMap":{"0":{"start":{"line":14,"column":11},"end":{"line":14,"column":37}},"1":{"start":{"line":15,"column":11},"end":{"line":15,"column":15}},"2":{"start":{"line":16,"column":13},"end":{"line":16,"column":38}},"3":{"start":{"line":18,"column":0},"end":{"line":18,"column":67}},"4":{"start":{"line":19,"column":0},"end":{"line":19,"column":76}},"5":{"start":{"line":20,"column":0},"end":{"line":20,"column":66}},"6":{"start":{"line":21,"column":0},"end":{"line":21,"column":75}},"7":{"start":{"line":22,"column":0},"end":{"line":22,"column":67}},"8":{"start":{"line":23,"column":0},"end":{"line":23,"column":85}},"9":{"start":{"line":24,"column":0},"end":{"line":24,"column":84}},"10":{"start":{"line":25,"column":0},"end":{"line":25,"column":66}},"11":{"start":{"line":26,"column":0},"end":{"line":26,"column":80}},"12":{"start":{"line":27,"column":0},"end":{"line":27,"column":67}},"13":{"start":{"line":28,"column":0},"end":{"line":28,"column":80}},"14":{"start":{"line":29,"column":0},"end":{"line":29,"column":80}},"15":{"start":{"line":30,"column":0},"end":{"line":30,"column":73}},"16":{"start":{"line":31,"column":0},"end":{"line":31,"column":84}},"17":{"start":{"line":32,"column":0},"end":{"line":32,"column":78}},"18":{"start":{"line":33,"column":0},"end":{"line":33,"column":90}},"19":{"start":{"line":34,"column":0},"end":{"line":34,"column":73}},"20":{"start":{"line":35,"column":0},"end":{"line":35,"column":75}},"21":{"start":{"line":36,"column":0},"end":{"line":36,"column":69}},"22":{"start":{"line":37,"column":0},"end":{"line":37,"column":70}},"23":{"start":{"line":38,"column":0},"end":{"line":38,"column":67}},"24":{"start":{"line":39,"column":0},"end":{"line":39,"column":65}},"25":{"start":{"line":40,"column":0},"end":{"line":40,"column":76}},"26":{"start":{"line":51,"column":0},"end":{"line":53,"column":2}},"27":{"start":{"line":52,"column":2},"end":{"line":52,"column":61}},"28":{"start":{"line":54,"column":0},"end":{"line":54,"column":67}},"29":{"start":{"line":55,"column":0},"end":{"line":61,"column":1}},"30":{"start":{"line":60,"column":2},"end":{"line":60,"column":94}},"31":{"start":{"line":72,"column":0},"end":{"line":74,"column":2}},"32":{"start":{"line":73,"column":2},"end":{"line":73,"column":61}},"33":{"start":{"line":75,"column":0},"end":{"line":75,"column":61}},"34":{"start":{"line":76,"column":0},"end":{"line":82,"column":1}},"35":{"start":{"line":81,"column":2},"end":{"line":81,"column":82}},"36":{"start":{"line":93,"column":0},"end":{"line":95,"column":2}},"37":{"start":{"line":94,"column":2},"end":{"line":94,"column":61}},"38":{"start":{"line":96,"column":0},"end":{"line":96,"column":60}},"39":{"start":{"line":97,"column":0},"end":{"line":103,"column":1}},"40":{"start":{"line":102,"column":2},"end":{"line":102,"column":80}},"41":{"start":{"line":114,"column":0},"end":{"line":116,"column":2}},"42":{"start":{"line":115,"column":2},"end":{"line":115,"column":61}},"43":{"start":{"line":117,"column":0},"end":{"line":117,"column":59}},"44":{"start":{"line":118,"column":0},"end":{"line":124,"column":1}},"45":{"start":{"line":123,"column":2},"end":{"line":123,"column":78}},"46":{"start":{"line":135,"column":0},"end":{"line":137,"column":2}},"47":{"start":{"line":136,"column":2},"end":{"line":136,"column":112}},"48":{"start":{"line":138,"column":0},"end":{"line":138,"column":69}},"49":{"start":{"line":139,"column":0},"end":{"line":145,"column":1}},"50":{"start":{"line":144,"column":2},"end":{"line":144,"column":98}},"51":{"start":{"line":156,"column":0},"end":{"line":158,"column":2}},"52":{"start":{"line":157,"column":2},"end":{"line":157,"column":107}},"53":{"start":{"line":159,"column":0},"end":{"line":159,"column":67}},"54":{"start":{"line":160,"column":0},"end":{"line":166,"column":1}},"55":{"start":{"line":165,"column":2},"end":{"line":165,"column":94}},"56":{"start":{"line":177,"column":0},"end":{"line":179,"column":2}},"57":{"start":{"line":178,"column":2},"end":{"line":178,"column":112}},"58":{"start":{"line":180,"column":0},"end":{"line":180,"column":72}},"59":{"start":{"line":181,"column":0},"end":{"line":187,"column":1}},"60":{"start":{"line":186,"column":2},"end":{"line":186,"column":104}},"61":{"start":{"line":198,"column":0},"end":{"line":200,"column":2}},"62":{"start":{"line":199,"column":2},"end":{"line":199,"column":113}},"63":{"start":{"line":201,"column":0},"end":{"line":201,"column":70}},"64":{"start":{"line":202,"column":0},"end":{"line":208,"column":1}},"65":{"start":{"line":207,"column":2},"end":{"line":207,"column":100}},"66":{"start":{"line":219,"column":0},"end":{"line":221,"column":2}},"67":{"start":{"line":220,"column":2},"end":{"line":220,"column":107}},"68":{"start":{"line":222,"column":0},"end":{"line":222,"column":64}},"69":{"start":{"line":223,"column":0},"end":{"line":229,"column":1}},"70":{"start":{"line":228,"column":2},"end":{"line":228,"column":88}},"71":{"start":{"line":240,"column":0},"end":{"line":242,"column":2}},"72":{"start":{"line":241,"column":2},"end":{"line":241,"column":61}},"73":{"start":{"line":243,"column":0},"end":{"line":243,"column":63}},"74":{"start":{"line":244,"column":0},"end":{"line":250,"column":1}},"75":{"start":{"line":249,"column":2},"end":{"line":249,"column":86}},"76":{"start":{"line":261,"column":0},"end":{"line":263,"column":2}},"77":{"start":{"line":262,"column":2},"end":{"line":262,"column":100}},"78":{"start":{"line":264,"column":0},"end":{"line":264,"column":60}},"79":{"start":{"line":265,"column":0},"end":{"line":271,"column":1}},"80":{"start":{"line":270,"column":2},"end":{"line":270,"column":80}},"81":{"start":{"line":282,"column":0},"end":{"line":284,"column":2}},"82":{"start":{"line":283,"column":2},"end":{"line":283,"column":113}},"83":{"start":{"line":285,"column":0},"end":{"line":285,"column":70}},"84":{"start":{"line":286,"column":0},"end":{"line":292,"column":1}},"85":{"start":{"line":291,"column":2},"end":{"line":291,"column":100}},"86":{"start":{"line":303,"column":0},"end":{"line":305,"column":2}},"87":{"start":{"line":304,"column":2},"end":{"line":304,"column":117}},"88":{"start":{"line":306,"column":0},"end":{"line":306,"column":74}},"89":{"start":{"line":307,"column":0},"end":{"line":313,"column":1}},"90":{"start":{"line":312,"column":2},"end":{"line":312,"column":108}},"91":{"start":{"line":324,"column":0},"end":{"line":326,"column":2}},"92":{"start":{"line":325,"column":2},"end":{"line":325,"column":122}},"93":{"start":{"line":327,"column":0},"end":{"line":327,"column":79}},"94":{"start":{"line":328,"column":0},"end":{"line":334,"column":1}},"95":{"start":{"line":333,"column":2},"end":{"line":333,"column":118}},"96":{"start":{"line":345,"column":0},"end":{"line":347,"column":2}},"97":{"start":{"line":346,"column":2},"end":{"line":346,"column":121}},"98":{"start":{"line":348,"column":0},"end":{"line":348,"column":78}},"99":{"start":{"line":349,"column":0},"end":{"line":355,"column":1}},"100":{"start":{"line":354,"column":2},"end":{"line":354,"column":116}},"101":{"start":{"line":366,"column":0},"end":{"line":368,"column":2}},"102":{"start":{"line":367,"column":2},"end":{"line":367,"column":117}},"103":{"start":{"line":369,"column":0},"end":{"line":369,"column":74}},"104":{"start":{"line":370,"column":0},"end":{"line":376,"column":1}},"105":{"start":{"line":375,"column":2},"end":{"line":375,"column":108}},"106":{"start":{"line":387,"column":0},"end":{"line":389,"column":2}},"107":{"start":{"line":388,"column":2},"end":{"line":388,"column":112}},"108":{"start":{"line":390,"column":0},"end":{"line":390,"column":69}},"109":{"start":{"line":391,"column":0},"end":{"line":397,"column":1}},"110":{"start":{"line":396,"column":2},"end":{"line":396,"column":98}},"111":{"start":{"line":401,"column":0},"end":{"line":439,"column":1}},"112":{"start":{"line":414,"column":0},"end":{"line":416,"column":2}},"113":{"start":{"line":415,"column":2},"end":{"line":415,"column":83}},"114":{"start":{"line":428,"column":0},"end":{"line":438,"column":2}},"115":{"start":{"line":429,"column":15},"end":{"line":432,"column":3}},"116":{"start":{"line":434,"column":2},"end":{"line":436,"column":3}},"117":{"start":{"line":435,"column":4},"end":{"line":435,"column":35}},"118":{"start":{"line":437,"column":2},"end":{"line":437,"column":13}},"119":{"start":{"line":447,"column":0},"end":{"line":451,"column":2}},"120":{"start":{"line":448,"column":15},"end":{"line":448,"column":43}},"121":{"start":{"line":449,"column":12},"end":{"line":449,"column":53}},"122":{"start":{"line":450,"column":2},"end":{"line":450,"column":88}},"123":{"start":{"line":461,"column":0},"end":{"line":482,"column":2}},"124":{"start":{"line":462,"column":2},"end":{"line":480,"column":3}},"125":{"start":{"line":463,"column":4},"end":{"line":465,"column":5}},"126":{"start":{"line":464,"column":6},"end":{"line":464,"column":12}},"127":{"start":{"line":466,"column":16},"end":{"line":466,"column":39}},"128":{"start":{"line":467,"column":4},"end":{"line":479,"column":5}},"129":{"start":{"line":469,"column":41},"end":{"line":469,"column":60}},"130":{"start":{"line":470,"column":6},"end":{"line":470,"column":33}},"131":{"start":{"line":471,"column":6},"end":{"line":471,"column":12}},"132":{"start":{"line":473,"column":41},"end":{"line":473,"column":60}},"133":{"start":{"line":474,"column":6},"end":{"line":474,"column":25}},"134":{"start":{"line":475,"column":6},"end":{"line":475,"column":12}},"135":{"start":{"line":477,"column":6},"end":{"line":477,"column":25}},"136":{"start":{"line":478,"column":6},"end":{"line":478,"column":12}},"137":{"start":{"line":481,"column":2},"end":{"line":481,"column":13}},"138":{"start":{"line":489,"column":0},"end":{"line":493,"column":2}},"139":{"start":{"line":490,"column":15},"end":{"line":490,"column":38}},"140":{"start":{"line":491,"column":2},"end":{"line":491,"column":78}},"141":{"start":{"line":492,"column":2},"end":{"line":492,"column":34}},"142":{"start":{"line":503,"column":0},"end":{"line":519,"column":2}},"143":{"start":{"line":504,"column":10},"end":{"line":504,"column":19}},"144":{"start":{"line":505,"column":2},"end":{"line":505,"column":32}},"145":{"start":{"line":506,"column":2},"end":{"line":511,"column":3}},"146":{"start":{"line":507,"column":4},"end":{"line":510,"column":6}},"147":{"start":{"line":512,"column":2},"end":{"line":512,"column":24}},"148":{"start":{"line":513,"column":2},"end":{"line":518,"column":3}},"149":{"start":{"line":514,"column":4},"end":{"line":517,"column":6}},"150":{"start":{"line":526,"column":0},"end":{"line":528,"column":2}},"151":{"start":{"line":527,"column":2},"end":{"line":527,"column":79}},"152":{"start":{"line":535,"column":0},"end":{"line":537,"column":2}},"153":{"start":{"line":536,"column":2},"end":{"line":536,"column":59}},"154":{"start":{"line":544,"column":0},"end":{"line":546,"column":2}},"155":{"start":{"line":545,"column":2},"end":{"line":545,"column":79}},"156":{"start":{"line":553,"column":0},"end":{"line":555,"column":2}},"157":{"start":{"line":554,"column":2},"end":{"line":554,"column":59}},"158":{"start":{"line":561,"column":0},"end":{"line":601,"column":1}},"159":{"start":{"line":574,"column":0},"end":{"line":576,"column":2}},"160":{"start":{"line":575,"column":2},"end":{"line":575,"column":77}},"161":{"start":{"line":588,"column":0},"end":{"line":600,"column":2}},"162":{"start":{"line":589,"column":15},"end":{"line":594,"column":3}},"163":{"start":{"line":596,"column":2},"end":{"line":598,"column":3}},"164":{"start":{"line":597,"column":4},"end":{"line":597,"column":35}},"165":{"start":{"line":599,"column":2},"end":{"line":599,"column":13}},"166":{"start":{"line":609,"column":0},"end":{"line":613,"column":2}},"167":{"start":{"line":610,"column":15},"end":{"line":610,"column":43}},"168":{"start":{"line":611,"column":12},"end":{"line":611,"column":47}},"169":{"start":{"line":612,"column":2},"end":{"line":612,"column":82}},"170":{"start":{"line":623,"column":0},"end":{"line":652,"column":2}},"171":{"start":{"line":624,"column":2},"end":{"line":650,"column":3}},"172":{"start":{"line":625,"column":4},"end":{"line":627,"column":5}},"173":{"start":{"line":626,"column":6},"end":{"line":626,"column":12}},"174":{"start":{"line":628,"column":16},"end":{"line":628,"column":39}},"175":{"start":{"line":629,"column":4},"end":{"line":649,"column":5}},"176":{"start":{"line":631,"column":41},"end":{"line":631,"column":60}},"177":{"start":{"line":632,"column":6},"end":{"line":632,"column":33}},"178":{"start":{"line":633,"column":6},"end":{"line":633,"column":12}},"179":{"start":{"line":635,"column":41},"end":{"line":635,"column":60}},"180":{"start":{"line":636,"column":6},"end":{"line":636,"column":45}},"181":{"start":{"line":637,"column":6},"end":{"line":637,"column":12}},"182":{"start":{"line":639,"column":41},"end":{"line":639,"column":60}},"183":{"start":{"line":640,"column":6},"end":{"line":640,"column":25}},"184":{"start":{"line":641,"column":6},"end":{"line":641,"column":12}},"185":{"start":{"line":643,"column":41},"end":{"line":643,"column":60}},"186":{"start":{"line":644,"column":6},"end":{"line":644,"column":30}},"187":{"start":{"line":645,"column":6},"end":{"line":645,"column":12}},"188":{"start":{"line":647,"column":6},"end":{"line":647,"column":25}},"189":{"start":{"line":648,"column":6},"end":{"line":648,"column":12}},"190":{"start":{"line":651,"column":2},"end":{"line":651,"column":13}},"191":{"start":{"line":659,"column":0},"end":{"line":663,"column":2}},"192":{"start":{"line":660,"column":15},"end":{"line":660,"column":38}},"193":{"start":{"line":661,"column":2},"end":{"line":661,"column":72}},"194":{"start":{"line":662,"column":2},"end":{"line":662,"column":34}},"195":{"start":{"line":673,"column":0},"end":{"line":703,"column":2}},"196":{"start":{"line":674,"column":10},"end":{"line":674,"column":19}},"197":{"start":{"line":675,"column":2},"end":{"line":675,"column":32}},"198":{"start":{"line":676,"column":2},"end":{"line":681,"column":3}},"199":{"start":{"line":677,"column":4},"end":{"line":680,"column":6}},"200":{"start":{"line":682,"column":2},"end":{"line":682,"column":44}},"201":{"start":{"line":683,"column":2},"end":{"line":688,"column":3}},"202":{"start":{"line":684,"column":4},"end":{"line":687,"column":6}},"203":{"start":{"line":689,"column":2},"end":{"line":689,"column":24}},"204":{"start":{"line":690,"column":2},"end":{"line":695,"column":3}},"205":{"start":{"line":691,"column":4},"end":{"line":694,"column":6}},"206":{"start":{"line":696,"column":2},"end":{"line":696,"column":29}},"207":{"start":{"line":697,"column":2},"end":{"line":702,"column":3}},"208":{"start":{"line":698,"column":4},"end":{"line":701,"column":6}},"209":{"start":{"line":710,"column":0},"end":{"line":712,"column":2}},"210":{"start":{"line":711,"column":2},"end":{"line":711,"column":79}},"211":{"start":{"line":719,"column":0},"end":{"line":721,"column":2}},"212":{"start":{"line":720,"column":2},"end":{"line":720,"column":59}},"213":{"start":{"line":728,"column":0},"end":{"line":730,"column":2}},"214":{"start":{"line":729,"column":2},"end":{"line":729,"column":79}},"215":{"start":{"line":737,"column":0},"end":{"line":739,"column":2}},"216":{"start":{"line":738,"column":2},"end":{"line":738,"column":59}},"217":{"start":{"line":746,"column":0},"end":{"line":748,"column":2}},"218":{"start":{"line":747,"column":2},"end":{"line":747,"column":79}},"219":{"start":{"line":755,"column":0},"end":{"line":757,"column":2}},"220":{"start":{"line":756,"column":2},"end":{"line":756,"column":59}},"221":{"start":{"line":764,"column":0},"end":{"line":766,"column":2}},"222":{"start":{"line":765,"column":2},"end":{"line":765,"column":79}},"223":{"start":{"line":773,"column":0},"end":{"line":775,"column":2}},"224":{"start":{"line":774,"column":2},"end":{"line":774,"column":59}},"225":{"start":{"line":781,"column":0},"end":{"line":821,"column":1}},"226":{"start":{"line":794,"column":0},"end":{"line":796,"column":2}},"227":{"start":{"line":795,"column":2},"end":{"line":795,"column":76}},"228":{"start":{"line":808,"column":0},"end":{"line":820,"column":2}},"229":{"start":{"line":809,"column":15},"end":{"line":814,"column":3}},"230":{"start":{"line":816,"column":2},"end":{"line":818,"column":3}},"231":{"start":{"line":817,"column":4},"end":{"line":817,"column":35}},"232":{"start":{"line":819,"column":2},"end":{"line":819,"column":13}},"233":{"start":{"line":829,"column":0},"end":{"line":833,"column":2}},"234":{"start":{"line":830,"column":15},"end":{"line":830,"column":43}},"235":{"start":{"line":831,"column":12},"end":{"line":831,"column":46}},"236":{"start":{"line":832,"column":2},"end":{"line":832,"column":81}},"237":{"start":{"line":843,"column":0},"end":{"line":872,"column":2}},"238":{"start":{"line":844,"column":2},"end":{"line":870,"column":3}},"239":{"start":{"line":845,"column":4},"end":{"line":847,"column":5}},"240":{"start":{"line":846,"column":6},"end":{"line":846,"column":12}},"241":{"start":{"line":848,"column":16},"end":{"line":848,"column":39}},"242":{"start":{"line":849,"column":4},"end":{"line":869,"column":5}},"243":{"start":{"line":851,"column":41},"end":{"line":851,"column":60}},"244":{"start":{"line":852,"column":6},"end":{"line":852,"column":33}},"245":{"start":{"line":853,"column":6},"end":{"line":853,"column":12}},"246":{"start":{"line":855,"column":41},"end":{"line":855,"column":60}},"247":{"start":{"line":856,"column":6},"end":{"line":856,"column":45}},"248":{"start":{"line":857,"column":6},"end":{"line":857,"column":12}},"249":{"start":{"line":859,"column":41},"end":{"line":859,"column":60}},"250":{"start":{"line":860,"column":6},"end":{"line":860,"column":25}},"251":{"start":{"line":861,"column":6},"end":{"line":861,"column":12}},"252":{"start":{"line":863,"column":41},"end":{"line":863,"column":60}},"253":{"start":{"line":864,"column":6},"end":{"line":864,"column":39}},"254":{"start":{"line":865,"column":6},"end":{"line":865,"column":12}},"255":{"start":{"line":867,"column":6},"end":{"line":867,"column":25}},"256":{"start":{"line":868,"column":6},"end":{"line":868,"column":12}},"257":{"start":{"line":871,"column":2},"end":{"line":871,"column":13}},"258":{"start":{"line":879,"column":0},"end":{"line":883,"column":2}},"259":{"start":{"line":880,"column":15},"end":{"line":880,"column":38}},"260":{"start":{"line":881,"column":2},"end":{"line":881,"column":71}},"261":{"start":{"line":882,"column":2},"end":{"line":882,"column":34}},"262":{"start":{"line":893,"column":0},"end":{"line":923,"column":2}},"263":{"start":{"line":894,"column":10},"end":{"line":894,"column":19}},"264":{"start":{"line":895,"column":2},"end":{"line":895,"column":32}},"265":{"start":{"line":896,"column":2},"end":{"line":901,"column":3}},"266":{"start":{"line":897,"column":4},"end":{"line":900,"column":6}},"267":{"start":{"line":902,"column":2},"end":{"line":902,"column":44}},"268":{"start":{"line":903,"column":2},"end":{"line":908,"column":3}},"269":{"start":{"line":904,"column":4},"end":{"line":907,"column":6}},"270":{"start":{"line":909,"column":2},"end":{"line":909,"column":24}},"271":{"start":{"line":910,"column":2},"end":{"line":915,"column":3}},"272":{"start":{"line":911,"column":4},"end":{"line":914,"column":6}},"273":{"start":{"line":916,"column":2},"end":{"line":916,"column":38}},"274":{"start":{"line":917,"column":2},"end":{"line":922,"column":3}},"275":{"start":{"line":918,"column":4},"end":{"line":921,"column":6}},"276":{"start":{"line":930,"column":0},"end":{"line":932,"column":2}},"277":{"start":{"line":931,"column":2},"end":{"line":931,"column":79}},"278":{"start":{"line":939,"column":0},"end":{"line":941,"column":2}},"279":{"start":{"line":940,"column":2},"end":{"line":940,"column":59}},"280":{"start":{"line":948,"column":0},"end":{"line":950,"column":2}},"281":{"start":{"line":949,"column":2},"end":{"line":949,"column":79}},"282":{"start":{"line":957,"column":0},"end":{"line":959,"column":2}},"283":{"start":{"line":958,"column":2},"end":{"line":958,"column":59}},"284":{"start":{"line":966,"column":0},"end":{"line":968,"column":2}},"285":{"start":{"line":967,"column":2},"end":{"line":967,"column":79}},"286":{"start":{"line":975,"column":0},"end":{"line":977,"column":2}},"287":{"start":{"line":976,"column":2},"end":{"line":976,"column":59}},"288":{"start":{"line":984,"column":0},"end":{"line":986,"column":2}},"289":{"start":{"line":985,"column":2},"end":{"line":985,"column":79}},"290":{"start":{"line":993,"column":0},"end":{"line":995,"column":2}},"291":{"start":{"line":994,"column":2},"end":{"line":994,"column":59}},"292":{"start":{"line":1001,"column":0},"end":{"line":1047,"column":1}},"293":{"start":{"line":1014,"column":0},"end":{"line":1016,"column":2}},"294":{"start":{"line":1015,"column":2},"end":{"line":1015,"column":75}},"295":{"start":{"line":1028,"column":0},"end":{"line":1046,"column":2}},"296":{"start":{"line":1029,"column":15},"end":{"line":1040,"column":3}},"297":{"start":{"line":1042,"column":2},"end":{"line":1044,"column":3}},"298":{"start":{"line":1043,"column":4},"end":{"line":1043,"column":35}},"299":{"start":{"line":1045,"column":2},"end":{"line":1045,"column":13}},"300":{"start":{"line":1055,"column":0},"end":{"line":1059,"column":2}},"301":{"start":{"line":1056,"column":15},"end":{"line":1056,"column":43}},"302":{"start":{"line":1057,"column":12},"end":{"line":1057,"column":45}},"303":{"start":{"line":1058,"column":2},"end":{"line":1058,"column":80}},"304":{"start":{"line":1069,"column":0},"end":{"line":1122,"column":2}},"305":{"start":{"line":1070,"column":2},"end":{"line":1120,"column":3}},"306":{"start":{"line":1071,"column":4},"end":{"line":1073,"column":5}},"307":{"start":{"line":1072,"column":6},"end":{"line":1072,"column":12}},"308":{"start":{"line":1074,"column":16},"end":{"line":1074,"column":39}},"309":{"start":{"line":1075,"column":4},"end":{"line":1119,"column":5}},"310":{"start":{"line":1077,"column":41},"end":{"line":1077,"column":60}},"311":{"start":{"line":1078,"column":6},"end":{"line":1078,"column":33}},"312":{"start":{"line":1079,"column":6},"end":{"line":1079,"column":12}},"313":{"start":{"line":1081,"column":41},"end":{"line":1081,"column":60}},"314":{"start":{"line":1082,"column":6},"end":{"line":1082,"column":45}},"315":{"start":{"line":1083,"column":6},"end":{"line":1083,"column":12}},"316":{"start":{"line":1085,"column":41},"end":{"line":1085,"column":60}},"317":{"start":{"line":1086,"column":6},"end":{"line":1086,"column":39}},"318":{"start":{"line":1087,"column":6},"end":{"line":1087,"column":12}},"319":{"start":{"line":1089,"column":41},"end":{"line":1089,"column":60}},"320":{"start":{"line":1090,"column":6},"end":{"line":1090,"column":26}},"321":{"start":{"line":1091,"column":6},"end":{"line":1091,"column":12}},"322":{"start":{"line":1093,"column":41},"end":{"line":1093,"column":60}},"323":{"start":{"line":1094,"column":6},"end":{"line":1094,"column":26}},"324":{"start":{"line":1095,"column":6},"end":{"line":1095,"column":12}},"325":{"start":{"line":1097,"column":41},"end":{"line":1097,"column":60}},"326":{"start":{"line":1098,"column":6},"end":{"line":1098,"column":29}},"327":{"start":{"line":1099,"column":6},"end":{"line":1099,"column":12}},"328":{"start":{"line":1101,"column":41},"end":{"line":1101,"column":60}},"329":{"start":{"line":1102,"column":6},"end":{"line":1102,"column":30}},"330":{"start":{"line":1103,"column":6},"end":{"line":1103,"column":12}},"331":{"start":{"line":1105,"column":41},"end":{"line":1105,"column":60}},"332":{"start":{"line":1106,"column":6},"end":{"line":1106,"column":31}},"333":{"start":{"line":1107,"column":6},"end":{"line":1107,"column":12}},"334":{"start":{"line":1109,"column":67},"end":{"line":1109,"column":84}},"335":{"start":{"line":1110,"column":6},"end":{"line":1110,"column":27}},"336":{"start":{"line":1111,"column":6},"end":{"line":1111,"column":12}},"337":{"start":{"line":1113,"column":41},"end":{"line":1113,"column":60}},"338":{"start":{"line":1114,"column":6},"end":{"line":1114,"column":32}},"339":{"start":{"line":1115,"column":6},"end":{"line":1115,"column":12}},"340":{"start":{"line":1117,"column":6},"end":{"line":1117,"column":25}},"341":{"start":{"line":1118,"column":6},"end":{"line":1118,"column":12}},"342":{"start":{"line":1121,"column":2},"end":{"line":1121,"column":13}},"343":{"start":{"line":1129,"column":0},"end":{"line":1133,"column":2}},"344":{"start":{"line":1130,"column":15},"end":{"line":1130,"column":38}},"345":{"start":{"line":1131,"column":2},"end":{"line":1131,"column":70}},"346":{"start":{"line":1132,"column":2},"end":{"line":1132,"column":34}},"347":{"start":{"line":1143,"column":0},"end":{"line":1215,"column":2}},"348":{"start":{"line":1144,"column":10},"end":{"line":1144,"column":19}},"349":{"start":{"line":1145,"column":2},"end":{"line":1145,"column":32}},"350":{"start":{"line":1146,"column":2},"end":{"line":1151,"column":3}},"351":{"start":{"line":1147,"column":4},"end":{"line":1150,"column":6}},"352":{"start":{"line":1152,"column":2},"end":{"line":1152,"column":44}},"353":{"start":{"line":1153,"column":2},"end":{"line":1158,"column":3}},"354":{"start":{"line":1154,"column":4},"end":{"line":1157,"column":6}},"355":{"start":{"line":1159,"column":2},"end":{"line":1159,"column":38}},"356":{"start":{"line":1160,"column":2},"end":{"line":1165,"column":3}},"357":{"start":{"line":1161,"column":4},"end":{"line":1164,"column":6}},"358":{"start":{"line":1166,"column":2},"end":{"line":1166,"column":25}},"359":{"start":{"line":1167,"column":2},"end":{"line":1172,"column":3}},"360":{"start":{"line":1168,"column":4},"end":{"line":1171,"column":6}},"361":{"start":{"line":1173,"column":2},"end":{"line":1173,"column":25}},"362":{"start":{"line":1174,"column":2},"end":{"line":1179,"column":3}},"363":{"start":{"line":1175,"column":4},"end":{"line":1178,"column":6}},"364":{"start":{"line":1180,"column":2},"end":{"line":1180,"column":28}},"365":{"start":{"line":1181,"column":2},"end":{"line":1186,"column":3}},"366":{"start":{"line":1182,"column":4},"end":{"line":1185,"column":6}},"367":{"start":{"line":1187,"column":2},"end":{"line":1187,"column":29}},"368":{"start":{"line":1188,"column":2},"end":{"line":1193,"column":3}},"369":{"start":{"line":1189,"column":4},"end":{"line":1192,"column":6}},"370":{"start":{"line":1194,"column":2},"end":{"line":1194,"column":30}},"371":{"start":{"line":1195,"column":2},"end":{"line":1200,"column":3}},"372":{"start":{"line":1196,"column":4},"end":{"line":1199,"column":6}},"373":{"start":{"line":1201,"column":2},"end":{"line":1201,"column":26}},"374":{"start":{"line":1202,"column":2},"end":{"line":1207,"column":3}},"375":{"start":{"line":1203,"column":4},"end":{"line":1206,"column":6}},"376":{"start":{"line":1208,"column":2},"end":{"line":1208,"column":31}},"377":{"start":{"line":1209,"column":2},"end":{"line":1214,"column":3}},"378":{"start":{"line":1210,"column":4},"end":{"line":1213,"column":6}},"379":{"start":{"line":1222,"column":0},"end":{"line":1224,"column":2}},"380":{"start":{"line":1223,"column":2},"end":{"line":1223,"column":79}},"381":{"start":{"line":1231,"column":0},"end":{"line":1233,"column":2}},"382":{"start":{"line":1232,"column":2},"end":{"line":1232,"column":59}},"383":{"start":{"line":1240,"column":0},"end":{"line":1242,"column":2}},"384":{"start":{"line":1241,"column":2},"end":{"line":1241,"column":79}},"385":{"start":{"line":1249,"column":0},"end":{"line":1251,"column":2}},"386":{"start":{"line":1250,"column":2},"end":{"line":1250,"column":59}},"387":{"start":{"line":1258,"column":0},"end":{"line":1260,"column":2}},"388":{"start":{"line":1259,"column":2},"end":{"line":1259,"column":79}},"389":{"start":{"line":1267,"column":0},"end":{"line":1269,"column":2}},"390":{"start":{"line":1268,"column":2},"end":{"line":1268,"column":59}},"391":{"start":{"line":1276,"column":0},"end":{"line":1278,"column":2}},"392":{"start":{"line":1277,"column":2},"end":{"line":1277,"column":79}},"393":{"start":{"line":1285,"column":0},"end":{"line":1287,"column":2}},"394":{"start":{"line":1286,"column":2},"end":{"line":1286,"column":59}},"395":{"start":{"line":1294,"column":0},"end":{"line":1296,"column":2}},"396":{"start":{"line":1295,"column":2},"end":{"line":1295,"column":79}},"397":{"start":{"line":1303,"column":0},"end":{"line":1305,"column":2}},"398":{"start":{"line":1304,"column":2},"end":{"line":1304,"column":59}},"399":{"start":{"line":1312,"column":0},"end":{"line":1314,"column":2}},"400":{"start":{"line":1313,"column":2},"end":{"line":1313,"column":79}},"401":{"start":{"line":1321,"column":0},"end":{"line":1323,"column":2}},"402":{"start":{"line":1322,"column":2},"end":{"line":1322,"column":59}},"403":{"start":{"line":1330,"column":0},"end":{"line":1332,"column":2}},"404":{"start":{"line":1331,"column":2},"end":{"line":1331,"column":79}},"405":{"start":{"line":1339,"column":0},"end":{"line":1341,"column":2}},"406":{"start":{"line":1340,"column":2},"end":{"line":1340,"column":59}},"407":{"start":{"line":1348,"column":0},"end":{"line":1350,"column":2}},"408":{"start":{"line":1349,"column":2},"end":{"line":1349,"column":79}},"409":{"start":{"line":1357,"column":0},"end":{"line":1359,"column":2}},"410":{"start":{"line":1358,"column":2},"end":{"line":1358,"column":59}},"411":{"start":{"line":1366,"column":0},"end":{"line":1368,"column":2}},"412":{"start":{"line":1367,"column":2},"end":{"line":1367,"column":104}},"413":{"start":{"line":1375,"column":0},"end":{"line":1377,"column":2}},"414":{"start":{"line":1376,"column":2},"end":{"line":1376,"column":57}},"415":{"start":{"line":1384,"column":0},"end":{"line":1386,"column":2}},"416":{"start":{"line":1385,"column":2},"end":{"line":1385,"column":80}},"417":{"start":{"line":1393,"column":0},"end":{"line":1395,"column":2}},"418":{"start":{"line":1394,"column":2},"end":{"line":1394,"column":60}},"419":{"start":{"line":1404,"column":0},"end":{"line":1404,"column":62}},"420":{"start":{"line":1408,"column":0},"end":{"line":1446,"column":1}},"421":{"start":{"line":1421,"column":0},"end":{"line":1423,"column":2}},"422":{"start":{"line":1422,"column":2},"end":{"line":1422,"column":85}},"423":{"start":{"line":1435,"column":0},"end":{"line":1445,"column":2}},"424":{"start":{"line":1436,"column":15},"end":{"line":1439,"column":3}},"425":{"start":{"line":1441,"column":2},"end":{"line":1443,"column":3}},"426":{"start":{"line":1442,"column":4},"end":{"line":1442,"column":35}},"427":{"start":{"line":1444,"column":2},"end":{"line":1444,"column":13}},"428":{"start":{"line":1454,"column":0},"end":{"line":1458,"column":2}},"429":{"start":{"line":1455,"column":15},"end":{"line":1455,"column":43}},"430":{"start":{"line":1456,"column":12},"end":{"line":1456,"column":55}},"431":{"start":{"line":1457,"column":2},"end":{"line":1457,"column":90}},"432":{"start":{"line":1468,"column":0},"end":{"line":1489,"column":2}},"433":{"start":{"line":1469,"column":2},"end":{"line":1487,"column":3}},"434":{"start":{"line":1470,"column":4},"end":{"line":1472,"column":5}},"435":{"start":{"line":1471,"column":6},"end":{"line":1471,"column":12}},"436":{"start":{"line":1473,"column":16},"end":{"line":1473,"column":39}},"437":{"start":{"line":1474,"column":4},"end":{"line":1486,"column":5}},"438":{"start":{"line":1476,"column":67},"end":{"line":1476,"column":84}},"439":{"start":{"line":1477,"column":6},"end":{"line":1477,"column":27}},"440":{"start":{"line":1478,"column":6},"end":{"line":1478,"column":12}},"441":{"start":{"line":1480,"column":41},"end":{"line":1480,"column":60}},"442":{"start":{"line":1481,"column":6},"end":{"line":1481,"column":46}},"443":{"start":{"line":1482,"column":6},"end":{"line":1482,"column":12}},"444":{"start":{"line":1484,"column":6},"end":{"line":1484,"column":25}},"445":{"start":{"line":1485,"column":6},"end":{"line":1485,"column":12}},"446":{"start":{"line":1488,"column":2},"end":{"line":1488,"column":13}},"447":{"start":{"line":1496,"column":0},"end":{"line":1500,"column":2}},"448":{"start":{"line":1497,"column":15},"end":{"line":1497,"column":38}},"449":{"start":{"line":1498,"column":2},"end":{"line":1498,"column":80}},"450":{"start":{"line":1499,"column":2},"end":{"line":1499,"column":34}},"451":{"start":{"line":1510,"column":0},"end":{"line":1526,"column":2}},"452":{"start":{"line":1511,"column":10},"end":{"line":1511,"column":19}},"453":{"start":{"line":1512,"column":2},"end":{"line":1512,"column":26}},"454":{"start":{"line":1513,"column":2},"end":{"line":1518,"column":3}},"455":{"start":{"line":1514,"column":4},"end":{"line":1517,"column":6}},"456":{"start":{"line":1519,"column":2},"end":{"line":1519,"column":49}},"457":{"start":{"line":1520,"column":2},"end":{"line":1525,"column":3}},"458":{"start":{"line":1521,"column":4},"end":{"line":1524,"column":6}},"459":{"start":{"line":1533,"column":0},"end":{"line":1535,"column":2}},"460":{"start":{"line":1534,"column":2},"end":{"line":1534,"column":104}},"461":{"start":{"line":1542,"column":0},"end":{"line":1544,"column":2}},"462":{"start":{"line":1543,"column":2},"end":{"line":1543,"column":57}},"463":{"start":{"line":1551,"column":0},"end":{"line":1553,"column":2}},"464":{"start":{"line":1552,"column":2},"end":{"line":1552,"column":80}},"465":{"start":{"line":1560,"column":0},"end":{"line":1562,"column":2}},"466":{"start":{"line":1561,"column":2},"end":{"line":1561,"column":53}},"467":{"start":{"line":1570,"column":0},"end":{"line":1572,"column":2}},"468":{"start":{"line":1571,"column":2},"end":{"line":1571,"column":68}},"469":{"start":{"line":1579,"column":0},"end":{"line":1581,"column":2}},"470":{"start":{"line":1580,"column":2},"end":{"line":1580,"column":51}},"471":{"start":{"line":1593,"column":0},"end":{"line":1593,"column":65}},"472":{"start":{"line":1598,"column":0},"end":{"line":1604,"column":2}},"473":{"start":{"line":1609,"column":0},"end":{"line":1611,"column":2}},"474":{"start":{"line":1610,"column":2},"end":{"line":1610,"column":165}},"475":{"start":{"line":1615,"column":0},"end":{"line":1657,"column":1}},"476":{"start":{"line":1628,"column":0},"end":{"line":1630,"column":2}},"477":{"start":{"line":1629,"column":2},"end":{"line":1629,"column":83}},"478":{"start":{"line":1642,"column":0},"end":{"line":1656,"column":2}},"479":{"start":{"line":1643,"column":15},"end":{"line":1650,"column":3}},"480":{"start":{"line":1652,"column":2},"end":{"line":1654,"column":3}},"481":{"start":{"line":1653,"column":4},"end":{"line":1653,"column":35}},"482":{"start":{"line":1655,"column":2},"end":{"line":1655,"column":13}},"483":{"start":{"line":1665,"column":0},"end":{"line":1669,"column":2}},"484":{"start":{"line":1666,"column":15},"end":{"line":1666,"column":43}},"485":{"start":{"line":1667,"column":12},"end":{"line":1667,"column":53}},"486":{"start":{"line":1668,"column":2},"end":{"line":1668,"column":88}},"487":{"start":{"line":1679,"column":0},"end":{"line":1721,"column":2}},"488":{"start":{"line":1680,"column":2},"end":{"line":1719,"column":3}},"489":{"start":{"line":1681,"column":4},"end":{"line":1683,"column":5}},"490":{"start":{"line":1682,"column":6},"end":{"line":1682,"column":12}},"491":{"start":{"line":1684,"column":16},"end":{"line":1684,"column":39}},"492":{"start":{"line":1685,"column":4},"end":{"line":1718,"column":5}},"493":{"start":{"line":1687,"column":41},"end":{"line":1687,"column":60}},"494":{"start":{"line":1688,"column":6},"end":{"line":1688,"column":45}},"495":{"start":{"line":1689,"column":6},"end":{"line":1689,"column":12}},"496":{"start":{"line":1691,"column":18},"end":{"line":1691,"column":59}},"497":{"start":{"line":1692,"column":6},"end":{"line":1692,"column":98}},"498":{"start":{"line":1693,"column":6},"end":{"line":1693,"column":33}},"499":{"start":{"line":1694,"column":6},"end":{"line":1694,"column":12}},"500":{"start":{"line":1696,"column":18},"end":{"line":1696,"column":53}},"501":{"start":{"line":1697,"column":6},"end":{"line":1697,"column":92}},"502":{"start":{"line":1698,"column":6},"end":{"line":1698,"column":27}},"503":{"start":{"line":1699,"column":6},"end":{"line":1699,"column":12}},"504":{"start":{"line":1701,"column":18},"end":{"line":1701,"column":52}},"505":{"start":{"line":1702,"column":6},"end":{"line":1702,"column":91}},"506":{"start":{"line":1703,"column":6},"end":{"line":1703,"column":26}},"507":{"start":{"line":1704,"column":6},"end":{"line":1704,"column":12}},"508":{"start":{"line":1706,"column":18},"end":{"line":1706,"column":51}},"509":{"start":{"line":1707,"column":6},"end":{"line":1707,"column":90}},"510":{"start":{"line":1708,"column":6},"end":{"line":1708,"column":25}},"511":{"start":{"line":1709,"column":6},"end":{"line":1709,"column":12}},"512":{"start":{"line":1711,"column":18},"end":{"line":1711,"column":61}},"513":{"start":{"line":1712,"column":6},"end":{"line":1712,"column":100}},"514":{"start":{"line":1713,"column":6},"end":{"line":1713,"column":29}},"515":{"start":{"line":1714,"column":6},"end":{"line":1714,"column":12}},"516":{"start":{"line":1716,"column":6},"end":{"line":1716,"column":25}},"517":{"start":{"line":1717,"column":6},"end":{"line":1717,"column":12}},"518":{"start":{"line":1720,"column":2},"end":{"line":1720,"column":13}},"519":{"start":{"line":1728,"column":0},"end":{"line":1732,"column":2}},"520":{"start":{"line":1729,"column":15},"end":{"line":1729,"column":38}},"521":{"start":{"line":1730,"column":2},"end":{"line":1730,"column":78}},"522":{"start":{"line":1731,"column":2},"end":{"line":1731,"column":34}},"523":{"start":{"line":1742,"column":0},"end":{"line":1791,"column":2}},"524":{"start":{"line":1743,"column":10},"end":{"line":1743,"column":19}},"525":{"start":{"line":1744,"column":2},"end":{"line":1744,"column":44}},"526":{"start":{"line":1745,"column":2},"end":{"line":1750,"column":3}},"527":{"start":{"line":1746,"column":4},"end":{"line":1749,"column":6}},"528":{"start":{"line":1751,"column":2},"end":{"line":1751,"column":32}},"529":{"start":{"line":1752,"column":2},"end":{"line":1758,"column":3}},"530":{"start":{"line":1753,"column":4},"end":{"line":1757,"column":6}},"531":{"start":{"line":1759,"column":2},"end":{"line":1759,"column":26}},"532":{"start":{"line":1760,"column":2},"end":{"line":1766,"column":3}},"533":{"start":{"line":1761,"column":4},"end":{"line":1765,"column":6}},"534":{"start":{"line":1767,"column":2},"end":{"line":1767,"column":25}},"535":{"start":{"line":1768,"column":2},"end":{"line":1774,"column":3}},"536":{"start":{"line":1769,"column":4},"end":{"line":1773,"column":6}},"537":{"start":{"line":1775,"column":2},"end":{"line":1775,"column":24}},"538":{"start":{"line":1776,"column":2},"end":{"line":1782,"column":3}},"539":{"start":{"line":1777,"column":4},"end":{"line":1781,"column":6}},"540":{"start":{"line":1783,"column":2},"end":{"line":1783,"column":28}},"541":{"start":{"line":1784,"column":2},"end":{"line":1790,"column":3}},"542":{"start":{"line":1785,"column":4},"end":{"line":1789,"column":6}},"543":{"start":{"line":1798,"column":0},"end":{"line":1800,"column":2}},"544":{"start":{"line":1799,"column":2},"end":{"line":1799,"column":79}},"545":{"start":{"line":1807,"column":0},"end":{"line":1809,"column":2}},"546":{"start":{"line":1808,"column":2},"end":{"line":1808,"column":59}},"547":{"start":{"line":1816,"column":0},"end":{"line":1819,"column":2}},"548":{"start":{"line":1817,"column":2},"end":{"line":1818,"column":82}},"549":{"start":{"line":1826,"column":0},"end":{"line":1828,"column":2}},"550":{"start":{"line":1827,"column":2},"end":{"line":1827,"column":114}},"551":{"start":{"line":1835,"column":0},"end":{"line":1837,"column":2}},"552":{"start":{"line":1836,"column":2},"end":{"line":1836,"column":41}},"553":{"start":{"line":1844,"column":0},"end":{"line":1846,"column":2}},"554":{"start":{"line":1845,"column":2},"end":{"line":1845,"column":48}},"555":{"start":{"line":1853,"column":0},"end":{"line":1856,"column":2}},"556":{"start":{"line":1854,"column":2},"end":{"line":1855,"column":76}},"557":{"start":{"line":1863,"column":0},"end":{"line":1865,"column":2}},"558":{"start":{"line":1864,"column":2},"end":{"line":1864,"column":114}},"559":{"start":{"line":1872,"column":0},"end":{"line":1874,"column":2}},"560":{"start":{"line":1873,"column":2},"end":{"line":1873,"column":35}},"561":{"start":{"line":1881,"column":0},"end":{"line":1883,"column":2}},"562":{"start":{"line":1882,"column":2},"end":{"line":1882,"column":48}},"563":{"start":{"line":1890,"column":0},"end":{"line":1893,"column":2}},"564":{"start":{"line":1891,"column":2},"end":{"line":1892,"column":75}},"565":{"start":{"line":1900,"column":0},"end":{"line":1902,"column":2}},"566":{"start":{"line":1901,"column":2},"end":{"line":1901,"column":114}},"567":{"start":{"line":1909,"column":0},"end":{"line":1911,"column":2}},"568":{"start":{"line":1910,"column":2},"end":{"line":1910,"column":34}},"569":{"start":{"line":1918,"column":0},"end":{"line":1920,"column":2}},"570":{"start":{"line":1919,"column":2},"end":{"line":1919,"column":48}},"571":{"start":{"line":1927,"column":0},"end":{"line":1930,"column":2}},"572":{"start":{"line":1928,"column":2},"end":{"line":1929,"column":74}},"573":{"start":{"line":1937,"column":0},"end":{"line":1939,"column":2}},"574":{"start":{"line":1938,"column":2},"end":{"line":1938,"column":114}},"575":{"start":{"line":1946,"column":0},"end":{"line":1948,"column":2}},"576":{"start":{"line":1947,"column":2},"end":{"line":1947,"column":33}},"577":{"start":{"line":1955,"column":0},"end":{"line":1957,"column":2}},"578":{"start":{"line":1956,"column":2},"end":{"line":1956,"column":48}},"579":{"start":{"line":1964,"column":0},"end":{"line":1967,"column":2}},"580":{"start":{"line":1965,"column":2},"end":{"line":1966,"column":84}},"581":{"start":{"line":1974,"column":0},"end":{"line":1976,"column":2}},"582":{"start":{"line":1975,"column":2},"end":{"line":1975,"column":54}},"583":{"start":{"line":1983,"column":0},"end":{"line":1985,"column":2}},"584":{"start":{"line":1984,"column":2},"end":{"line":1984,"column":37}},"585":{"start":{"line":1992,"column":0},"end":{"line":1994,"column":2}},"586":{"start":{"line":1993,"column":2},"end":{"line":1993,"column":48}},"587":{"start":{"line":2006,"column":0},"end":{"line":2006,"column":77}},"588":{"start":{"line":2011,"column":0},"end":{"line":2018,"column":2}},"589":{"start":{"line":2023,"column":0},"end":{"line":2025,"column":2}},"590":{"start":{"line":2024,"column":2},"end":{"line":2024,"column":176}},"591":{"start":{"line":2029,"column":0},"end":{"line":2072,"column":1}},"592":{"start":{"line":2042,"column":0},"end":{"line":2044,"column":2}},"593":{"start":{"line":2043,"column":2},"end":{"line":2043,"column":88}},"594":{"start":{"line":2056,"column":0},"end":{"line":2071,"column":2}},"595":{"start":{"line":2057,"column":15},"end":{"line":2065,"column":3}},"596":{"start":{"line":2067,"column":2},"end":{"line":2069,"column":3}},"597":{"start":{"line":2068,"column":4},"end":{"line":2068,"column":35}},"598":{"start":{"line":2070,"column":2},"end":{"line":2070,"column":13}},"599":{"start":{"line":2080,"column":0},"end":{"line":2084,"column":2}},"600":{"start":{"line":2081,"column":15},"end":{"line":2081,"column":43}},"601":{"start":{"line":2082,"column":12},"end":{"line":2082,"column":58}},"602":{"start":{"line":2083,"column":2},"end":{"line":2083,"column":93}},"603":{"start":{"line":2094,"column":0},"end":{"line":2140,"column":2}},"604":{"start":{"line":2095,"column":2},"end":{"line":2138,"column":3}},"605":{"start":{"line":2096,"column":4},"end":{"line":2098,"column":5}},"606":{"start":{"line":2097,"column":6},"end":{"line":2097,"column":12}},"607":{"start":{"line":2099,"column":16},"end":{"line":2099,"column":39}},"608":{"start":{"line":2100,"column":4},"end":{"line":2137,"column":5}},"609":{"start":{"line":2102,"column":41},"end":{"line":2102,"column":60}},"610":{"start":{"line":2103,"column":6},"end":{"line":2103,"column":30}},"611":{"start":{"line":2104,"column":6},"end":{"line":2104,"column":12}},"612":{"start":{"line":2106,"column":67},"end":{"line":2106,"column":84}},"613":{"start":{"line":2107,"column":6},"end":{"line":2107,"column":27}},"614":{"start":{"line":2108,"column":6},"end":{"line":2108,"column":12}},"615":{"start":{"line":2110,"column":18},"end":{"line":2110,"column":59}},"616":{"start":{"line":2111,"column":6},"end":{"line":2111,"column":98}},"617":{"start":{"line":2112,"column":6},"end":{"line":2112,"column":33}},"618":{"start":{"line":2113,"column":6},"end":{"line":2113,"column":12}},"619":{"start":{"line":2115,"column":18},"end":{"line":2115,"column":59}},"620":{"start":{"line":2116,"column":6},"end":{"line":2116,"column":98}},"621":{"start":{"line":2117,"column":6},"end":{"line":2117,"column":33}},"622":{"start":{"line":2118,"column":6},"end":{"line":2118,"column":12}},"623":{"start":{"line":2120,"column":18},"end":{"line":2120,"column":53}},"624":{"start":{"line":2121,"column":6},"end":{"line":2121,"column":92}},"625":{"start":{"line":2122,"column":6},"end":{"line":2122,"column":27}},"626":{"start":{"line":2123,"column":6},"end":{"line":2123,"column":12}},"627":{"start":{"line":2125,"column":18},"end":{"line":2125,"column":52}},"628":{"start":{"line":2126,"column":6},"end":{"line":2126,"column":91}},"629":{"start":{"line":2127,"column":6},"end":{"line":2127,"column":26}},"630":{"start":{"line":2128,"column":6},"end":{"line":2128,"column":12}},"631":{"start":{"line":2130,"column":18},"end":{"line":2130,"column":51}},"632":{"start":{"line":2131,"column":6},"end":{"line":2131,"column":90}},"633":{"start":{"line":2132,"column":6},"end":{"line":2132,"column":25}},"634":{"start":{"line":2133,"column":6},"end":{"line":2133,"column":12}},"635":{"start":{"line":2135,"column":6},"end":{"line":2135,"column":25}},"636":{"start":{"line":2136,"column":6},"end":{"line":2136,"column":12}},"637":{"start":{"line":2139,"column":2},"end":{"line":2139,"column":13}},"638":{"start":{"line":2147,"column":0},"end":{"line":2151,"column":2}},"639":{"start":{"line":2148,"column":15},"end":{"line":2148,"column":38}},"640":{"start":{"line":2149,"column":2},"end":{"line":2149,"column":83}},"641":{"start":{"line":2150,"column":2},"end":{"line":2150,"column":34}},"642":{"start":{"line":2161,"column":0},"end":{"line":2217,"column":2}},"643":{"start":{"line":2162,"column":10},"end":{"line":2162,"column":19}},"644":{"start":{"line":2163,"column":2},"end":{"line":2163,"column":29}},"645":{"start":{"line":2164,"column":2},"end":{"line":2169,"column":3}},"646":{"start":{"line":2165,"column":4},"end":{"line":2168,"column":6}},"647":{"start":{"line":2170,"column":2},"end":{"line":2170,"column":26}},"648":{"start":{"line":2171,"column":2},"end":{"line":2176,"column":3}},"649":{"start":{"line":2172,"column":4},"end":{"line":2175,"column":6}},"650":{"start":{"line":2177,"column":2},"end":{"line":2177,"column":32}},"651":{"start":{"line":2178,"column":2},"end":{"line":2184,"column":3}},"652":{"start":{"line":2179,"column":4},"end":{"line":2183,"column":6}},"653":{"start":{"line":2185,"column":2},"end":{"line":2185,"column":32}},"654":{"start":{"line":2186,"column":2},"end":{"line":2192,"column":3}},"655":{"start":{"line":2187,"column":4},"end":{"line":2191,"column":6}},"656":{"start":{"line":2193,"column":2},"end":{"line":2193,"column":26}},"657":{"start":{"line":2194,"column":2},"end":{"line":2200,"column":3}},"658":{"start":{"line":2195,"column":4},"end":{"line":2199,"column":6}},"659":{"start":{"line":2201,"column":2},"end":{"line":2201,"column":25}},"660":{"start":{"line":2202,"column":2},"end":{"line":2208,"column":3}},"661":{"start":{"line":2203,"column":4},"end":{"line":2207,"column":6}},"662":{"start":{"line":2209,"column":2},"end":{"line":2209,"column":24}},"663":{"start":{"line":2210,"column":2},"end":{"line":2216,"column":3}},"664":{"start":{"line":2211,"column":4},"end":{"line":2215,"column":6}},"665":{"start":{"line":2224,"column":0},"end":{"line":2226,"column":2}},"666":{"start":{"line":2225,"column":2},"end":{"line":2225,"column":79}},"667":{"start":{"line":2233,"column":0},"end":{"line":2235,"column":2}},"668":{"start":{"line":2234,"column":2},"end":{"line":2234,"column":59}},"669":{"start":{"line":2242,"column":0},"end":{"line":2244,"column":2}},"670":{"start":{"line":2243,"column":2},"end":{"line":2243,"column":104}},"671":{"start":{"line":2251,"column":0},"end":{"line":2253,"column":2}},"672":{"start":{"line":2252,"column":2},"end":{"line":2252,"column":57}},"673":{"start":{"line":2260,"column":0},"end":{"line":2263,"column":2}},"674":{"start":{"line":2261,"column":2},"end":{"line":2262,"column":83}},"675":{"start":{"line":2270,"column":0},"end":{"line":2272,"column":2}},"676":{"start":{"line":2271,"column":2},"end":{"line":2271,"column":120}},"677":{"start":{"line":2279,"column":0},"end":{"line":2281,"column":2}},"678":{"start":{"line":2280,"column":2},"end":{"line":2280,"column":41}},"679":{"start":{"line":2288,"column":0},"end":{"line":2290,"column":2}},"680":{"start":{"line":2289,"column":2},"end":{"line":2289,"column":49}},"681":{"start":{"line":2297,"column":0},"end":{"line":2300,"column":2}},"682":{"start":{"line":2298,"column":2},"end":{"line":2299,"column":83}},"683":{"start":{"line":2307,"column":0},"end":{"line":2309,"column":2}},"684":{"start":{"line":2308,"column":2},"end":{"line":2308,"column":120}},"685":{"start":{"line":2316,"column":0},"end":{"line":2318,"column":2}},"686":{"start":{"line":2317,"column":2},"end":{"line":2317,"column":41}},"687":{"start":{"line":2325,"column":0},"end":{"line":2327,"column":2}},"688":{"start":{"line":2326,"column":2},"end":{"line":2326,"column":49}},"689":{"start":{"line":2334,"column":0},"end":{"line":2337,"column":2}},"690":{"start":{"line":2335,"column":2},"end":{"line":2336,"column":77}},"691":{"start":{"line":2344,"column":0},"end":{"line":2346,"column":2}},"692":{"start":{"line":2345,"column":2},"end":{"line":2345,"column":120}},"693":{"start":{"line":2353,"column":0},"end":{"line":2355,"column":2}},"694":{"start":{"line":2354,"column":2},"end":{"line":2354,"column":35}},"695":{"start":{"line":2362,"column":0},"end":{"line":2364,"column":2}},"696":{"start":{"line":2363,"column":2},"end":{"line":2363,"column":49}},"697":{"start":{"line":2371,"column":0},"end":{"line":2374,"column":2}},"698":{"start":{"line":2372,"column":2},"end":{"line":2373,"column":76}},"699":{"start":{"line":2381,"column":0},"end":{"line":2383,"column":2}},"700":{"start":{"line":2382,"column":2},"end":{"line":2382,"column":120}},"701":{"start":{"line":2390,"column":0},"end":{"line":2392,"column":2}},"702":{"start":{"line":2391,"column":2},"end":{"line":2391,"column":34}},"703":{"start":{"line":2399,"column":0},"end":{"line":2401,"column":2}},"704":{"start":{"line":2400,"column":2},"end":{"line":2400,"column":49}},"705":{"start":{"line":2408,"column":0},"end":{"line":2411,"column":2}},"706":{"start":{"line":2409,"column":2},"end":{"line":2410,"column":75}},"707":{"start":{"line":2418,"column":0},"end":{"line":2420,"column":2}},"708":{"start":{"line":2419,"column":2},"end":{"line":2419,"column":120}},"709":{"start":{"line":2427,"column":0},"end":{"line":2429,"column":2}},"710":{"start":{"line":2428,"column":2},"end":{"line":2428,"column":33}},"711":{"start":{"line":2436,"column":0},"end":{"line":2438,"column":2}},"712":{"start":{"line":2437,"column":2},"end":{"line":2437,"column":49}},"713":{"start":{"line":2447,"column":0},"end":{"line":2447,"column":63}},"714":{"start":{"line":2451,"column":0},"end":{"line":2489,"column":1}},"715":{"start":{"line":2464,"column":0},"end":{"line":2466,"column":2}},"716":{"start":{"line":2465,"column":2},"end":{"line":2465,"column":86}},"717":{"start":{"line":2478,"column":0},"end":{"line":2488,"column":2}},"718":{"start":{"line":2479,"column":15},"end":{"line":2482,"column":3}},"719":{"start":{"line":2484,"column":2},"end":{"line":2486,"column":3}},"720":{"start":{"line":2485,"column":4},"end":{"line":2485,"column":35}},"721":{"start":{"line":2487,"column":2},"end":{"line":2487,"column":13}},"722":{"start":{"line":2497,"column":0},"end":{"line":2501,"column":2}},"723":{"start":{"line":2498,"column":15},"end":{"line":2498,"column":43}},"724":{"start":{"line":2499,"column":12},"end":{"line":2499,"column":56}},"725":{"start":{"line":2500,"column":2},"end":{"line":2500,"column":91}},"726":{"start":{"line":2511,"column":0},"end":{"line":2529,"column":2}},"727":{"start":{"line":2512,"column":2},"end":{"line":2527,"column":3}},"728":{"start":{"line":2513,"column":4},"end":{"line":2515,"column":5}},"729":{"start":{"line":2514,"column":6},"end":{"line":2514,"column":12}},"730":{"start":{"line":2516,"column":16},"end":{"line":2516,"column":39}},"731":{"start":{"line":2517,"column":4},"end":{"line":2526,"column":5}},"732":{"start":{"line":2519,"column":18},"end":{"line":2519,"column":64}},"733":{"start":{"line":2520,"column":6},"end":{"line":2520,"column":103}},"734":{"start":{"line":2521,"column":6},"end":{"line":2521,"column":29}},"735":{"start":{"line":2522,"column":6},"end":{"line":2522,"column":12}},"736":{"start":{"line":2524,"column":6},"end":{"line":2524,"column":25}},"737":{"start":{"line":2525,"column":6},"end":{"line":2525,"column":12}},"738":{"start":{"line":2528,"column":2},"end":{"line":2528,"column":13}},"739":{"start":{"line":2536,"column":0},"end":{"line":2540,"column":2}},"740":{"start":{"line":2537,"column":15},"end":{"line":2537,"column":38}},"741":{"start":{"line":2538,"column":2},"end":{"line":2538,"column":81}},"742":{"start":{"line":2539,"column":2},"end":{"line":2539,"column":34}},"743":{"start":{"line":2550,"column":0},"end":{"line":2560,"column":2}},"744":{"start":{"line":2551,"column":10},"end":{"line":2551,"column":19}},"745":{"start":{"line":2552,"column":2},"end":{"line":2552,"column":32}},"746":{"start":{"line":2553,"column":2},"end":{"line":2559,"column":3}},"747":{"start":{"line":2554,"column":4},"end":{"line":2558,"column":6}},"748":{"start":{"line":2567,"column":0},"end":{"line":2570,"column":2}},"749":{"start":{"line":2568,"column":2},"end":{"line":2569,"column":95}},"750":{"start":{"line":2577,"column":0},"end":{"line":2579,"column":2}},"751":{"start":{"line":2578,"column":2},"end":{"line":2578,"column":62}},"752":{"start":{"line":2587,"column":0},"end":{"line":2589,"column":2}},"753":{"start":{"line":2588,"column":2},"end":{"line":2588,"column":123}},"754":{"start":{"line":2596,"column":0},"end":{"line":2598,"column":2}},"755":{"start":{"line":2597,"column":2},"end":{"line":2597,"column":34}},"756":{"start":{"line":2607,"column":0},"end":{"line":2607,"column":57}},"757":{"start":{"line":2611,"column":0},"end":{"line":2649,"column":1}},"758":{"start":{"line":2624,"column":0},"end":{"line":2626,"column":2}},"759":{"start":{"line":2625,"column":2},"end":{"line":2625,"column":80}},"760":{"start":{"line":2638,"column":0},"end":{"line":2648,"column":2}},"761":{"start":{"line":2639,"column":15},"end":{"line":2642,"column":3}},"762":{"start":{"line":2644,"column":2},"end":{"line":2646,"column":3}},"763":{"start":{"line":2645,"column":4},"end":{"line":2645,"column":35}},"764":{"start":{"line":2647,"column":2},"end":{"line":2647,"column":13}},"765":{"start":{"line":2657,"column":0},"end":{"line":2661,"column":2}},"766":{"start":{"line":2658,"column":15},"end":{"line":2658,"column":43}},"767":{"start":{"line":2659,"column":12},"end":{"line":2659,"column":50}},"768":{"start":{"line":2660,"column":2},"end":{"line":2660,"column":85}},"769":{"start":{"line":2671,"column":0},"end":{"line":2689,"column":2}},"770":{"start":{"line":2672,"column":2},"end":{"line":2687,"column":3}},"771":{"start":{"line":2673,"column":4},"end":{"line":2675,"column":5}},"772":{"start":{"line":2674,"column":6},"end":{"line":2674,"column":12}},"773":{"start":{"line":2676,"column":16},"end":{"line":2676,"column":39}},"774":{"start":{"line":2677,"column":4},"end":{"line":2686,"column":5}},"775":{"start":{"line":2679,"column":18},"end":{"line":2679,"column":55}},"776":{"start":{"line":2680,"column":6},"end":{"line":2680,"column":94}},"777":{"start":{"line":2681,"column":6},"end":{"line":2681,"column":30}},"778":{"start":{"line":2682,"column":6},"end":{"line":2682,"column":12}},"779":{"start":{"line":2684,"column":6},"end":{"line":2684,"column":25}},"780":{"start":{"line":2685,"column":6},"end":{"line":2685,"column":12}},"781":{"start":{"line":2688,"column":2},"end":{"line":2688,"column":13}},"782":{"start":{"line":2696,"column":0},"end":{"line":2700,"column":2}},"783":{"start":{"line":2697,"column":15},"end":{"line":2697,"column":38}},"784":{"start":{"line":2698,"column":2},"end":{"line":2698,"column":75}},"785":{"start":{"line":2699,"column":2},"end":{"line":2699,"column":34}},"786":{"start":{"line":2710,"column":0},"end":{"line":2720,"column":2}},"787":{"start":{"line":2711,"column":10},"end":{"line":2711,"column":19}},"788":{"start":{"line":2712,"column":2},"end":{"line":2712,"column":33}},"789":{"start":{"line":2713,"column":2},"end":{"line":2719,"column":3}},"790":{"start":{"line":2714,"column":4},"end":{"line":2718,"column":6}},"791":{"start":{"line":2727,"column":0},"end":{"line":2730,"column":2}},"792":{"start":{"line":2728,"column":2},"end":{"line":2729,"column":86}},"793":{"start":{"line":2737,"column":0},"end":{"line":2739,"column":2}},"794":{"start":{"line":2738,"column":2},"end":{"line":2738,"column":62}},"795":{"start":{"line":2747,"column":0},"end":{"line":2749,"column":2}},"796":{"start":{"line":2748,"column":2},"end":{"line":2748,"column":114}},"797":{"start":{"line":2756,"column":0},"end":{"line":2758,"column":2}},"798":{"start":{"line":2757,"column":2},"end":{"line":2757,"column":35}},"799":{"start":{"line":2764,"column":0},"end":{"line":2805,"column":1}},"800":{"start":{"line":2777,"column":0},"end":{"line":2779,"column":2}},"801":{"start":{"line":2778,"column":2},"end":{"line":2778,"column":79}},"802":{"start":{"line":2791,"column":0},"end":{"line":2804,"column":2}},"803":{"start":{"line":2792,"column":15},"end":{"line":2798,"column":3}},"804":{"start":{"line":2800,"column":2},"end":{"line":2802,"column":3}},"805":{"start":{"line":2801,"column":4},"end":{"line":2801,"column":35}},"806":{"start":{"line":2803,"column":2},"end":{"line":2803,"column":13}},"807":{"start":{"line":2813,"column":0},"end":{"line":2817,"column":2}},"808":{"start":{"line":2814,"column":15},"end":{"line":2814,"column":43}},"809":{"start":{"line":2815,"column":12},"end":{"line":2815,"column":49}},"810":{"start":{"line":2816,"column":2},"end":{"line":2816,"column":84}},"811":{"start":{"line":2827,"column":0},"end":{"line":2861,"column":2}},"812":{"start":{"line":2828,"column":2},"end":{"line":2859,"column":3}},"813":{"start":{"line":2829,"column":4},"end":{"line":2831,"column":5}},"814":{"start":{"line":2830,"column":6},"end":{"line":2830,"column":12}},"815":{"start":{"line":2832,"column":16},"end":{"line":2832,"column":39}},"816":{"start":{"line":2833,"column":4},"end":{"line":2858,"column":5}},"817":{"start":{"line":2835,"column":41},"end":{"line":2835,"column":60}},"818":{"start":{"line":2836,"column":6},"end":{"line":2836,"column":30}},"819":{"start":{"line":2837,"column":6},"end":{"line":2837,"column":12}},"820":{"start":{"line":2839,"column":67},"end":{"line":2839,"column":84}},"821":{"start":{"line":2840,"column":6},"end":{"line":2840,"column":27}},"822":{"start":{"line":2841,"column":6},"end":{"line":2841,"column":12}},"823":{"start":{"line":2843,"column":41},"end":{"line":2843,"column":60}},"824":{"start":{"line":2844,"column":6},"end":{"line":2844,"column":29}},"825":{"start":{"line":2845,"column":6},"end":{"line":2845,"column":12}},"826":{"start":{"line":2847,"column":42},"end":{"line":2847,"column":59}},"827":{"start":{"line":2848,"column":6},"end":{"line":2848,"column":28}},"828":{"start":{"line":2849,"column":6},"end":{"line":2849,"column":12}},"829":{"start":{"line":2851,"column":18},"end":{"line":2851,"column":52}},"830":{"start":{"line":2852,"column":6},"end":{"line":2852,"column":91}},"831":{"start":{"line":2853,"column":6},"end":{"line":2853,"column":27}},"832":{"start":{"line":2854,"column":6},"end":{"line":2854,"column":12}},"833":{"start":{"line":2856,"column":6},"end":{"line":2856,"column":25}},"834":{"start":{"line":2857,"column":6},"end":{"line":2857,"column":12}},"835":{"start":{"line":2860,"column":2},"end":{"line":2860,"column":13}},"836":{"start":{"line":2868,"column":0},"end":{"line":2872,"column":2}},"837":{"start":{"line":2869,"column":15},"end":{"line":2869,"column":38}},"838":{"start":{"line":2870,"column":2},"end":{"line":2870,"column":74}},"839":{"start":{"line":2871,"column":2},"end":{"line":2871,"column":34}},"840":{"start":{"line":2882,"column":0},"end":{"line":2920,"column":2}},"841":{"start":{"line":2883,"column":10},"end":{"line":2883,"column":19}},"842":{"start":{"line":2884,"column":2},"end":{"line":2884,"column":29}},"843":{"start":{"line":2885,"column":2},"end":{"line":2890,"column":3}},"844":{"start":{"line":2886,"column":4},"end":{"line":2889,"column":6}},"845":{"start":{"line":2891,"column":2},"end":{"line":2891,"column":26}},"846":{"start":{"line":2892,"column":2},"end":{"line":2897,"column":3}},"847":{"start":{"line":2893,"column":4},"end":{"line":2896,"column":6}},"848":{"start":{"line":2898,"column":2},"end":{"line":2898,"column":28}},"849":{"start":{"line":2899,"column":2},"end":{"line":2904,"column":3}},"850":{"start":{"line":2900,"column":4},"end":{"line":2903,"column":6}},"851":{"start":{"line":2905,"column":2},"end":{"line":2905,"column":27}},"852":{"start":{"line":2906,"column":2},"end":{"line":2911,"column":3}},"853":{"start":{"line":2907,"column":4},"end":{"line":2910,"column":6}},"854":{"start":{"line":2912,"column":2},"end":{"line":2912,"column":26}},"855":{"start":{"line":2913,"column":2},"end":{"line":2919,"column":3}},"856":{"start":{"line":2914,"column":4},"end":{"line":2918,"column":6}},"857":{"start":{"line":2927,"column":0},"end":{"line":2929,"column":2}},"858":{"start":{"line":2928,"column":2},"end":{"line":2928,"column":79}},"859":{"start":{"line":2936,"column":0},"end":{"line":2938,"column":2}},"860":{"start":{"line":2937,"column":2},"end":{"line":2937,"column":59}},"861":{"start":{"line":2945,"column":0},"end":{"line":2947,"column":2}},"862":{"start":{"line":2946,"column":2},"end":{"line":2946,"column":104}},"863":{"start":{"line":2954,"column":0},"end":{"line":2956,"column":2}},"864":{"start":{"line":2955,"column":2},"end":{"line":2955,"column":57}},"865":{"start":{"line":2963,"column":0},"end":{"line":2965,"column":2}},"866":{"start":{"line":2964,"column":2},"end":{"line":2964,"column":79}},"867":{"start":{"line":2972,"column":0},"end":{"line":2974,"column":2}},"868":{"start":{"line":2973,"column":2},"end":{"line":2973,"column":59}},"869":{"start":{"line":2981,"column":0},"end":{"line":2983,"column":2}},"870":{"start":{"line":2982,"column":2},"end":{"line":2982,"column":90}},"871":{"start":{"line":2990,"column":0},"end":{"line":2992,"column":2}},"872":{"start":{"line":2991,"column":2},"end":{"line":2991,"column":60}},"873":{"start":{"line":2999,"column":0},"end":{"line":3002,"column":2}},"874":{"start":{"line":3000,"column":2},"end":{"line":3001,"column":75}},"875":{"start":{"line":3009,"column":0},"end":{"line":3011,"column":2}},"876":{"start":{"line":3010,"column":2},"end":{"line":3010,"column":54}},"877":{"start":{"line":3018,"column":0},"end":{"line":3020,"column":2}},"878":{"start":{"line":3019,"column":2},"end":{"line":3019,"column":35}},"879":{"start":{"line":3027,"column":0},"end":{"line":3029,"column":2}},"880":{"start":{"line":3028,"column":2},"end":{"line":3028,"column":48}},"881":{"start":{"line":3041,"column":0},"end":{"line":3041,"column":60}},"882":{"start":{"line":3046,"column":0},"end":{"line":3053,"column":2}},"883":{"start":{"line":3058,"column":0},"end":{"line":3060,"column":2}},"884":{"start":{"line":3059,"column":2},"end":{"line":3059,"column":154}},"885":{"start":{"line":3064,"column":0},"end":{"line":3105,"column":1}},"886":{"start":{"line":3077,"column":0},"end":{"line":3079,"column":2}},"887":{"start":{"line":3078,"column":2},"end":{"line":3078,"column":76}},"888":{"start":{"line":3091,"column":0},"end":{"line":3104,"column":2}},"889":{"start":{"line":3092,"column":15},"end":{"line":3098,"column":3}},"890":{"start":{"line":3100,"column":2},"end":{"line":3102,"column":3}},"891":{"start":{"line":3101,"column":4},"end":{"line":3101,"column":35}},"892":{"start":{"line":3103,"column":2},"end":{"line":3103,"column":13}},"893":{"start":{"line":3113,"column":0},"end":{"line":3117,"column":2}},"894":{"start":{"line":3114,"column":15},"end":{"line":3114,"column":43}},"895":{"start":{"line":3115,"column":12},"end":{"line":3115,"column":46}},"896":{"start":{"line":3116,"column":2},"end":{"line":3116,"column":81}},"897":{"start":{"line":3127,"column":0},"end":{"line":3165,"column":2}},"898":{"start":{"line":3128,"column":2},"end":{"line":3163,"column":3}},"899":{"start":{"line":3129,"column":4},"end":{"line":3131,"column":5}},"900":{"start":{"line":3130,"column":6},"end":{"line":3130,"column":12}},"901":{"start":{"line":3132,"column":16},"end":{"line":3132,"column":39}},"902":{"start":{"line":3133,"column":4},"end":{"line":3162,"column":5}},"903":{"start":{"line":3135,"column":18},"end":{"line":3135,"column":62}},"904":{"start":{"line":3136,"column":6},"end":{"line":3136,"column":101}},"905":{"start":{"line":3137,"column":6},"end":{"line":3137,"column":31}},"906":{"start":{"line":3138,"column":6},"end":{"line":3138,"column":12}},"907":{"start":{"line":3140,"column":18},"end":{"line":3140,"column":66}},"908":{"start":{"line":3141,"column":6},"end":{"line":3141,"column":105}},"909":{"start":{"line":3142,"column":6},"end":{"line":3142,"column":28}},"910":{"start":{"line":3143,"column":6},"end":{"line":3143,"column":12}},"911":{"start":{"line":3145,"column":18},"end":{"line":3145,"column":66}},"912":{"start":{"line":3146,"column":6},"end":{"line":3146,"column":105}},"913":{"start":{"line":3147,"column":6},"end":{"line":3147,"column":35}},"914":{"start":{"line":3148,"column":6},"end":{"line":3148,"column":12}},"915":{"start":{"line":3150,"column":18},"end":{"line":3150,"column":71}},"916":{"start":{"line":3151,"column":6},"end":{"line":3151,"column":110}},"917":{"start":{"line":3152,"column":6},"end":{"line":3152,"column":33}},"918":{"start":{"line":3153,"column":6},"end":{"line":3153,"column":12}},"919":{"start":{"line":3155,"column":18},"end":{"line":3155,"column":70}},"920":{"start":{"line":3156,"column":6},"end":{"line":3156,"column":109}},"921":{"start":{"line":3157,"column":6},"end":{"line":3157,"column":39}},"922":{"start":{"line":3158,"column":6},"end":{"line":3158,"column":12}},"923":{"start":{"line":3160,"column":6},"end":{"line":3160,"column":25}},"924":{"start":{"line":3161,"column":6},"end":{"line":3161,"column":12}},"925":{"start":{"line":3164,"column":2},"end":{"line":3164,"column":13}},"926":{"start":{"line":3172,"column":0},"end":{"line":3176,"column":2}},"927":{"start":{"line":3173,"column":15},"end":{"line":3173,"column":38}},"928":{"start":{"line":3174,"column":2},"end":{"line":3174,"column":71}},"929":{"start":{"line":3175,"column":2},"end":{"line":3175,"column":34}},"930":{"start":{"line":3186,"column":0},"end":{"line":3228,"column":2}},"931":{"start":{"line":3187,"column":10},"end":{"line":3187,"column":19}},"932":{"start":{"line":3188,"column":2},"end":{"line":3188,"column":30}},"933":{"start":{"line":3189,"column":2},"end":{"line":3195,"column":3}},"934":{"start":{"line":3190,"column":4},"end":{"line":3194,"column":6}},"935":{"start":{"line":3196,"column":2},"end":{"line":3196,"column":27}},"936":{"start":{"line":3197,"column":2},"end":{"line":3203,"column":3}},"937":{"start":{"line":3198,"column":4},"end":{"line":3202,"column":6}},"938":{"start":{"line":3204,"column":2},"end":{"line":3204,"column":34}},"939":{"start":{"line":3205,"column":2},"end":{"line":3211,"column":3}},"940":{"start":{"line":3206,"column":4},"end":{"line":3210,"column":6}},"941":{"start":{"line":3212,"column":2},"end":{"line":3212,"column":32}},"942":{"start":{"line":3213,"column":2},"end":{"line":3219,"column":3}},"943":{"start":{"line":3214,"column":4},"end":{"line":3218,"column":6}},"944":{"start":{"line":3220,"column":2},"end":{"line":3220,"column":38}},"945":{"start":{"line":3221,"column":2},"end":{"line":3227,"column":3}},"946":{"start":{"line":3222,"column":4},"end":{"line":3226,"column":6}},"947":{"start":{"line":3235,"column":0},"end":{"line":3238,"column":2}},"948":{"start":{"line":3236,"column":2},"end":{"line":3237,"column":85}},"949":{"start":{"line":3245,"column":0},"end":{"line":3247,"column":2}},"950":{"start":{"line":3246,"column":2},"end":{"line":3246,"column":107}},"951":{"start":{"line":3254,"column":0},"end":{"line":3256,"column":2}},"952":{"start":{"line":3255,"column":2},"end":{"line":3255,"column":39}},"953":{"start":{"line":3263,"column":0},"end":{"line":3265,"column":2}},"954":{"start":{"line":3264,"column":2},"end":{"line":3264,"column":48}},"955":{"start":{"line":3272,"column":0},"end":{"line":3275,"column":2}},"956":{"start":{"line":3273,"column":2},"end":{"line":3274,"column":89}},"957":{"start":{"line":3282,"column":0},"end":{"line":3284,"column":2}},"958":{"start":{"line":3283,"column":2},"end":{"line":3283,"column":107}},"959":{"start":{"line":3291,"column":0},"end":{"line":3293,"column":2}},"960":{"start":{"line":3292,"column":2},"end":{"line":3292,"column":36}},"961":{"start":{"line":3300,"column":0},"end":{"line":3302,"column":2}},"962":{"start":{"line":3301,"column":2},"end":{"line":3301,"column":48}},"963":{"start":{"line":3309,"column":0},"end":{"line":3312,"column":2}},"964":{"start":{"line":3310,"column":2},"end":{"line":3311,"column":89}},"965":{"start":{"line":3319,"column":0},"end":{"line":3321,"column":2}},"966":{"start":{"line":3320,"column":2},"end":{"line":3320,"column":107}},"967":{"start":{"line":3328,"column":0},"end":{"line":3330,"column":2}},"968":{"start":{"line":3329,"column":2},"end":{"line":3329,"column":43}},"969":{"start":{"line":3337,"column":0},"end":{"line":3339,"column":2}},"970":{"start":{"line":3338,"column":2},"end":{"line":3338,"column":48}},"971":{"start":{"line":3346,"column":0},"end":{"line":3349,"column":2}},"972":{"start":{"line":3347,"column":2},"end":{"line":3348,"column":94}},"973":{"start":{"line":3356,"column":0},"end":{"line":3358,"column":2}},"974":{"start":{"line":3357,"column":2},"end":{"line":3357,"column":107}},"975":{"start":{"line":3365,"column":0},"end":{"line":3367,"column":2}},"976":{"start":{"line":3366,"column":2},"end":{"line":3366,"column":41}},"977":{"start":{"line":3374,"column":0},"end":{"line":3376,"column":2}},"978":{"start":{"line":3375,"column":2},"end":{"line":3375,"column":48}},"979":{"start":{"line":3383,"column":0},"end":{"line":3386,"column":2}},"980":{"start":{"line":3384,"column":2},"end":{"line":3385,"column":93}},"981":{"start":{"line":3393,"column":0},"end":{"line":3395,"column":2}},"982":{"start":{"line":3394,"column":2},"end":{"line":3394,"column":107}},"983":{"start":{"line":3402,"column":0},"end":{"line":3404,"column":2}},"984":{"start":{"line":3403,"column":2},"end":{"line":3403,"column":47}},"985":{"start":{"line":3411,"column":0},"end":{"line":3413,"column":2}},"986":{"start":{"line":3412,"column":2},"end":{"line":3412,"column":48}},"987":{"start":{"line":3422,"column":0},"end":{"line":3422,"column":65}},"988":{"start":{"line":3426,"column":0},"end":{"line":3465,"column":1}},"989":{"start":{"line":3439,"column":0},"end":{"line":3441,"column":2}},"990":{"start":{"line":3440,"column":2},"end":{"line":3440,"column":86}},"991":{"start":{"line":3453,"column":0},"end":{"line":3464,"column":2}},"992":{"start":{"line":3454,"column":15},"end":{"line":3458,"column":3}},"993":{"start":{"line":3460,"column":2},"end":{"line":3462,"column":3}},"994":{"start":{"line":3461,"column":4},"end":{"line":3461,"column":35}},"995":{"start":{"line":3463,"column":2},"end":{"line":3463,"column":13}},"996":{"start":{"line":3473,"column":0},"end":{"line":3477,"column":2}},"997":{"start":{"line":3474,"column":15},"end":{"line":3474,"column":43}},"998":{"start":{"line":3475,"column":12},"end":{"line":3475,"column":56}},"999":{"start":{"line":3476,"column":2},"end":{"line":3476,"column":91}},"1000":{"start":{"line":3487,"column":0},"end":{"line":3509,"column":2}},"1001":{"start":{"line":3488,"column":2},"end":{"line":3507,"column":3}},"1002":{"start":{"line":3489,"column":4},"end":{"line":3491,"column":5}},"1003":{"start":{"line":3490,"column":6},"end":{"line":3490,"column":12}},"1004":{"start":{"line":3492,"column":16},"end":{"line":3492,"column":39}},"1005":{"start":{"line":3493,"column":4},"end":{"line":3506,"column":5}},"1006":{"start":{"line":3495,"column":18},"end":{"line":3495,"column":61}},"1007":{"start":{"line":3496,"column":6},"end":{"line":3496,"column":100}},"1008":{"start":{"line":3497,"column":6},"end":{"line":3497,"column":27}},"1009":{"start":{"line":3498,"column":6},"end":{"line":3498,"column":12}},"1010":{"start":{"line":3500,"column":41},"end":{"line":3500,"column":60}},"1011":{"start":{"line":3501,"column":6},"end":{"line":3501,"column":38}},"1012":{"start":{"line":3502,"column":6},"end":{"line":3502,"column":12}},"1013":{"start":{"line":3504,"column":6},"end":{"line":3504,"column":25}},"1014":{"start":{"line":3505,"column":6},"end":{"line":3505,"column":12}},"1015":{"start":{"line":3508,"column":2},"end":{"line":3508,"column":13}},"1016":{"start":{"line":3516,"column":0},"end":{"line":3520,"column":2}},"1017":{"start":{"line":3517,"column":15},"end":{"line":3517,"column":38}},"1018":{"start":{"line":3518,"column":2},"end":{"line":3518,"column":81}},"1019":{"start":{"line":3519,"column":2},"end":{"line":3519,"column":34}},"1020":{"start":{"line":3530,"column":0},"end":{"line":3547,"column":2}},"1021":{"start":{"line":3531,"column":10},"end":{"line":3531,"column":19}},"1022":{"start":{"line":3532,"column":2},"end":{"line":3532,"column":30}},"1023":{"start":{"line":3533,"column":2},"end":{"line":3539,"column":3}},"1024":{"start":{"line":3534,"column":4},"end":{"line":3538,"column":6}},"1025":{"start":{"line":3540,"column":2},"end":{"line":3540,"column":41}},"1026":{"start":{"line":3541,"column":2},"end":{"line":3546,"column":3}},"1027":{"start":{"line":3542,"column":4},"end":{"line":3545,"column":6}},"1028":{"start":{"line":3554,"column":0},"end":{"line":3557,"column":2}},"1029":{"start":{"line":3555,"column":2},"end":{"line":3556,"column":92}},"1030":{"start":{"line":3564,"column":0},"end":{"line":3566,"column":2}},"1031":{"start":{"line":3565,"column":2},"end":{"line":3565,"column":62}},"1032":{"start":{"line":3574,"column":0},"end":{"line":3576,"column":2}},"1033":{"start":{"line":3575,"column":2},"end":{"line":3575,"column":120}},"1034":{"start":{"line":3583,"column":0},"end":{"line":3585,"column":2}},"1035":{"start":{"line":3584,"column":2},"end":{"line":3584,"column":32}},"1036":{"start":{"line":3592,"column":0},"end":{"line":3594,"column":2}},"1037":{"start":{"line":3593,"column":2},"end":{"line":3593,"column":80}},"1038":{"start":{"line":3601,"column":0},"end":{"line":3603,"column":2}},"1039":{"start":{"line":3602,"column":2},"end":{"line":3602,"column":53}},"1040":{"start":{"line":3611,"column":0},"end":{"line":3613,"column":2}},"1041":{"start":{"line":3612,"column":2},"end":{"line":3612,"column":68}},"1042":{"start":{"line":3620,"column":0},"end":{"line":3622,"column":2}},"1043":{"start":{"line":3621,"column":2},"end":{"line":3621,"column":43}},"1044":{"start":{"line":3631,"column":0},"end":{"line":3631,"column":67}},"1045":{"start":{"line":3635,"column":0},"end":{"line":3672,"column":1}},"1046":{"start":{"line":3648,"column":0},"end":{"line":3650,"column":2}},"1047":{"start":{"line":3649,"column":2},"end":{"line":3649,"column":90}},"1048":{"start":{"line":3662,"column":0},"end":{"line":3671,"column":2}},"1049":{"start":{"line":3663,"column":15},"end":{"line":3665,"column":3}},"1050":{"start":{"line":3667,"column":2},"end":{"line":3669,"column":3}},"1051":{"start":{"line":3668,"column":4},"end":{"line":3668,"column":35}},"1052":{"start":{"line":3670,"column":2},"end":{"line":3670,"column":13}},"1053":{"start":{"line":3680,"column":0},"end":{"line":3684,"column":2}},"1054":{"start":{"line":3681,"column":15},"end":{"line":3681,"column":43}},"1055":{"start":{"line":3682,"column":12},"end":{"line":3682,"column":60}},"1056":{"start":{"line":3683,"column":2},"end":{"line":3683,"column":95}},"1057":{"start":{"line":3694,"column":0},"end":{"line":3711,"column":2}},"1058":{"start":{"line":3695,"column":2},"end":{"line":3709,"column":3}},"1059":{"start":{"line":3696,"column":4},"end":{"line":3698,"column":5}},"1060":{"start":{"line":3697,"column":6},"end":{"line":3697,"column":12}},"1061":{"start":{"line":3699,"column":16},"end":{"line":3699,"column":39}},"1062":{"start":{"line":3700,"column":4},"end":{"line":3708,"column":5}},"1063":{"start":{"line":3702,"column":41},"end":{"line":3702,"column":60}},"1064":{"start":{"line":3703,"column":6},"end":{"line":3703,"column":28}},"1065":{"start":{"line":3704,"column":6},"end":{"line":3704,"column":12}},"1066":{"start":{"line":3706,"column":6},"end":{"line":3706,"column":25}},"1067":{"start":{"line":3707,"column":6},"end":{"line":3707,"column":12}},"1068":{"start":{"line":3710,"column":2},"end":{"line":3710,"column":13}},"1069":{"start":{"line":3718,"column":0},"end":{"line":3722,"column":2}},"1070":{"start":{"line":3719,"column":15},"end":{"line":3719,"column":38}},"1071":{"start":{"line":3720,"column":2},"end":{"line":3720,"column":85}},"1072":{"start":{"line":3721,"column":2},"end":{"line":3721,"column":34}},"1073":{"start":{"line":3732,"column":0},"end":{"line":3741,"column":2}},"1074":{"start":{"line":3733,"column":10},"end":{"line":3733,"column":19}},"1075":{"start":{"line":3734,"column":2},"end":{"line":3734,"column":31}},"1076":{"start":{"line":3735,"column":2},"end":{"line":3740,"column":3}},"1077":{"start":{"line":3736,"column":4},"end":{"line":3739,"column":6}},"1078":{"start":{"line":3748,"column":0},"end":{"line":3750,"column":2}},"1079":{"start":{"line":3749,"column":2},"end":{"line":3749,"column":80}},"1080":{"start":{"line":3757,"column":0},"end":{"line":3759,"column":2}},"1081":{"start":{"line":3758,"column":2},"end":{"line":3758,"column":53}},"1082":{"start":{"line":3767,"column":0},"end":{"line":3769,"column":2}},"1083":{"start":{"line":3768,"column":2},"end":{"line":3768,"column":68}},"1084":{"start":{"line":3776,"column":0},"end":{"line":3778,"column":2}},"1085":{"start":{"line":3777,"column":2},"end":{"line":3777,"column":33}},"1086":{"start":{"line":3787,"column":0},"end":{"line":3787,"column":72}},"1087":{"start":{"line":3791,"column":0},"end":{"line":3828,"column":1}},"1088":{"start":{"line":3804,"column":0},"end":{"line":3806,"column":2}},"1089":{"start":{"line":3805,"column":2},"end":{"line":3805,"column":95}},"1090":{"start":{"line":3818,"column":0},"end":{"line":3827,"column":2}},"1091":{"start":{"line":3819,"column":15},"end":{"line":3821,"column":3}},"1092":{"start":{"line":3823,"column":2},"end":{"line":3825,"column":3}},"1093":{"start":{"line":3824,"column":4},"end":{"line":3824,"column":35}},"1094":{"start":{"line":3826,"column":2},"end":{"line":3826,"column":13}},"1095":{"start":{"line":3836,"column":0},"end":{"line":3840,"column":2}},"1096":{"start":{"line":3837,"column":15},"end":{"line":3837,"column":43}},"1097":{"start":{"line":3838,"column":12},"end":{"line":3838,"column":65}},"1098":{"start":{"line":3839,"column":2},"end":{"line":3839,"column":100}},"1099":{"start":{"line":3850,"column":0},"end":{"line":3867,"column":2}},"1100":{"start":{"line":3851,"column":2},"end":{"line":3865,"column":3}},"1101":{"start":{"line":3852,"column":4},"end":{"line":3854,"column":5}},"1102":{"start":{"line":3853,"column":6},"end":{"line":3853,"column":12}},"1103":{"start":{"line":3855,"column":16},"end":{"line":3855,"column":39}},"1104":{"start":{"line":3856,"column":4},"end":{"line":3864,"column":5}},"1105":{"start":{"line":3858,"column":41},"end":{"line":3858,"column":60}},"1106":{"start":{"line":3859,"column":6},"end":{"line":3859,"column":28}},"1107":{"start":{"line":3860,"column":6},"end":{"line":3860,"column":12}},"1108":{"start":{"line":3862,"column":6},"end":{"line":3862,"column":25}},"1109":{"start":{"line":3863,"column":6},"end":{"line":3863,"column":12}},"1110":{"start":{"line":3866,"column":2},"end":{"line":3866,"column":13}},"1111":{"start":{"line":3874,"column":0},"end":{"line":3878,"column":2}},"1112":{"start":{"line":3875,"column":15},"end":{"line":3875,"column":38}},"1113":{"start":{"line":3876,"column":2},"end":{"line":3876,"column":90}},"1114":{"start":{"line":3877,"column":2},"end":{"line":3877,"column":34}},"1115":{"start":{"line":3888,"column":0},"end":{"line":3897,"column":2}},"1116":{"start":{"line":3889,"column":10},"end":{"line":3889,"column":19}},"1117":{"start":{"line":3890,"column":2},"end":{"line":3890,"column":31}},"1118":{"start":{"line":3891,"column":2},"end":{"line":3896,"column":3}},"1119":{"start":{"line":3892,"column":4},"end":{"line":3895,"column":6}},"1120":{"start":{"line":3904,"column":0},"end":{"line":3906,"column":2}},"1121":{"start":{"line":3905,"column":2},"end":{"line":3905,"column":80}},"1122":{"start":{"line":3913,"column":0},"end":{"line":3915,"column":2}},"1123":{"start":{"line":3914,"column":2},"end":{"line":3914,"column":53}},"1124":{"start":{"line":3923,"column":0},"end":{"line":3925,"column":2}},"1125":{"start":{"line":3924,"column":2},"end":{"line":3924,"column":68}},"1126":{"start":{"line":3932,"column":0},"end":{"line":3934,"column":2}},"1127":{"start":{"line":3933,"column":2},"end":{"line":3933,"column":33}},"1128":{"start":{"line":3943,"column":0},"end":{"line":3943,"column":71}},"1129":{"start":{"line":3947,"column":0},"end":{"line":3984,"column":1}},"1130":{"start":{"line":3960,"column":0},"end":{"line":3962,"column":2}},"1131":{"start":{"line":3961,"column":2},"end":{"line":3961,"column":94}},"1132":{"start":{"line":3974,"column":0},"end":{"line":3983,"column":2}},"1133":{"start":{"line":3975,"column":15},"end":{"line":3977,"column":3}},"1134":{"start":{"line":3979,"column":2},"end":{"line":3981,"column":3}},"1135":{"start":{"line":3980,"column":4},"end":{"line":3980,"column":35}},"1136":{"start":{"line":3982,"column":2},"end":{"line":3982,"column":13}},"1137":{"start":{"line":3992,"column":0},"end":{"line":3996,"column":2}},"1138":{"start":{"line":3993,"column":15},"end":{"line":3993,"column":43}},"1139":{"start":{"line":3994,"column":12},"end":{"line":3994,"column":64}},"1140":{"start":{"line":3995,"column":2},"end":{"line":3995,"column":99}},"1141":{"start":{"line":4006,"column":0},"end":{"line":4023,"column":2}},"1142":{"start":{"line":4007,"column":2},"end":{"line":4021,"column":3}},"1143":{"start":{"line":4008,"column":4},"end":{"line":4010,"column":5}},"1144":{"start":{"line":4009,"column":6},"end":{"line":4009,"column":12}},"1145":{"start":{"line":4011,"column":16},"end":{"line":4011,"column":39}},"1146":{"start":{"line":4012,"column":4},"end":{"line":4020,"column":5}},"1147":{"start":{"line":4014,"column":41},"end":{"line":4014,"column":60}},"1148":{"start":{"line":4015,"column":6},"end":{"line":4015,"column":28}},"1149":{"start":{"line":4016,"column":6},"end":{"line":4016,"column":12}},"1150":{"start":{"line":4018,"column":6},"end":{"line":4018,"column":25}},"1151":{"start":{"line":4019,"column":6},"end":{"line":4019,"column":12}},"1152":{"start":{"line":4022,"column":2},"end":{"line":4022,"column":13}},"1153":{"start":{"line":4030,"column":0},"end":{"line":4034,"column":2}},"1154":{"start":{"line":4031,"column":15},"end":{"line":4031,"column":38}},"1155":{"start":{"line":4032,"column":2},"end":{"line":4032,"column":89}},"1156":{"start":{"line":4033,"column":2},"end":{"line":4033,"column":34}},"1157":{"start":{"line":4044,"column":0},"end":{"line":4053,"column":2}},"1158":{"start":{"line":4045,"column":10},"end":{"line":4045,"column":19}},"1159":{"start":{"line":4046,"column":2},"end":{"line":4046,"column":31}},"1160":{"start":{"line":4047,"column":2},"end":{"line":4052,"column":3}},"1161":{"start":{"line":4048,"column":4},"end":{"line":4051,"column":6}},"1162":{"start":{"line":4060,"column":0},"end":{"line":4062,"column":2}},"1163":{"start":{"line":4061,"column":2},"end":{"line":4061,"column":80}},"1164":{"start":{"line":4069,"column":0},"end":{"line":4071,"column":2}},"1165":{"start":{"line":4070,"column":2},"end":{"line":4070,"column":53}},"1166":{"start":{"line":4079,"column":0},"end":{"line":4081,"column":2}},"1167":{"start":{"line":4080,"column":2},"end":{"line":4080,"column":68}},"1168":{"start":{"line":4088,"column":0},"end":{"line":4090,"column":2}},"1169":{"start":{"line":4089,"column":2},"end":{"line":4089,"column":33}},"1170":{"start":{"line":4099,"column":0},"end":{"line":4099,"column":69}},"1171":{"start":{"line":4103,"column":0},"end":{"line":4142,"column":1}},"1172":{"start":{"line":4116,"column":0},"end":{"line":4118,"column":2}},"1173":{"start":{"line":4117,"column":2},"end":{"line":4117,"column":90}},"1174":{"start":{"line":4130,"column":0},"end":{"line":4141,"column":2}},"1175":{"start":{"line":4131,"column":15},"end":{"line":4135,"column":3}},"1176":{"start":{"line":4137,"column":2},"end":{"line":4139,"column":3}},"1177":{"start":{"line":4138,"column":4},"end":{"line":4138,"column":35}},"1178":{"start":{"line":4140,"column":2},"end":{"line":4140,"column":13}},"1179":{"start":{"line":4150,"column":0},"end":{"line":4154,"column":2}},"1180":{"start":{"line":4151,"column":15},"end":{"line":4151,"column":43}},"1181":{"start":{"line":4152,"column":12},"end":{"line":4152,"column":60}},"1182":{"start":{"line":4153,"column":2},"end":{"line":4153,"column":95}},"1183":{"start":{"line":4164,"column":0},"end":{"line":4186,"column":2}},"1184":{"start":{"line":4165,"column":2},"end":{"line":4184,"column":3}},"1185":{"start":{"line":4166,"column":4},"end":{"line":4168,"column":5}},"1186":{"start":{"line":4167,"column":6},"end":{"line":4167,"column":12}},"1187":{"start":{"line":4169,"column":16},"end":{"line":4169,"column":39}},"1188":{"start":{"line":4170,"column":4},"end":{"line":4183,"column":5}},"1189":{"start":{"line":4172,"column":18},"end":{"line":4172,"column":61}},"1190":{"start":{"line":4173,"column":6},"end":{"line":4173,"column":100}},"1191":{"start":{"line":4174,"column":6},"end":{"line":4174,"column":27}},"1192":{"start":{"line":4175,"column":6},"end":{"line":4175,"column":12}},"1193":{"start":{"line":4177,"column":41},"end":{"line":4177,"column":60}},"1194":{"start":{"line":4178,"column":6},"end":{"line":4178,"column":38}},"1195":{"start":{"line":4179,"column":6},"end":{"line":4179,"column":12}},"1196":{"start":{"line":4181,"column":6},"end":{"line":4181,"column":25}},"1197":{"start":{"line":4182,"column":6},"end":{"line":4182,"column":12}},"1198":{"start":{"line":4185,"column":2},"end":{"line":4185,"column":13}},"1199":{"start":{"line":4193,"column":0},"end":{"line":4197,"column":2}},"1200":{"start":{"line":4194,"column":15},"end":{"line":4194,"column":38}},"1201":{"start":{"line":4195,"column":2},"end":{"line":4195,"column":85}},"1202":{"start":{"line":4196,"column":2},"end":{"line":4196,"column":34}},"1203":{"start":{"line":4207,"column":0},"end":{"line":4224,"column":2}},"1204":{"start":{"line":4208,"column":10},"end":{"line":4208,"column":19}},"1205":{"start":{"line":4209,"column":2},"end":{"line":4209,"column":30}},"1206":{"start":{"line":4210,"column":2},"end":{"line":4216,"column":3}},"1207":{"start":{"line":4211,"column":4},"end":{"line":4215,"column":6}},"1208":{"start":{"line":4217,"column":2},"end":{"line":4217,"column":41}},"1209":{"start":{"line":4218,"column":2},"end":{"line":4223,"column":3}},"1210":{"start":{"line":4219,"column":4},"end":{"line":4222,"column":6}},"1211":{"start":{"line":4231,"column":0},"end":{"line":4234,"column":2}},"1212":{"start":{"line":4232,"column":2},"end":{"line":4233,"column":92}},"1213":{"start":{"line":4241,"column":0},"end":{"line":4243,"column":2}},"1214":{"start":{"line":4242,"column":2},"end":{"line":4242,"column":62}},"1215":{"start":{"line":4251,"column":0},"end":{"line":4253,"column":2}},"1216":{"start":{"line":4252,"column":2},"end":{"line":4252,"column":120}},"1217":{"start":{"line":4260,"column":0},"end":{"line":4262,"column":2}},"1218":{"start":{"line":4261,"column":2},"end":{"line":4261,"column":32}},"1219":{"start":{"line":4269,"column":0},"end":{"line":4271,"column":2}},"1220":{"start":{"line":4270,"column":2},"end":{"line":4270,"column":80}},"1221":{"start":{"line":4278,"column":0},"end":{"line":4280,"column":2}},"1222":{"start":{"line":4279,"column":2},"end":{"line":4279,"column":53}},"1223":{"start":{"line":4288,"column":0},"end":{"line":4290,"column":2}},"1224":{"start":{"line":4289,"column":2},"end":{"line":4289,"column":68}},"1225":{"start":{"line":4297,"column":0},"end":{"line":4299,"column":2}},"1226":{"start":{"line":4298,"column":2},"end":{"line":4298,"column":43}},"1227":{"start":{"line":4308,"column":0},"end":{"line":4308,"column":62}},"1228":{"start":{"line":4312,"column":0},"end":{"line":4350,"column":1}},"1229":{"start":{"line":4325,"column":0},"end":{"line":4327,"column":2}},"1230":{"start":{"line":4326,"column":2},"end":{"line":4326,"column":85}},"1231":{"start":{"line":4339,"column":0},"end":{"line":4349,"column":2}},"1232":{"start":{"line":4340,"column":15},"end":{"line":4343,"column":3}},"1233":{"start":{"line":4345,"column":2},"end":{"line":4347,"column":3}},"1234":{"start":{"line":4346,"column":4},"end":{"line":4346,"column":35}},"1235":{"start":{"line":4348,"column":2},"end":{"line":4348,"column":13}},"1236":{"start":{"line":4358,"column":0},"end":{"line":4362,"column":2}},"1237":{"start":{"line":4359,"column":15},"end":{"line":4359,"column":43}},"1238":{"start":{"line":4360,"column":12},"end":{"line":4360,"column":55}},"1239":{"start":{"line":4361,"column":2},"end":{"line":4361,"column":90}},"1240":{"start":{"line":4372,"column":0},"end":{"line":4393,"column":2}},"1241":{"start":{"line":4373,"column":2},"end":{"line":4391,"column":3}},"1242":{"start":{"line":4374,"column":4},"end":{"line":4376,"column":5}},"1243":{"start":{"line":4375,"column":6},"end":{"line":4375,"column":12}},"1244":{"start":{"line":4377,"column":16},"end":{"line":4377,"column":39}},"1245":{"start":{"line":4378,"column":4},"end":{"line":4390,"column":5}},"1246":{"start":{"line":4380,"column":41},"end":{"line":4380,"column":60}},"1247":{"start":{"line":4381,"column":6},"end":{"line":4381,"column":25}},"1248":{"start":{"line":4382,"column":6},"end":{"line":4382,"column":12}},"1249":{"start":{"line":4384,"column":41},"end":{"line":4384,"column":60}},"1250":{"start":{"line":4385,"column":6},"end":{"line":4385,"column":28}},"1251":{"start":{"line":4386,"column":6},"end":{"line":4386,"column":12}},"1252":{"start":{"line":4388,"column":6},"end":{"line":4388,"column":25}},"1253":{"start":{"line":4389,"column":6},"end":{"line":4389,"column":12}},"1254":{"start":{"line":4392,"column":2},"end":{"line":4392,"column":13}},"1255":{"start":{"line":4400,"column":0},"end":{"line":4404,"column":2}},"1256":{"start":{"line":4401,"column":15},"end":{"line":4401,"column":38}},"1257":{"start":{"line":4402,"column":2},"end":{"line":4402,"column":80}},"1258":{"start":{"line":4403,"column":2},"end":{"line":4403,"column":34}},"1259":{"start":{"line":4414,"column":0},"end":{"line":4430,"column":2}},"1260":{"start":{"line":4415,"column":10},"end":{"line":4415,"column":19}},"1261":{"start":{"line":4416,"column":2},"end":{"line":4416,"column":24}},"1262":{"start":{"line":4417,"column":2},"end":{"line":4422,"column":3}},"1263":{"start":{"line":4418,"column":4},"end":{"line":4421,"column":6}},"1264":{"start":{"line":4423,"column":2},"end":{"line":4423,"column":31}},"1265":{"start":{"line":4424,"column":2},"end":{"line":4429,"column":3}},"1266":{"start":{"line":4425,"column":4},"end":{"line":4428,"column":6}},"1267":{"start":{"line":4437,"column":0},"end":{"line":4439,"column":2}},"1268":{"start":{"line":4438,"column":2},"end":{"line":4438,"column":79}},"1269":{"start":{"line":4446,"column":0},"end":{"line":4448,"column":2}},"1270":{"start":{"line":4447,"column":2},"end":{"line":4447,"column":59}},"1271":{"start":{"line":4455,"column":0},"end":{"line":4457,"column":2}},"1272":{"start":{"line":4456,"column":2},"end":{"line":4456,"column":80}},"1273":{"start":{"line":4464,"column":0},"end":{"line":4466,"column":2}},"1274":{"start":{"line":4465,"column":2},"end":{"line":4465,"column":53}},"1275":{"start":{"line":4474,"column":0},"end":{"line":4476,"column":2}},"1276":{"start":{"line":4475,"column":2},"end":{"line":4475,"column":68}},"1277":{"start":{"line":4483,"column":0},"end":{"line":4485,"column":2}},"1278":{"start":{"line":4484,"column":2},"end":{"line":4484,"column":33}},"1279":{"start":{"line":4491,"column":0},"end":{"line":4494,"column":2}},"1280":{"start":{"line":4499,"column":0},"end":{"line":4506,"column":2}},"1281":{"start":{"line":4511,"column":0},"end":{"line":4514,"column":2}},"1282":{"start":{"line":4516,"column":0},"end":{"line":4516,"column":54}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":51,"column":40},"end":{"line":51,"column":41}},"loc":{"start":{"line":51,"column":59},"end":{"line":53,"column":1}},"line":51},"1":{"name":"(anonymous_1)","decl":{"start":{"line":72,"column":34},"end":{"line":72,"column":35}},"loc":{"start":{"line":72,"column":53},"end":{"line":74,"column":1}},"line":72},"2":{"name":"(anonymous_2)","decl":{"start":{"line":93,"column":33},"end":{"line":93,"column":34}},"loc":{"start":{"line":93,"column":52},"end":{"line":95,"column":1}},"line":93},"3":{"name":"(anonymous_3)","decl":{"start":{"line":114,"column":32},"end":{"line":114,"column":33}},"loc":{"start":{"line":114,"column":51},"end":{"line":116,"column":1}},"line":114},"4":{"name":"(anonymous_4)","decl":{"start":{"line":135,"column":42},"end":{"line":135,"column":43}},"loc":{"start":{"line":135,"column":61},"end":{"line":137,"column":1}},"line":135},"5":{"name":"(anonymous_5)","decl":{"start":{"line":156,"column":40},"end":{"line":156,"column":41}},"loc":{"start":{"line":156,"column":59},"end":{"line":158,"column":1}},"line":156},"6":{"name":"(anonymous_6)","decl":{"start":{"line":177,"column":45},"end":{"line":177,"column":46}},"loc":{"start":{"line":177,"column":64},"end":{"line":179,"column":1}},"line":177},"7":{"name":"(anonymous_7)","decl":{"start":{"line":198,"column":43},"end":{"line":198,"column":44}},"loc":{"start":{"line":198,"column":62},"end":{"line":200,"column":1}},"line":198},"8":{"name":"(anonymous_8)","decl":{"start":{"line":219,"column":37},"end":{"line":219,"column":38}},"loc":{"start":{"line":219,"column":56},"end":{"line":221,"column":1}},"line":219},"9":{"name":"(anonymous_9)","decl":{"start":{"line":240,"column":36},"end":{"line":240,"column":37}},"loc":{"start":{"line":240,"column":55},"end":{"line":242,"column":1}},"line":240},"10":{"name":"(anonymous_10)","decl":{"start":{"line":261,"column":33},"end":{"line":261,"column":34}},"loc":{"start":{"line":261,"column":52},"end":{"line":263,"column":1}},"line":261},"11":{"name":"(anonymous_11)","decl":{"start":{"line":282,"column":43},"end":{"line":282,"column":44}},"loc":{"start":{"line":282,"column":62},"end":{"line":284,"column":1}},"line":282},"12":{"name":"(anonymous_12)","decl":{"start":{"line":303,"column":47},"end":{"line":303,"column":48}},"loc":{"start":{"line":303,"column":66},"end":{"line":305,"column":1}},"line":303},"13":{"name":"(anonymous_13)","decl":{"start":{"line":324,"column":52},"end":{"line":324,"column":53}},"loc":{"start":{"line":324,"column":71},"end":{"line":326,"column":1}},"line":324},"14":{"name":"(anonymous_14)","decl":{"start":{"line":345,"column":51},"end":{"line":345,"column":52}},"loc":{"start":{"line":345,"column":70},"end":{"line":347,"column":1}},"line":345},"15":{"name":"(anonymous_15)","decl":{"start":{"line":366,"column":47},"end":{"line":366,"column":48}},"loc":{"start":{"line":366,"column":66},"end":{"line":368,"column":1}},"line":366},"16":{"name":"(anonymous_16)","decl":{"start":{"line":387,"column":42},"end":{"line":387,"column":43}},"loc":{"start":{"line":387,"column":61},"end":{"line":389,"column":1}},"line":387},"17":{"name":"(anonymous_17)","decl":{"start":{"line":414,"column":59},"end":{"line":414,"column":60}},"loc":{"start":{"line":414,"column":89},"end":{"line":416,"column":1}},"line":414},"18":{"name":"(anonymous_18)","decl":{"start":{"line":428,"column":49},"end":{"line":428,"column":50}},"loc":{"start":{"line":428,"column":80},"end":{"line":438,"column":1}},"line":428},"19":{"name":"(anonymous_19)","decl":{"start":{"line":447,"column":58},"end":{"line":447,"column":59}},"loc":{"start":{"line":447,"column":74},"end":{"line":451,"column":1}},"line":447},"20":{"name":"(anonymous_20)","decl":{"start":{"line":461,"column":68},"end":{"line":461,"column":69}},"loc":{"start":{"line":461,"column":90},"end":{"line":482,"column":1}},"line":461},"21":{"name":"(anonymous_21)","decl":{"start":{"line":489,"column":66},"end":{"line":489,"column":67}},"loc":{"start":{"line":489,"column":77},"end":{"line":493,"column":1}},"line":489},"22":{"name":"(anonymous_22)","decl":{"start":{"line":503,"column":64},"end":{"line":503,"column":65}},"loc":{"start":{"line":503,"column":90},"end":{"line":519,"column":1}},"line":503},"23":{"name":"(anonymous_23)","decl":{"start":{"line":526,"column":66},"end":{"line":526,"column":67}},"loc":{"start":{"line":526,"column":77},"end":{"line":528,"column":1}},"line":526},"24":{"name":"(anonymous_24)","decl":{"start":{"line":535,"column":66},"end":{"line":535,"column":67}},"loc":{"start":{"line":535,"column":82},"end":{"line":537,"column":1}},"line":535},"25":{"name":"(anonymous_25)","decl":{"start":{"line":544,"column":58},"end":{"line":544,"column":59}},"loc":{"start":{"line":544,"column":69},"end":{"line":546,"column":1}},"line":544},"26":{"name":"(anonymous_26)","decl":{"start":{"line":553,"column":58},"end":{"line":553,"column":59}},"loc":{"start":{"line":553,"column":74},"end":{"line":555,"column":1}},"line":553},"27":{"name":"(anonymous_27)","decl":{"start":{"line":574,"column":53},"end":{"line":574,"column":54}},"loc":{"start":{"line":574,"column":83},"end":{"line":576,"column":1}},"line":574},"28":{"name":"(anonymous_28)","decl":{"start":{"line":588,"column":43},"end":{"line":588,"column":44}},"loc":{"start":{"line":588,"column":74},"end":{"line":600,"column":1}},"line":588},"29":{"name":"(anonymous_29)","decl":{"start":{"line":609,"column":52},"end":{"line":609,"column":53}},"loc":{"start":{"line":609,"column":68},"end":{"line":613,"column":1}},"line":609},"30":{"name":"(anonymous_30)","decl":{"start":{"line":623,"column":62},"end":{"line":623,"column":63}},"loc":{"start":{"line":623,"column":84},"end":{"line":652,"column":1}},"line":623},"31":{"name":"(anonymous_31)","decl":{"start":{"line":659,"column":60},"end":{"line":659,"column":61}},"loc":{"start":{"line":659,"column":71},"end":{"line":663,"column":1}},"line":659},"32":{"name":"(anonymous_32)","decl":{"start":{"line":673,"column":58},"end":{"line":673,"column":59}},"loc":{"start":{"line":673,"column":84},"end":{"line":703,"column":1}},"line":673},"33":{"name":"(anonymous_33)","decl":{"start":{"line":710,"column":60},"end":{"line":710,"column":61}},"loc":{"start":{"line":710,"column":71},"end":{"line":712,"column":1}},"line":710},"34":{"name":"(anonymous_34)","decl":{"start":{"line":719,"column":60},"end":{"line":719,"column":61}},"loc":{"start":{"line":719,"column":76},"end":{"line":721,"column":1}},"line":719},"35":{"name":"(anonymous_35)","decl":{"start":{"line":728,"column":72},"end":{"line":728,"column":73}},"loc":{"start":{"line":728,"column":83},"end":{"line":730,"column":1}},"line":728},"36":{"name":"(anonymous_36)","decl":{"start":{"line":737,"column":72},"end":{"line":737,"column":73}},"loc":{"start":{"line":737,"column":88},"end":{"line":739,"column":1}},"line":737},"37":{"name":"(anonymous_37)","decl":{"start":{"line":746,"column":52},"end":{"line":746,"column":53}},"loc":{"start":{"line":746,"column":63},"end":{"line":748,"column":1}},"line":746},"38":{"name":"(anonymous_38)","decl":{"start":{"line":755,"column":52},"end":{"line":755,"column":53}},"loc":{"start":{"line":755,"column":68},"end":{"line":757,"column":1}},"line":755},"39":{"name":"(anonymous_39)","decl":{"start":{"line":764,"column":57},"end":{"line":764,"column":58}},"loc":{"start":{"line":764,"column":68},"end":{"line":766,"column":1}},"line":764},"40":{"name":"(anonymous_40)","decl":{"start":{"line":773,"column":57},"end":{"line":773,"column":58}},"loc":{"start":{"line":773,"column":73},"end":{"line":775,"column":1}},"line":773},"41":{"name":"(anonymous_41)","decl":{"start":{"line":794,"column":52},"end":{"line":794,"column":53}},"loc":{"start":{"line":794,"column":82},"end":{"line":796,"column":1}},"line":794},"42":{"name":"(anonymous_42)","decl":{"start":{"line":808,"column":42},"end":{"line":808,"column":43}},"loc":{"start":{"line":808,"column":73},"end":{"line":820,"column":1}},"line":808},"43":{"name":"(anonymous_43)","decl":{"start":{"line":829,"column":51},"end":{"line":829,"column":52}},"loc":{"start":{"line":829,"column":67},"end":{"line":833,"column":1}},"line":829},"44":{"name":"(anonymous_44)","decl":{"start":{"line":843,"column":61},"end":{"line":843,"column":62}},"loc":{"start":{"line":843,"column":83},"end":{"line":872,"column":1}},"line":843},"45":{"name":"(anonymous_45)","decl":{"start":{"line":879,"column":59},"end":{"line":879,"column":60}},"loc":{"start":{"line":879,"column":70},"end":{"line":883,"column":1}},"line":879},"46":{"name":"(anonymous_46)","decl":{"start":{"line":893,"column":57},"end":{"line":893,"column":58}},"loc":{"start":{"line":893,"column":83},"end":{"line":923,"column":1}},"line":893},"47":{"name":"(anonymous_47)","decl":{"start":{"line":930,"column":59},"end":{"line":930,"column":60}},"loc":{"start":{"line":930,"column":70},"end":{"line":932,"column":1}},"line":930},"48":{"name":"(anonymous_48)","decl":{"start":{"line":939,"column":59},"end":{"line":939,"column":60}},"loc":{"start":{"line":939,"column":75},"end":{"line":941,"column":1}},"line":939},"49":{"name":"(anonymous_49)","decl":{"start":{"line":948,"column":71},"end":{"line":948,"column":72}},"loc":{"start":{"line":948,"column":82},"end":{"line":950,"column":1}},"line":948},"50":{"name":"(anonymous_50)","decl":{"start":{"line":957,"column":71},"end":{"line":957,"column":72}},"loc":{"start":{"line":957,"column":87},"end":{"line":959,"column":1}},"line":957},"51":{"name":"(anonymous_51)","decl":{"start":{"line":966,"column":51},"end":{"line":966,"column":52}},"loc":{"start":{"line":966,"column":62},"end":{"line":968,"column":1}},"line":966},"52":{"name":"(anonymous_52)","decl":{"start":{"line":975,"column":51},"end":{"line":975,"column":52}},"loc":{"start":{"line":975,"column":67},"end":{"line":977,"column":1}},"line":975},"53":{"name":"(anonymous_53)","decl":{"start":{"line":984,"column":65},"end":{"line":984,"column":66}},"loc":{"start":{"line":984,"column":76},"end":{"line":986,"column":1}},"line":984},"54":{"name":"(anonymous_54)","decl":{"start":{"line":993,"column":65},"end":{"line":993,"column":66}},"loc":{"start":{"line":993,"column":81},"end":{"line":995,"column":1}},"line":993},"55":{"name":"(anonymous_55)","decl":{"start":{"line":1014,"column":51},"end":{"line":1014,"column":52}},"loc":{"start":{"line":1014,"column":81},"end":{"line":1016,"column":1}},"line":1014},"56":{"name":"(anonymous_56)","decl":{"start":{"line":1028,"column":41},"end":{"line":1028,"column":42}},"loc":{"start":{"line":1028,"column":72},"end":{"line":1046,"column":1}},"line":1028},"57":{"name":"(anonymous_57)","decl":{"start":{"line":1055,"column":50},"end":{"line":1055,"column":51}},"loc":{"start":{"line":1055,"column":66},"end":{"line":1059,"column":1}},"line":1055},"58":{"name":"(anonymous_58)","decl":{"start":{"line":1069,"column":60},"end":{"line":1069,"column":61}},"loc":{"start":{"line":1069,"column":82},"end":{"line":1122,"column":1}},"line":1069},"59":{"name":"(anonymous_59)","decl":{"start":{"line":1129,"column":58},"end":{"line":1129,"column":59}},"loc":{"start":{"line":1129,"column":69},"end":{"line":1133,"column":1}},"line":1129},"60":{"name":"(anonymous_60)","decl":{"start":{"line":1143,"column":56},"end":{"line":1143,"column":57}},"loc":{"start":{"line":1143,"column":82},"end":{"line":1215,"column":1}},"line":1143},"61":{"name":"(anonymous_61)","decl":{"start":{"line":1222,"column":58},"end":{"line":1222,"column":59}},"loc":{"start":{"line":1222,"column":69},"end":{"line":1224,"column":1}},"line":1222},"62":{"name":"(anonymous_62)","decl":{"start":{"line":1231,"column":58},"end":{"line":1231,"column":59}},"loc":{"start":{"line":1231,"column":74},"end":{"line":1233,"column":1}},"line":1231},"63":{"name":"(anonymous_63)","decl":{"start":{"line":1240,"column":70},"end":{"line":1240,"column":71}},"loc":{"start":{"line":1240,"column":81},"end":{"line":1242,"column":1}},"line":1240},"64":{"name":"(anonymous_64)","decl":{"start":{"line":1249,"column":70},"end":{"line":1249,"column":71}},"loc":{"start":{"line":1249,"column":86},"end":{"line":1251,"column":1}},"line":1249},"65":{"name":"(anonymous_65)","decl":{"start":{"line":1258,"column":64},"end":{"line":1258,"column":65}},"loc":{"start":{"line":1258,"column":75},"end":{"line":1260,"column":1}},"line":1258},"66":{"name":"(anonymous_66)","decl":{"start":{"line":1267,"column":64},"end":{"line":1267,"column":65}},"loc":{"start":{"line":1267,"column":80},"end":{"line":1269,"column":1}},"line":1267},"67":{"name":"(anonymous_67)","decl":{"start":{"line":1276,"column":51},"end":{"line":1276,"column":52}},"loc":{"start":{"line":1276,"column":62},"end":{"line":1278,"column":1}},"line":1276},"68":{"name":"(anonymous_68)","decl":{"start":{"line":1285,"column":51},"end":{"line":1285,"column":52}},"loc":{"start":{"line":1285,"column":67},"end":{"line":1287,"column":1}},"line":1285},"69":{"name":"(anonymous_69)","decl":{"start":{"line":1294,"column":51},"end":{"line":1294,"column":52}},"loc":{"start":{"line":1294,"column":62},"end":{"line":1296,"column":1}},"line":1294},"70":{"name":"(anonymous_70)","decl":{"start":{"line":1303,"column":51},"end":{"line":1303,"column":52}},"loc":{"start":{"line":1303,"column":67},"end":{"line":1305,"column":1}},"line":1303},"71":{"name":"(anonymous_71)","decl":{"start":{"line":1312,"column":54},"end":{"line":1312,"column":55}},"loc":{"start":{"line":1312,"column":65},"end":{"line":1314,"column":1}},"line":1312},"72":{"name":"(anonymous_72)","decl":{"start":{"line":1321,"column":54},"end":{"line":1321,"column":55}},"loc":{"start":{"line":1321,"column":70},"end":{"line":1323,"column":1}},"line":1321},"73":{"name":"(anonymous_73)","decl":{"start":{"line":1330,"column":55},"end":{"line":1330,"column":56}},"loc":{"start":{"line":1330,"column":66},"end":{"line":1332,"column":1}},"line":1330},"74":{"name":"(anonymous_74)","decl":{"start":{"line":1339,"column":55},"end":{"line":1339,"column":56}},"loc":{"start":{"line":1339,"column":71},"end":{"line":1341,"column":1}},"line":1339},"75":{"name":"(anonymous_75)","decl":{"start":{"line":1348,"column":56},"end":{"line":1348,"column":57}},"loc":{"start":{"line":1348,"column":67},"end":{"line":1350,"column":1}},"line":1348},"76":{"name":"(anonymous_76)","decl":{"start":{"line":1357,"column":56},"end":{"line":1357,"column":57}},"loc":{"start":{"line":1357,"column":72},"end":{"line":1359,"column":1}},"line":1357},"77":{"name":"(anonymous_77)","decl":{"start":{"line":1366,"column":52},"end":{"line":1366,"column":53}},"loc":{"start":{"line":1366,"column":63},"end":{"line":1368,"column":1}},"line":1366},"78":{"name":"(anonymous_78)","decl":{"start":{"line":1375,"column":52},"end":{"line":1375,"column":53}},"loc":{"start":{"line":1375,"column":68},"end":{"line":1377,"column":1}},"line":1375},"79":{"name":"(anonymous_79)","decl":{"start":{"line":1384,"column":57},"end":{"line":1384,"column":58}},"loc":{"start":{"line":1384,"column":68},"end":{"line":1386,"column":1}},"line":1384},"80":{"name":"(anonymous_80)","decl":{"start":{"line":1393,"column":57},"end":{"line":1393,"column":58}},"loc":{"start":{"line":1393,"column":73},"end":{"line":1395,"column":1}},"line":1393},"81":{"name":"(anonymous_81)","decl":{"start":{"line":1421,"column":61},"end":{"line":1421,"column":62}},"loc":{"start":{"line":1421,"column":91},"end":{"line":1423,"column":1}},"line":1421},"82":{"name":"(anonymous_82)","decl":{"start":{"line":1435,"column":51},"end":{"line":1435,"column":52}},"loc":{"start":{"line":1435,"column":82},"end":{"line":1445,"column":1}},"line":1435},"83":{"name":"(anonymous_83)","decl":{"start":{"line":1454,"column":60},"end":{"line":1454,"column":61}},"loc":{"start":{"line":1454,"column":76},"end":{"line":1458,"column":1}},"line":1454},"84":{"name":"(anonymous_84)","decl":{"start":{"line":1468,"column":70},"end":{"line":1468,"column":71}},"loc":{"start":{"line":1468,"column":92},"end":{"line":1489,"column":1}},"line":1468},"85":{"name":"(anonymous_85)","decl":{"start":{"line":1496,"column":68},"end":{"line":1496,"column":69}},"loc":{"start":{"line":1496,"column":79},"end":{"line":1500,"column":1}},"line":1496},"86":{"name":"(anonymous_86)","decl":{"start":{"line":1510,"column":66},"end":{"line":1510,"column":67}},"loc":{"start":{"line":1510,"column":92},"end":{"line":1526,"column":1}},"line":1510},"87":{"name":"(anonymous_87)","decl":{"start":{"line":1533,"column":62},"end":{"line":1533,"column":63}},"loc":{"start":{"line":1533,"column":73},"end":{"line":1535,"column":1}},"line":1533},"88":{"name":"(anonymous_88)","decl":{"start":{"line":1542,"column":62},"end":{"line":1542,"column":63}},"loc":{"start":{"line":1542,"column":78},"end":{"line":1544,"column":1}},"line":1542},"89":{"name":"(anonymous_89)","decl":{"start":{"line":1551,"column":85},"end":{"line":1551,"column":86}},"loc":{"start":{"line":1551,"column":96},"end":{"line":1553,"column":1}},"line":1551},"90":{"name":"(anonymous_90)","decl":{"start":{"line":1560,"column":85},"end":{"line":1560,"column":86}},"loc":{"start":{"line":1560,"column":101},"end":{"line":1562,"column":1}},"line":1560},"91":{"name":"(anonymous_91)","decl":{"start":{"line":1570,"column":81},"end":{"line":1570,"column":82}},"loc":{"start":{"line":1570,"column":108},"end":{"line":1572,"column":1}},"line":1570},"92":{"name":"(anonymous_92)","decl":{"start":{"line":1579,"column":87},"end":{"line":1579,"column":88}},"loc":{"start":{"line":1579,"column":98},"end":{"line":1581,"column":1}},"line":1579},"93":{"name":"(anonymous_93)","decl":{"start":{"line":1609,"column":64},"end":{"line":1609,"column":65}},"loc":{"start":{"line":1609,"column":75},"end":{"line":1611,"column":1}},"line":1609},"94":{"name":"(anonymous_94)","decl":{"start":{"line":1628,"column":59},"end":{"line":1628,"column":60}},"loc":{"start":{"line":1628,"column":89},"end":{"line":1630,"column":1}},"line":1628},"95":{"name":"(anonymous_95)","decl":{"start":{"line":1642,"column":49},"end":{"line":1642,"column":50}},"loc":{"start":{"line":1642,"column":80},"end":{"line":1656,"column":1}},"line":1642},"96":{"name":"(anonymous_96)","decl":{"start":{"line":1665,"column":58},"end":{"line":1665,"column":59}},"loc":{"start":{"line":1665,"column":74},"end":{"line":1669,"column":1}},"line":1665},"97":{"name":"(anonymous_97)","decl":{"start":{"line":1679,"column":68},"end":{"line":1679,"column":69}},"loc":{"start":{"line":1679,"column":90},"end":{"line":1721,"column":1}},"line":1679},"98":{"name":"(anonymous_98)","decl":{"start":{"line":1728,"column":66},"end":{"line":1728,"column":67}},"loc":{"start":{"line":1728,"column":77},"end":{"line":1732,"column":1}},"line":1728},"99":{"name":"(anonymous_99)","decl":{"start":{"line":1742,"column":64},"end":{"line":1742,"column":65}},"loc":{"start":{"line":1742,"column":90},"end":{"line":1791,"column":1}},"line":1742},"100":{"name":"(anonymous_100)","decl":{"start":{"line":1798,"column":78},"end":{"line":1798,"column":79}},"loc":{"start":{"line":1798,"column":89},"end":{"line":1800,"column":1}},"line":1798},"101":{"name":"(anonymous_101)","decl":{"start":{"line":1807,"column":78},"end":{"line":1807,"column":79}},"loc":{"start":{"line":1807,"column":94},"end":{"line":1809,"column":1}},"line":1807},"102":{"name":"(anonymous_102)","decl":{"start":{"line":1816,"column":66},"end":{"line":1816,"column":67}},"loc":{"start":{"line":1816,"column":77},"end":{"line":1819,"column":1}},"line":1816},"103":{"name":"(anonymous_103)","decl":{"start":{"line":1826,"column":66},"end":{"line":1826,"column":67}},"loc":{"start":{"line":1826,"column":82},"end":{"line":1828,"column":1}},"line":1826},"104":{"name":"(anonymous_104)","decl":{"start":{"line":1835,"column":68},"end":{"line":1835,"column":69}},"loc":{"start":{"line":1835,"column":79},"end":{"line":1837,"column":1}},"line":1835},"105":{"name":"(anonymous_105)","decl":{"start":{"line":1844,"column":66},"end":{"line":1844,"column":67}},"loc":{"start":{"line":1844,"column":77},"end":{"line":1846,"column":1}},"line":1844},"106":{"name":"(anonymous_106)","decl":{"start":{"line":1853,"column":60},"end":{"line":1853,"column":61}},"loc":{"start":{"line":1853,"column":71},"end":{"line":1856,"column":1}},"line":1853},"107":{"name":"(anonymous_107)","decl":{"start":{"line":1863,"column":60},"end":{"line":1863,"column":61}},"loc":{"start":{"line":1863,"column":76},"end":{"line":1865,"column":1}},"line":1863},"108":{"name":"(anonymous_108)","decl":{"start":{"line":1872,"column":62},"end":{"line":1872,"column":63}},"loc":{"start":{"line":1872,"column":73},"end":{"line":1874,"column":1}},"line":1872},"109":{"name":"(anonymous_109)","decl":{"start":{"line":1881,"column":60},"end":{"line":1881,"column":61}},"loc":{"start":{"line":1881,"column":71},"end":{"line":1883,"column":1}},"line":1881},"110":{"name":"(anonymous_110)","decl":{"start":{"line":1890,"column":59},"end":{"line":1890,"column":60}},"loc":{"start":{"line":1890,"column":70},"end":{"line":1893,"column":1}},"line":1890},"111":{"name":"(anonymous_111)","decl":{"start":{"line":1900,"column":59},"end":{"line":1900,"column":60}},"loc":{"start":{"line":1900,"column":75},"end":{"line":1902,"column":1}},"line":1900},"112":{"name":"(anonymous_112)","decl":{"start":{"line":1909,"column":61},"end":{"line":1909,"column":62}},"loc":{"start":{"line":1909,"column":72},"end":{"line":1911,"column":1}},"line":1909},"113":{"name":"(anonymous_113)","decl":{"start":{"line":1918,"column":59},"end":{"line":1918,"column":60}},"loc":{"start":{"line":1918,"column":70},"end":{"line":1920,"column":1}},"line":1918},"114":{"name":"(anonymous_114)","decl":{"start":{"line":1927,"column":58},"end":{"line":1927,"column":59}},"loc":{"start":{"line":1927,"column":69},"end":{"line":1930,"column":1}},"line":1927},"115":{"name":"(anonymous_115)","decl":{"start":{"line":1937,"column":58},"end":{"line":1937,"column":59}},"loc":{"start":{"line":1937,"column":74},"end":{"line":1939,"column":1}},"line":1937},"116":{"name":"(anonymous_116)","decl":{"start":{"line":1946,"column":60},"end":{"line":1946,"column":61}},"loc":{"start":{"line":1946,"column":71},"end":{"line":1948,"column":1}},"line":1946},"117":{"name":"(anonymous_117)","decl":{"start":{"line":1955,"column":58},"end":{"line":1955,"column":59}},"loc":{"start":{"line":1955,"column":69},"end":{"line":1957,"column":1}},"line":1955},"118":{"name":"(anonymous_118)","decl":{"start":{"line":1964,"column":62},"end":{"line":1964,"column":63}},"loc":{"start":{"line":1964,"column":73},"end":{"line":1967,"column":1}},"line":1964},"119":{"name":"(anonymous_119)","decl":{"start":{"line":1974,"column":62},"end":{"line":1974,"column":63}},"loc":{"start":{"line":1974,"column":78},"end":{"line":1976,"column":1}},"line":1974},"120":{"name":"(anonymous_120)","decl":{"start":{"line":1983,"column":64},"end":{"line":1983,"column":65}},"loc":{"start":{"line":1983,"column":75},"end":{"line":1985,"column":1}},"line":1983},"121":{"name":"(anonymous_121)","decl":{"start":{"line":1992,"column":62},"end":{"line":1992,"column":63}},"loc":{"start":{"line":1992,"column":73},"end":{"line":1994,"column":1}},"line":1992},"122":{"name":"(anonymous_122)","decl":{"start":{"line":2023,"column":70},"end":{"line":2023,"column":71}},"loc":{"start":{"line":2023,"column":81},"end":{"line":2025,"column":1}},"line":2023},"123":{"name":"(anonymous_123)","decl":{"start":{"line":2042,"column":64},"end":{"line":2042,"column":65}},"loc":{"start":{"line":2042,"column":94},"end":{"line":2044,"column":1}},"line":2042},"124":{"name":"(anonymous_124)","decl":{"start":{"line":2056,"column":54},"end":{"line":2056,"column":55}},"loc":{"start":{"line":2056,"column":85},"end":{"line":2071,"column":1}},"line":2056},"125":{"name":"(anonymous_125)","decl":{"start":{"line":2080,"column":63},"end":{"line":2080,"column":64}},"loc":{"start":{"line":2080,"column":79},"end":{"line":2084,"column":1}},"line":2080},"126":{"name":"(anonymous_126)","decl":{"start":{"line":2094,"column":73},"end":{"line":2094,"column":74}},"loc":{"start":{"line":2094,"column":95},"end":{"line":2140,"column":1}},"line":2094},"127":{"name":"(anonymous_127)","decl":{"start":{"line":2147,"column":71},"end":{"line":2147,"column":72}},"loc":{"start":{"line":2147,"column":82},"end":{"line":2151,"column":1}},"line":2147},"128":{"name":"(anonymous_128)","decl":{"start":{"line":2161,"column":69},"end":{"line":2161,"column":70}},"loc":{"start":{"line":2161,"column":95},"end":{"line":2217,"column":1}},"line":2161},"129":{"name":"(anonymous_129)","decl":{"start":{"line":2224,"column":68},"end":{"line":2224,"column":69}},"loc":{"start":{"line":2224,"column":79},"end":{"line":2226,"column":1}},"line":2224},"130":{"name":"(anonymous_130)","decl":{"start":{"line":2233,"column":68},"end":{"line":2233,"column":69}},"loc":{"start":{"line":2233,"column":84},"end":{"line":2235,"column":1}},"line":2233},"131":{"name":"(anonymous_131)","decl":{"start":{"line":2242,"column":65},"end":{"line":2242,"column":66}},"loc":{"start":{"line":2242,"column":76},"end":{"line":2244,"column":1}},"line":2242},"132":{"name":"(anonymous_132)","decl":{"start":{"line":2251,"column":65},"end":{"line":2251,"column":66}},"loc":{"start":{"line":2251,"column":81},"end":{"line":2253,"column":1}},"line":2251},"133":{"name":"(anonymous_133)","decl":{"start":{"line":2260,"column":71},"end":{"line":2260,"column":72}},"loc":{"start":{"line":2260,"column":82},"end":{"line":2263,"column":1}},"line":2260},"134":{"name":"(anonymous_134)","decl":{"start":{"line":2270,"column":71},"end":{"line":2270,"column":72}},"loc":{"start":{"line":2270,"column":87},"end":{"line":2272,"column":1}},"line":2270},"135":{"name":"(anonymous_135)","decl":{"start":{"line":2279,"column":73},"end":{"line":2279,"column":74}},"loc":{"start":{"line":2279,"column":84},"end":{"line":2281,"column":1}},"line":2279},"136":{"name":"(anonymous_136)","decl":{"start":{"line":2288,"column":71},"end":{"line":2288,"column":72}},"loc":{"start":{"line":2288,"column":82},"end":{"line":2290,"column":1}},"line":2288},"137":{"name":"(anonymous_137)","decl":{"start":{"line":2297,"column":71},"end":{"line":2297,"column":72}},"loc":{"start":{"line":2297,"column":82},"end":{"line":2300,"column":1}},"line":2297},"138":{"name":"(anonymous_138)","decl":{"start":{"line":2307,"column":71},"end":{"line":2307,"column":72}},"loc":{"start":{"line":2307,"column":87},"end":{"line":2309,"column":1}},"line":2307},"139":{"name":"(anonymous_139)","decl":{"start":{"line":2316,"column":73},"end":{"line":2316,"column":74}},"loc":{"start":{"line":2316,"column":84},"end":{"line":2318,"column":1}},"line":2316},"140":{"name":"(anonymous_140)","decl":{"start":{"line":2325,"column":71},"end":{"line":2325,"column":72}},"loc":{"start":{"line":2325,"column":82},"end":{"line":2327,"column":1}},"line":2325},"141":{"name":"(anonymous_141)","decl":{"start":{"line":2334,"column":65},"end":{"line":2334,"column":66}},"loc":{"start":{"line":2334,"column":76},"end":{"line":2337,"column":1}},"line":2334},"142":{"name":"(anonymous_142)","decl":{"start":{"line":2344,"column":65},"end":{"line":2344,"column":66}},"loc":{"start":{"line":2344,"column":81},"end":{"line":2346,"column":1}},"line":2344},"143":{"name":"(anonymous_143)","decl":{"start":{"line":2353,"column":67},"end":{"line":2353,"column":68}},"loc":{"start":{"line":2353,"column":78},"end":{"line":2355,"column":1}},"line":2353},"144":{"name":"(anonymous_144)","decl":{"start":{"line":2362,"column":65},"end":{"line":2362,"column":66}},"loc":{"start":{"line":2362,"column":76},"end":{"line":2364,"column":1}},"line":2362},"145":{"name":"(anonymous_145)","decl":{"start":{"line":2371,"column":64},"end":{"line":2371,"column":65}},"loc":{"start":{"line":2371,"column":75},"end":{"line":2374,"column":1}},"line":2371},"146":{"name":"(anonymous_146)","decl":{"start":{"line":2381,"column":64},"end":{"line":2381,"column":65}},"loc":{"start":{"line":2381,"column":80},"end":{"line":2383,"column":1}},"line":2381},"147":{"name":"(anonymous_147)","decl":{"start":{"line":2390,"column":66},"end":{"line":2390,"column":67}},"loc":{"start":{"line":2390,"column":77},"end":{"line":2392,"column":1}},"line":2390},"148":{"name":"(anonymous_148)","decl":{"start":{"line":2399,"column":64},"end":{"line":2399,"column":65}},"loc":{"start":{"line":2399,"column":75},"end":{"line":2401,"column":1}},"line":2399},"149":{"name":"(anonymous_149)","decl":{"start":{"line":2408,"column":63},"end":{"line":2408,"column":64}},"loc":{"start":{"line":2408,"column":74},"end":{"line":2411,"column":1}},"line":2408},"150":{"name":"(anonymous_150)","decl":{"start":{"line":2418,"column":63},"end":{"line":2418,"column":64}},"loc":{"start":{"line":2418,"column":79},"end":{"line":2420,"column":1}},"line":2418},"151":{"name":"(anonymous_151)","decl":{"start":{"line":2427,"column":65},"end":{"line":2427,"column":66}},"loc":{"start":{"line":2427,"column":76},"end":{"line":2429,"column":1}},"line":2427},"152":{"name":"(anonymous_152)","decl":{"start":{"line":2436,"column":63},"end":{"line":2436,"column":64}},"loc":{"start":{"line":2436,"column":74},"end":{"line":2438,"column":1}},"line":2436},"153":{"name":"(anonymous_153)","decl":{"start":{"line":2464,"column":62},"end":{"line":2464,"column":63}},"loc":{"start":{"line":2464,"column":92},"end":{"line":2466,"column":1}},"line":2464},"154":{"name":"(anonymous_154)","decl":{"start":{"line":2478,"column":52},"end":{"line":2478,"column":53}},"loc":{"start":{"line":2478,"column":83},"end":{"line":2488,"column":1}},"line":2478},"155":{"name":"(anonymous_155)","decl":{"start":{"line":2497,"column":61},"end":{"line":2497,"column":62}},"loc":{"start":{"line":2497,"column":77},"end":{"line":2501,"column":1}},"line":2497},"156":{"name":"(anonymous_156)","decl":{"start":{"line":2511,"column":71},"end":{"line":2511,"column":72}},"loc":{"start":{"line":2511,"column":93},"end":{"line":2529,"column":1}},"line":2511},"157":{"name":"(anonymous_157)","decl":{"start":{"line":2536,"column":69},"end":{"line":2536,"column":70}},"loc":{"start":{"line":2536,"column":80},"end":{"line":2540,"column":1}},"line":2536},"158":{"name":"(anonymous_158)","decl":{"start":{"line":2550,"column":67},"end":{"line":2550,"column":68}},"loc":{"start":{"line":2550,"column":93},"end":{"line":2560,"column":1}},"line":2550},"159":{"name":"(anonymous_159)","decl":{"start":{"line":2567,"column":69},"end":{"line":2567,"column":70}},"loc":{"start":{"line":2567,"column":80},"end":{"line":2570,"column":1}},"line":2567},"160":{"name":"(anonymous_160)","decl":{"start":{"line":2577,"column":69},"end":{"line":2577,"column":70}},"loc":{"start":{"line":2577,"column":85},"end":{"line":2579,"column":1}},"line":2577},"161":{"name":"(anonymous_161)","decl":{"start":{"line":2587,"column":65},"end":{"line":2587,"column":66}},"loc":{"start":{"line":2587,"column":96},"end":{"line":2589,"column":1}},"line":2587},"162":{"name":"(anonymous_162)","decl":{"start":{"line":2596,"column":71},"end":{"line":2596,"column":72}},"loc":{"start":{"line":2596,"column":82},"end":{"line":2598,"column":1}},"line":2596},"163":{"name":"(anonymous_163)","decl":{"start":{"line":2624,"column":56},"end":{"line":2624,"column":57}},"loc":{"start":{"line":2624,"column":86},"end":{"line":2626,"column":1}},"line":2624},"164":{"name":"(anonymous_164)","decl":{"start":{"line":2638,"column":46},"end":{"line":2638,"column":47}},"loc":{"start":{"line":2638,"column":77},"end":{"line":2648,"column":1}},"line":2638},"165":{"name":"(anonymous_165)","decl":{"start":{"line":2657,"column":55},"end":{"line":2657,"column":56}},"loc":{"start":{"line":2657,"column":71},"end":{"line":2661,"column":1}},"line":2657},"166":{"name":"(anonymous_166)","decl":{"start":{"line":2671,"column":65},"end":{"line":2671,"column":66}},"loc":{"start":{"line":2671,"column":87},"end":{"line":2689,"column":1}},"line":2671},"167":{"name":"(anonymous_167)","decl":{"start":{"line":2696,"column":63},"end":{"line":2696,"column":64}},"loc":{"start":{"line":2696,"column":74},"end":{"line":2700,"column":1}},"line":2696},"168":{"name":"(anonymous_168)","decl":{"start":{"line":2710,"column":61},"end":{"line":2710,"column":62}},"loc":{"start":{"line":2710,"column":87},"end":{"line":2720,"column":1}},"line":2710},"169":{"name":"(anonymous_169)","decl":{"start":{"line":2727,"column":64},"end":{"line":2727,"column":65}},"loc":{"start":{"line":2727,"column":75},"end":{"line":2730,"column":1}},"line":2727},"170":{"name":"(anonymous_170)","decl":{"start":{"line":2737,"column":64},"end":{"line":2737,"column":65}},"loc":{"start":{"line":2737,"column":80},"end":{"line":2739,"column":1}},"line":2737},"171":{"name":"(anonymous_171)","decl":{"start":{"line":2747,"column":60},"end":{"line":2747,"column":61}},"loc":{"start":{"line":2747,"column":91},"end":{"line":2749,"column":1}},"line":2747},"172":{"name":"(anonymous_172)","decl":{"start":{"line":2756,"column":66},"end":{"line":2756,"column":67}},"loc":{"start":{"line":2756,"column":77},"end":{"line":2758,"column":1}},"line":2756},"173":{"name":"(anonymous_173)","decl":{"start":{"line":2777,"column":55},"end":{"line":2777,"column":56}},"loc":{"start":{"line":2777,"column":85},"end":{"line":2779,"column":1}},"line":2777},"174":{"name":"(anonymous_174)","decl":{"start":{"line":2791,"column":45},"end":{"line":2791,"column":46}},"loc":{"start":{"line":2791,"column":76},"end":{"line":2804,"column":1}},"line":2791},"175":{"name":"(anonymous_175)","decl":{"start":{"line":2813,"column":54},"end":{"line":2813,"column":55}},"loc":{"start":{"line":2813,"column":70},"end":{"line":2817,"column":1}},"line":2813},"176":{"name":"(anonymous_176)","decl":{"start":{"line":2827,"column":64},"end":{"line":2827,"column":65}},"loc":{"start":{"line":2827,"column":86},"end":{"line":2861,"column":1}},"line":2827},"177":{"name":"(anonymous_177)","decl":{"start":{"line":2868,"column":62},"end":{"line":2868,"column":63}},"loc":{"start":{"line":2868,"column":73},"end":{"line":2872,"column":1}},"line":2868},"178":{"name":"(anonymous_178)","decl":{"start":{"line":2882,"column":60},"end":{"line":2882,"column":61}},"loc":{"start":{"line":2882,"column":86},"end":{"line":2920,"column":1}},"line":2882},"179":{"name":"(anonymous_179)","decl":{"start":{"line":2927,"column":59},"end":{"line":2927,"column":60}},"loc":{"start":{"line":2927,"column":70},"end":{"line":2929,"column":1}},"line":2927},"180":{"name":"(anonymous_180)","decl":{"start":{"line":2936,"column":59},"end":{"line":2936,"column":60}},"loc":{"start":{"line":2936,"column":75},"end":{"line":2938,"column":1}},"line":2936},"181":{"name":"(anonymous_181)","decl":{"start":{"line":2945,"column":56},"end":{"line":2945,"column":57}},"loc":{"start":{"line":2945,"column":67},"end":{"line":2947,"column":1}},"line":2945},"182":{"name":"(anonymous_182)","decl":{"start":{"line":2954,"column":56},"end":{"line":2954,"column":57}},"loc":{"start":{"line":2954,"column":72},"end":{"line":2956,"column":1}},"line":2954},"183":{"name":"(anonymous_183)","decl":{"start":{"line":2963,"column":58},"end":{"line":2963,"column":59}},"loc":{"start":{"line":2963,"column":69},"end":{"line":2965,"column":1}},"line":2963},"184":{"name":"(anonymous_184)","decl":{"start":{"line":2972,"column":58},"end":{"line":2972,"column":59}},"loc":{"start":{"line":2972,"column":74},"end":{"line":2974,"column":1}},"line":2972},"185":{"name":"(anonymous_185)","decl":{"start":{"line":2981,"column":57},"end":{"line":2981,"column":58}},"loc":{"start":{"line":2981,"column":68},"end":{"line":2983,"column":1}},"line":2981},"186":{"name":"(anonymous_186)","decl":{"start":{"line":2990,"column":57},"end":{"line":2990,"column":58}},"loc":{"start":{"line":2990,"column":73},"end":{"line":2992,"column":1}},"line":2990},"187":{"name":"(anonymous_187)","decl":{"start":{"line":2999,"column":56},"end":{"line":2999,"column":57}},"loc":{"start":{"line":2999,"column":67},"end":{"line":3002,"column":1}},"line":2999},"188":{"name":"(anonymous_188)","decl":{"start":{"line":3009,"column":56},"end":{"line":3009,"column":57}},"loc":{"start":{"line":3009,"column":72},"end":{"line":3011,"column":1}},"line":3009},"189":{"name":"(anonymous_189)","decl":{"start":{"line":3018,"column":58},"end":{"line":3018,"column":59}},"loc":{"start":{"line":3018,"column":69},"end":{"line":3020,"column":1}},"line":3018},"190":{"name":"(anonymous_190)","decl":{"start":{"line":3027,"column":56},"end":{"line":3027,"column":57}},"loc":{"start":{"line":3027,"column":67},"end":{"line":3029,"column":1}},"line":3027},"191":{"name":"(anonymous_191)","decl":{"start":{"line":3058,"column":60},"end":{"line":3058,"column":61}},"loc":{"start":{"line":3058,"column":71},"end":{"line":3060,"column":1}},"line":3058},"192":{"name":"(anonymous_192)","decl":{"start":{"line":3077,"column":52},"end":{"line":3077,"column":53}},"loc":{"start":{"line":3077,"column":82},"end":{"line":3079,"column":1}},"line":3077},"193":{"name":"(anonymous_193)","decl":{"start":{"line":3091,"column":42},"end":{"line":3091,"column":43}},"loc":{"start":{"line":3091,"column":73},"end":{"line":3104,"column":1}},"line":3091},"194":{"name":"(anonymous_194)","decl":{"start":{"line":3113,"column":51},"end":{"line":3113,"column":52}},"loc":{"start":{"line":3113,"column":67},"end":{"line":3117,"column":1}},"line":3113},"195":{"name":"(anonymous_195)","decl":{"start":{"line":3127,"column":61},"end":{"line":3127,"column":62}},"loc":{"start":{"line":3127,"column":83},"end":{"line":3165,"column":1}},"line":3127},"196":{"name":"(anonymous_196)","decl":{"start":{"line":3172,"column":59},"end":{"line":3172,"column":60}},"loc":{"start":{"line":3172,"column":70},"end":{"line":3176,"column":1}},"line":3172},"197":{"name":"(anonymous_197)","decl":{"start":{"line":3186,"column":57},"end":{"line":3186,"column":58}},"loc":{"start":{"line":3186,"column":83},"end":{"line":3228,"column":1}},"line":3186},"198":{"name":"(anonymous_198)","decl":{"start":{"line":3235,"column":57},"end":{"line":3235,"column":58}},"loc":{"start":{"line":3235,"column":68},"end":{"line":3238,"column":1}},"line":3235},"199":{"name":"(anonymous_199)","decl":{"start":{"line":3245,"column":57},"end":{"line":3245,"column":58}},"loc":{"start":{"line":3245,"column":73},"end":{"line":3247,"column":1}},"line":3245},"200":{"name":"(anonymous_200)","decl":{"start":{"line":3254,"column":59},"end":{"line":3254,"column":60}},"loc":{"start":{"line":3254,"column":70},"end":{"line":3256,"column":1}},"line":3254},"201":{"name":"(anonymous_201)","decl":{"start":{"line":3263,"column":57},"end":{"line":3263,"column":58}},"loc":{"start":{"line":3263,"column":68},"end":{"line":3265,"column":1}},"line":3263},"202":{"name":"(anonymous_202)","decl":{"start":{"line":3272,"column":54},"end":{"line":3272,"column":55}},"loc":{"start":{"line":3272,"column":65},"end":{"line":3275,"column":1}},"line":3272},"203":{"name":"(anonymous_203)","decl":{"start":{"line":3282,"column":54},"end":{"line":3282,"column":55}},"loc":{"start":{"line":3282,"column":70},"end":{"line":3284,"column":1}},"line":3282},"204":{"name":"(anonymous_204)","decl":{"start":{"line":3291,"column":56},"end":{"line":3291,"column":57}},"loc":{"start":{"line":3291,"column":67},"end":{"line":3293,"column":1}},"line":3291},"205":{"name":"(anonymous_205)","decl":{"start":{"line":3300,"column":54},"end":{"line":3300,"column":55}},"loc":{"start":{"line":3300,"column":65},"end":{"line":3302,"column":1}},"line":3300},"206":{"name":"(anonymous_206)","decl":{"start":{"line":3309,"column":61},"end":{"line":3309,"column":62}},"loc":{"start":{"line":3309,"column":72},"end":{"line":3312,"column":1}},"line":3309},"207":{"name":"(anonymous_207)","decl":{"start":{"line":3319,"column":61},"end":{"line":3319,"column":62}},"loc":{"start":{"line":3319,"column":77},"end":{"line":3321,"column":1}},"line":3319},"208":{"name":"(anonymous_208)","decl":{"start":{"line":3328,"column":63},"end":{"line":3328,"column":64}},"loc":{"start":{"line":3328,"column":74},"end":{"line":3330,"column":1}},"line":3328},"209":{"name":"(anonymous_209)","decl":{"start":{"line":3337,"column":61},"end":{"line":3337,"column":62}},"loc":{"start":{"line":3337,"column":72},"end":{"line":3339,"column":1}},"line":3337},"210":{"name":"(anonymous_210)","decl":{"start":{"line":3346,"column":59},"end":{"line":3346,"column":60}},"loc":{"start":{"line":3346,"column":70},"end":{"line":3349,"column":1}},"line":3346},"211":{"name":"(anonymous_211)","decl":{"start":{"line":3356,"column":59},"end":{"line":3356,"column":60}},"loc":{"start":{"line":3356,"column":75},"end":{"line":3358,"column":1}},"line":3356},"212":{"name":"(anonymous_212)","decl":{"start":{"line":3365,"column":61},"end":{"line":3365,"column":62}},"loc":{"start":{"line":3365,"column":72},"end":{"line":3367,"column":1}},"line":3365},"213":{"name":"(anonymous_213)","decl":{"start":{"line":3374,"column":59},"end":{"line":3374,"column":60}},"loc":{"start":{"line":3374,"column":70},"end":{"line":3376,"column":1}},"line":3374},"214":{"name":"(anonymous_214)","decl":{"start":{"line":3383,"column":65},"end":{"line":3383,"column":66}},"loc":{"start":{"line":3383,"column":76},"end":{"line":3386,"column":1}},"line":3383},"215":{"name":"(anonymous_215)","decl":{"start":{"line":3393,"column":65},"end":{"line":3393,"column":66}},"loc":{"start":{"line":3393,"column":81},"end":{"line":3395,"column":1}},"line":3393},"216":{"name":"(anonymous_216)","decl":{"start":{"line":3402,"column":67},"end":{"line":3402,"column":68}},"loc":{"start":{"line":3402,"column":78},"end":{"line":3404,"column":1}},"line":3402},"217":{"name":"(anonymous_217)","decl":{"start":{"line":3411,"column":65},"end":{"line":3411,"column":66}},"loc":{"start":{"line":3411,"column":76},"end":{"line":3413,"column":1}},"line":3411},"218":{"name":"(anonymous_218)","decl":{"start":{"line":3439,"column":62},"end":{"line":3439,"column":63}},"loc":{"start":{"line":3439,"column":92},"end":{"line":3441,"column":1}},"line":3439},"219":{"name":"(anonymous_219)","decl":{"start":{"line":3453,"column":52},"end":{"line":3453,"column":53}},"loc":{"start":{"line":3453,"column":83},"end":{"line":3464,"column":1}},"line":3453},"220":{"name":"(anonymous_220)","decl":{"start":{"line":3473,"column":61},"end":{"line":3473,"column":62}},"loc":{"start":{"line":3473,"column":77},"end":{"line":3477,"column":1}},"line":3473},"221":{"name":"(anonymous_221)","decl":{"start":{"line":3487,"column":71},"end":{"line":3487,"column":72}},"loc":{"start":{"line":3487,"column":93},"end":{"line":3509,"column":1}},"line":3487},"222":{"name":"(anonymous_222)","decl":{"start":{"line":3516,"column":69},"end":{"line":3516,"column":70}},"loc":{"start":{"line":3516,"column":80},"end":{"line":3520,"column":1}},"line":3516},"223":{"name":"(anonymous_223)","decl":{"start":{"line":3530,"column":67},"end":{"line":3530,"column":68}},"loc":{"start":{"line":3530,"column":93},"end":{"line":3547,"column":1}},"line":3530},"224":{"name":"(anonymous_224)","decl":{"start":{"line":3554,"column":67},"end":{"line":3554,"column":68}},"loc":{"start":{"line":3554,"column":78},"end":{"line":3557,"column":1}},"line":3554},"225":{"name":"(anonymous_225)","decl":{"start":{"line":3564,"column":67},"end":{"line":3564,"column":68}},"loc":{"start":{"line":3564,"column":83},"end":{"line":3566,"column":1}},"line":3564},"226":{"name":"(anonymous_226)","decl":{"start":{"line":3574,"column":63},"end":{"line":3574,"column":64}},"loc":{"start":{"line":3574,"column":94},"end":{"line":3576,"column":1}},"line":3574},"227":{"name":"(anonymous_227)","decl":{"start":{"line":3583,"column":69},"end":{"line":3583,"column":70}},"loc":{"start":{"line":3583,"column":80},"end":{"line":3585,"column":1}},"line":3583},"228":{"name":"(anonymous_228)","decl":{"start":{"line":3592,"column":78},"end":{"line":3592,"column":79}},"loc":{"start":{"line":3592,"column":89},"end":{"line":3594,"column":1}},"line":3592},"229":{"name":"(anonymous_229)","decl":{"start":{"line":3601,"column":78},"end":{"line":3601,"column":79}},"loc":{"start":{"line":3601,"column":94},"end":{"line":3603,"column":1}},"line":3601},"230":{"name":"(anonymous_230)","decl":{"start":{"line":3611,"column":74},"end":{"line":3611,"column":75}},"loc":{"start":{"line":3611,"column":101},"end":{"line":3613,"column":1}},"line":3611},"231":{"name":"(anonymous_231)","decl":{"start":{"line":3620,"column":80},"end":{"line":3620,"column":81}},"loc":{"start":{"line":3620,"column":91},"end":{"line":3622,"column":1}},"line":3620},"232":{"name":"(anonymous_232)","decl":{"start":{"line":3648,"column":66},"end":{"line":3648,"column":67}},"loc":{"start":{"line":3648,"column":96},"end":{"line":3650,"column":1}},"line":3648},"233":{"name":"(anonymous_233)","decl":{"start":{"line":3662,"column":56},"end":{"line":3662,"column":57}},"loc":{"start":{"line":3662,"column":87},"end":{"line":3671,"column":1}},"line":3662},"234":{"name":"(anonymous_234)","decl":{"start":{"line":3680,"column":65},"end":{"line":3680,"column":66}},"loc":{"start":{"line":3680,"column":81},"end":{"line":3684,"column":1}},"line":3680},"235":{"name":"(anonymous_235)","decl":{"start":{"line":3694,"column":75},"end":{"line":3694,"column":76}},"loc":{"start":{"line":3694,"column":97},"end":{"line":3711,"column":1}},"line":3694},"236":{"name":"(anonymous_236)","decl":{"start":{"line":3718,"column":73},"end":{"line":3718,"column":74}},"loc":{"start":{"line":3718,"column":84},"end":{"line":3722,"column":1}},"line":3718},"237":{"name":"(anonymous_237)","decl":{"start":{"line":3732,"column":71},"end":{"line":3732,"column":72}},"loc":{"start":{"line":3732,"column":97},"end":{"line":3741,"column":1}},"line":3732},"238":{"name":"(anonymous_238)","decl":{"start":{"line":3748,"column":72},"end":{"line":3748,"column":73}},"loc":{"start":{"line":3748,"column":83},"end":{"line":3750,"column":1}},"line":3748},"239":{"name":"(anonymous_239)","decl":{"start":{"line":3757,"column":72},"end":{"line":3757,"column":73}},"loc":{"start":{"line":3757,"column":88},"end":{"line":3759,"column":1}},"line":3757},"240":{"name":"(anonymous_240)","decl":{"start":{"line":3767,"column":68},"end":{"line":3767,"column":69}},"loc":{"start":{"line":3767,"column":95},"end":{"line":3769,"column":1}},"line":3767},"241":{"name":"(anonymous_241)","decl":{"start":{"line":3776,"column":74},"end":{"line":3776,"column":75}},"loc":{"start":{"line":3776,"column":85},"end":{"line":3778,"column":1}},"line":3776},"242":{"name":"(anonymous_242)","decl":{"start":{"line":3804,"column":71},"end":{"line":3804,"column":72}},"loc":{"start":{"line":3804,"column":101},"end":{"line":3806,"column":1}},"line":3804},"243":{"name":"(anonymous_243)","decl":{"start":{"line":3818,"column":61},"end":{"line":3818,"column":62}},"loc":{"start":{"line":3818,"column":92},"end":{"line":3827,"column":1}},"line":3818},"244":{"name":"(anonymous_244)","decl":{"start":{"line":3836,"column":70},"end":{"line":3836,"column":71}},"loc":{"start":{"line":3836,"column":86},"end":{"line":3840,"column":1}},"line":3836},"245":{"name":"(anonymous_245)","decl":{"start":{"line":3850,"column":80},"end":{"line":3850,"column":81}},"loc":{"start":{"line":3850,"column":102},"end":{"line":3867,"column":1}},"line":3850},"246":{"name":"(anonymous_246)","decl":{"start":{"line":3874,"column":78},"end":{"line":3874,"column":79}},"loc":{"start":{"line":3874,"column":89},"end":{"line":3878,"column":1}},"line":3874},"247":{"name":"(anonymous_247)","decl":{"start":{"line":3888,"column":76},"end":{"line":3888,"column":77}},"loc":{"start":{"line":3888,"column":102},"end":{"line":3897,"column":1}},"line":3888},"248":{"name":"(anonymous_248)","decl":{"start":{"line":3904,"column":77},"end":{"line":3904,"column":78}},"loc":{"start":{"line":3904,"column":88},"end":{"line":3906,"column":1}},"line":3904},"249":{"name":"(anonymous_249)","decl":{"start":{"line":3913,"column":77},"end":{"line":3913,"column":78}},"loc":{"start":{"line":3913,"column":93},"end":{"line":3915,"column":1}},"line":3913},"250":{"name":"(anonymous_250)","decl":{"start":{"line":3923,"column":73},"end":{"line":3923,"column":74}},"loc":{"start":{"line":3923,"column":100},"end":{"line":3925,"column":1}},"line":3923},"251":{"name":"(anonymous_251)","decl":{"start":{"line":3932,"column":79},"end":{"line":3932,"column":80}},"loc":{"start":{"line":3932,"column":90},"end":{"line":3934,"column":1}},"line":3932},"252":{"name":"(anonymous_252)","decl":{"start":{"line":3960,"column":70},"end":{"line":3960,"column":71}},"loc":{"start":{"line":3960,"column":100},"end":{"line":3962,"column":1}},"line":3960},"253":{"name":"(anonymous_253)","decl":{"start":{"line":3974,"column":60},"end":{"line":3974,"column":61}},"loc":{"start":{"line":3974,"column":91},"end":{"line":3983,"column":1}},"line":3974},"254":{"name":"(anonymous_254)","decl":{"start":{"line":3992,"column":69},"end":{"line":3992,"column":70}},"loc":{"start":{"line":3992,"column":85},"end":{"line":3996,"column":1}},"line":3992},"255":{"name":"(anonymous_255)","decl":{"start":{"line":4006,"column":79},"end":{"line":4006,"column":80}},"loc":{"start":{"line":4006,"column":101},"end":{"line":4023,"column":1}},"line":4006},"256":{"name":"(anonymous_256)","decl":{"start":{"line":4030,"column":77},"end":{"line":4030,"column":78}},"loc":{"start":{"line":4030,"column":88},"end":{"line":4034,"column":1}},"line":4030},"257":{"name":"(anonymous_257)","decl":{"start":{"line":4044,"column":75},"end":{"line":4044,"column":76}},"loc":{"start":{"line":4044,"column":101},"end":{"line":4053,"column":1}},"line":4044},"258":{"name":"(anonymous_258)","decl":{"start":{"line":4060,"column":76},"end":{"line":4060,"column":77}},"loc":{"start":{"line":4060,"column":87},"end":{"line":4062,"column":1}},"line":4060},"259":{"name":"(anonymous_259)","decl":{"start":{"line":4069,"column":76},"end":{"line":4069,"column":77}},"loc":{"start":{"line":4069,"column":92},"end":{"line":4071,"column":1}},"line":4069},"260":{"name":"(anonymous_260)","decl":{"start":{"line":4079,"column":72},"end":{"line":4079,"column":73}},"loc":{"start":{"line":4079,"column":99},"end":{"line":4081,"column":1}},"line":4079},"261":{"name":"(anonymous_261)","decl":{"start":{"line":4088,"column":78},"end":{"line":4088,"column":79}},"loc":{"start":{"line":4088,"column":89},"end":{"line":4090,"column":1}},"line":4088},"262":{"name":"(anonymous_262)","decl":{"start":{"line":4116,"column":66},"end":{"line":4116,"column":67}},"loc":{"start":{"line":4116,"column":96},"end":{"line":4118,"column":1}},"line":4116},"263":{"name":"(anonymous_263)","decl":{"start":{"line":4130,"column":56},"end":{"line":4130,"column":57}},"loc":{"start":{"line":4130,"column":87},"end":{"line":4141,"column":1}},"line":4130},"264":{"name":"(anonymous_264)","decl":{"start":{"line":4150,"column":65},"end":{"line":4150,"column":66}},"loc":{"start":{"line":4150,"column":81},"end":{"line":4154,"column":1}},"line":4150},"265":{"name":"(anonymous_265)","decl":{"start":{"line":4164,"column":75},"end":{"line":4164,"column":76}},"loc":{"start":{"line":4164,"column":97},"end":{"line":4186,"column":1}},"line":4164},"266":{"name":"(anonymous_266)","decl":{"start":{"line":4193,"column":73},"end":{"line":4193,"column":74}},"loc":{"start":{"line":4193,"column":84},"end":{"line":4197,"column":1}},"line":4193},"267":{"name":"(anonymous_267)","decl":{"start":{"line":4207,"column":71},"end":{"line":4207,"column":72}},"loc":{"start":{"line":4207,"column":97},"end":{"line":4224,"column":1}},"line":4207},"268":{"name":"(anonymous_268)","decl":{"start":{"line":4231,"column":71},"end":{"line":4231,"column":72}},"loc":{"start":{"line":4231,"column":82},"end":{"line":4234,"column":1}},"line":4231},"269":{"name":"(anonymous_269)","decl":{"start":{"line":4241,"column":71},"end":{"line":4241,"column":72}},"loc":{"start":{"line":4241,"column":87},"end":{"line":4243,"column":1}},"line":4241},"270":{"name":"(anonymous_270)","decl":{"start":{"line":4251,"column":67},"end":{"line":4251,"column":68}},"loc":{"start":{"line":4251,"column":98},"end":{"line":4253,"column":1}},"line":4251},"271":{"name":"(anonymous_271)","decl":{"start":{"line":4260,"column":73},"end":{"line":4260,"column":74}},"loc":{"start":{"line":4260,"column":84},"end":{"line":4262,"column":1}},"line":4260},"272":{"name":"(anonymous_272)","decl":{"start":{"line":4269,"column":82},"end":{"line":4269,"column":83}},"loc":{"start":{"line":4269,"column":93},"end":{"line":4271,"column":1}},"line":4269},"273":{"name":"(anonymous_273)","decl":{"start":{"line":4278,"column":82},"end":{"line":4278,"column":83}},"loc":{"start":{"line":4278,"column":98},"end":{"line":4280,"column":1}},"line":4278},"274":{"name":"(anonymous_274)","decl":{"start":{"line":4288,"column":78},"end":{"line":4288,"column":79}},"loc":{"start":{"line":4288,"column":105},"end":{"line":4290,"column":1}},"line":4288},"275":{"name":"(anonymous_275)","decl":{"start":{"line":4297,"column":84},"end":{"line":4297,"column":85}},"loc":{"start":{"line":4297,"column":95},"end":{"line":4299,"column":1}},"line":4297},"276":{"name":"(anonymous_276)","decl":{"start":{"line":4325,"column":61},"end":{"line":4325,"column":62}},"loc":{"start":{"line":4325,"column":91},"end":{"line":4327,"column":1}},"line":4325},"277":{"name":"(anonymous_277)","decl":{"start":{"line":4339,"column":51},"end":{"line":4339,"column":52}},"loc":{"start":{"line":4339,"column":82},"end":{"line":4349,"column":1}},"line":4339},"278":{"name":"(anonymous_278)","decl":{"start":{"line":4358,"column":60},"end":{"line":4358,"column":61}},"loc":{"start":{"line":4358,"column":76},"end":{"line":4362,"column":1}},"line":4358},"279":{"name":"(anonymous_279)","decl":{"start":{"line":4372,"column":70},"end":{"line":4372,"column":71}},"loc":{"start":{"line":4372,"column":92},"end":{"line":4393,"column":1}},"line":4372},"280":{"name":"(anonymous_280)","decl":{"start":{"line":4400,"column":68},"end":{"line":4400,"column":69}},"loc":{"start":{"line":4400,"column":79},"end":{"line":4404,"column":1}},"line":4400},"281":{"name":"(anonymous_281)","decl":{"start":{"line":4414,"column":66},"end":{"line":4414,"column":67}},"loc":{"start":{"line":4414,"column":92},"end":{"line":4430,"column":1}},"line":4414},"282":{"name":"(anonymous_282)","decl":{"start":{"line":4437,"column":60},"end":{"line":4437,"column":61}},"loc":{"start":{"line":4437,"column":71},"end":{"line":4439,"column":1}},"line":4437},"283":{"name":"(anonymous_283)","decl":{"start":{"line":4446,"column":60},"end":{"line":4446,"column":61}},"loc":{"start":{"line":4446,"column":76},"end":{"line":4448,"column":1}},"line":4446},"284":{"name":"(anonymous_284)","decl":{"start":{"line":4455,"column":67},"end":{"line":4455,"column":68}},"loc":{"start":{"line":4455,"column":78},"end":{"line":4457,"column":1}},"line":4455},"285":{"name":"(anonymous_285)","decl":{"start":{"line":4464,"column":67},"end":{"line":4464,"column":68}},"loc":{"start":{"line":4464,"column":83},"end":{"line":4466,"column":1}},"line":4464},"286":{"name":"(anonymous_286)","decl":{"start":{"line":4474,"column":63},"end":{"line":4474,"column":64}},"loc":{"start":{"line":4474,"column":90},"end":{"line":4476,"column":1}},"line":4474},"287":{"name":"(anonymous_287)","decl":{"start":{"line":4483,"column":69},"end":{"line":4483,"column":70}},"loc":{"start":{"line":4483,"column":80},"end":{"line":4485,"column":1}},"line":4483}},"branchMap":{"0":{"loc":{"start":{"line":55,"column":0},"end":{"line":61,"column":1}},"type":"if","locations":[{"start":{"line":55,"column":0},"end":{"line":61,"column":1}},{"start":{"line":55,"column":0},"end":{"line":61,"column":1}}],"line":55},"1":{"loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":27}},"type":"binary-expr","locations":[{"start":{"line":55,"column":4},"end":{"line":55,"column":14}},{"start":{"line":55,"column":18},"end":{"line":55,"column":27}}],"line":55},"2":{"loc":{"start":{"line":76,"column":0},"end":{"line":82,"column":1}},"type":"if","locations":[{"start":{"line":76,"column":0},"end":{"line":82,"column":1}},{"start":{"line":76,"column":0},"end":{"line":82,"column":1}}],"line":76},"3":{"loc":{"start":{"line":76,"column":4},"end":{"line":76,"column":27}},"type":"binary-expr","locations":[{"start":{"line":76,"column":4},"end":{"line":76,"column":14}},{"start":{"line":76,"column":18},"end":{"line":76,"column":27}}],"line":76},"4":{"loc":{"start":{"line":97,"column":0},"end":{"line":103,"column":1}},"type":"if","locations":[{"start":{"line":97,"column":0},"end":{"line":103,"column":1}},{"start":{"line":97,"column":0},"end":{"line":103,"column":1}}],"line":97},"5":{"loc":{"start":{"line":97,"column":4},"end":{"line":97,"column":27}},"type":"binary-expr","locations":[{"start":{"line":97,"column":4},"end":{"line":97,"column":14}},{"start":{"line":97,"column":18},"end":{"line":97,"column":27}}],"line":97},"6":{"loc":{"start":{"line":118,"column":0},"end":{"line":124,"column":1}},"type":"if","locations":[{"start":{"line":118,"column":0},"end":{"line":124,"column":1}},{"start":{"line":118,"column":0},"end":{"line":124,"column":1}}],"line":118},"7":{"loc":{"start":{"line":118,"column":4},"end":{"line":118,"column":27}},"type":"binary-expr","locations":[{"start":{"line":118,"column":4},"end":{"line":118,"column":14}},{"start":{"line":118,"column":18},"end":{"line":118,"column":27}}],"line":118},"8":{"loc":{"start":{"line":139,"column":0},"end":{"line":145,"column":1}},"type":"if","locations":[{"start":{"line":139,"column":0},"end":{"line":145,"column":1}},{"start":{"line":139,"column":0},"end":{"line":145,"column":1}}],"line":139},"9":{"loc":{"start":{"line":139,"column":4},"end":{"line":139,"column":27}},"type":"binary-expr","locations":[{"start":{"line":139,"column":4},"end":{"line":139,"column":14}},{"start":{"line":139,"column":18},"end":{"line":139,"column":27}}],"line":139},"10":{"loc":{"start":{"line":160,"column":0},"end":{"line":166,"column":1}},"type":"if","locations":[{"start":{"line":160,"column":0},"end":{"line":166,"column":1}},{"start":{"line":160,"column":0},"end":{"line":166,"column":1}}],"line":160},"11":{"loc":{"start":{"line":160,"column":4},"end":{"line":160,"column":27}},"type":"binary-expr","locations":[{"start":{"line":160,"column":4},"end":{"line":160,"column":14}},{"start":{"line":160,"column":18},"end":{"line":160,"column":27}}],"line":160},"12":{"loc":{"start":{"line":181,"column":0},"end":{"line":187,"column":1}},"type":"if","locations":[{"start":{"line":181,"column":0},"end":{"line":187,"column":1}},{"start":{"line":181,"column":0},"end":{"line":187,"column":1}}],"line":181},"13":{"loc":{"start":{"line":181,"column":4},"end":{"line":181,"column":27}},"type":"binary-expr","locations":[{"start":{"line":181,"column":4},"end":{"line":181,"column":14}},{"start":{"line":181,"column":18},"end":{"line":181,"column":27}}],"line":181},"14":{"loc":{"start":{"line":202,"column":0},"end":{"line":208,"column":1}},"type":"if","locations":[{"start":{"line":202,"column":0},"end":{"line":208,"column":1}},{"start":{"line":202,"column":0},"end":{"line":208,"column":1}}],"line":202},"15":{"loc":{"start":{"line":202,"column":4},"end":{"line":202,"column":27}},"type":"binary-expr","locations":[{"start":{"line":202,"column":4},"end":{"line":202,"column":14}},{"start":{"line":202,"column":18},"end":{"line":202,"column":27}}],"line":202},"16":{"loc":{"start":{"line":223,"column":0},"end":{"line":229,"column":1}},"type":"if","locations":[{"start":{"line":223,"column":0},"end":{"line":229,"column":1}},{"start":{"line":223,"column":0},"end":{"line":229,"column":1}}],"line":223},"17":{"loc":{"start":{"line":223,"column":4},"end":{"line":223,"column":27}},"type":"binary-expr","locations":[{"start":{"line":223,"column":4},"end":{"line":223,"column":14}},{"start":{"line":223,"column":18},"end":{"line":223,"column":27}}],"line":223},"18":{"loc":{"start":{"line":244,"column":0},"end":{"line":250,"column":1}},"type":"if","locations":[{"start":{"line":244,"column":0},"end":{"line":250,"column":1}},{"start":{"line":244,"column":0},"end":{"line":250,"column":1}}],"line":244},"19":{"loc":{"start":{"line":244,"column":4},"end":{"line":244,"column":27}},"type":"binary-expr","locations":[{"start":{"line":244,"column":4},"end":{"line":244,"column":14}},{"start":{"line":244,"column":18},"end":{"line":244,"column":27}}],"line":244},"20":{"loc":{"start":{"line":265,"column":0},"end":{"line":271,"column":1}},"type":"if","locations":[{"start":{"line":265,"column":0},"end":{"line":271,"column":1}},{"start":{"line":265,"column":0},"end":{"line":271,"column":1}}],"line":265},"21":{"loc":{"start":{"line":265,"column":4},"end":{"line":265,"column":27}},"type":"binary-expr","locations":[{"start":{"line":265,"column":4},"end":{"line":265,"column":14}},{"start":{"line":265,"column":18},"end":{"line":265,"column":27}}],"line":265},"22":{"loc":{"start":{"line":286,"column":0},"end":{"line":292,"column":1}},"type":"if","locations":[{"start":{"line":286,"column":0},"end":{"line":292,"column":1}},{"start":{"line":286,"column":0},"end":{"line":292,"column":1}}],"line":286},"23":{"loc":{"start":{"line":286,"column":4},"end":{"line":286,"column":27}},"type":"binary-expr","locations":[{"start":{"line":286,"column":4},"end":{"line":286,"column":14}},{"start":{"line":286,"column":18},"end":{"line":286,"column":27}}],"line":286},"24":{"loc":{"start":{"line":307,"column":0},"end":{"line":313,"column":1}},"type":"if","locations":[{"start":{"line":307,"column":0},"end":{"line":313,"column":1}},{"start":{"line":307,"column":0},"end":{"line":313,"column":1}}],"line":307},"25":{"loc":{"start":{"line":307,"column":4},"end":{"line":307,"column":27}},"type":"binary-expr","locations":[{"start":{"line":307,"column":4},"end":{"line":307,"column":14}},{"start":{"line":307,"column":18},"end":{"line":307,"column":27}}],"line":307},"26":{"loc":{"start":{"line":328,"column":0},"end":{"line":334,"column":1}},"type":"if","locations":[{"start":{"line":328,"column":0},"end":{"line":334,"column":1}},{"start":{"line":328,"column":0},"end":{"line":334,"column":1}}],"line":328},"27":{"loc":{"start":{"line":328,"column":4},"end":{"line":328,"column":27}},"type":"binary-expr","locations":[{"start":{"line":328,"column":4},"end":{"line":328,"column":14}},{"start":{"line":328,"column":18},"end":{"line":328,"column":27}}],"line":328},"28":{"loc":{"start":{"line":349,"column":0},"end":{"line":355,"column":1}},"type":"if","locations":[{"start":{"line":349,"column":0},"end":{"line":355,"column":1}},{"start":{"line":349,"column":0},"end":{"line":355,"column":1}}],"line":349},"29":{"loc":{"start":{"line":349,"column":4},"end":{"line":349,"column":27}},"type":"binary-expr","locations":[{"start":{"line":349,"column":4},"end":{"line":349,"column":14}},{"start":{"line":349,"column":18},"end":{"line":349,"column":27}}],"line":349},"30":{"loc":{"start":{"line":370,"column":0},"end":{"line":376,"column":1}},"type":"if","locations":[{"start":{"line":370,"column":0},"end":{"line":376,"column":1}},{"start":{"line":370,"column":0},"end":{"line":376,"column":1}}],"line":370},"31":{"loc":{"start":{"line":370,"column":4},"end":{"line":370,"column":27}},"type":"binary-expr","locations":[{"start":{"line":370,"column":4},"end":{"line":370,"column":14}},{"start":{"line":370,"column":18},"end":{"line":370,"column":27}}],"line":370},"32":{"loc":{"start":{"line":391,"column":0},"end":{"line":397,"column":1}},"type":"if","locations":[{"start":{"line":391,"column":0},"end":{"line":397,"column":1}},{"start":{"line":391,"column":0},"end":{"line":397,"column":1}}],"line":391},"33":{"loc":{"start":{"line":391,"column":4},"end":{"line":391,"column":27}},"type":"binary-expr","locations":[{"start":{"line":391,"column":4},"end":{"line":391,"column":14}},{"start":{"line":391,"column":18},"end":{"line":391,"column":27}}],"line":391},"34":{"loc":{"start":{"line":401,"column":0},"end":{"line":439,"column":1}},"type":"if","locations":[{"start":{"line":401,"column":0},"end":{"line":439,"column":1}},{"start":{"line":401,"column":0},"end":{"line":439,"column":1}}],"line":401},"35":{"loc":{"start":{"line":434,"column":2},"end":{"line":436,"column":3}},"type":"if","locations":[{"start":{"line":434,"column":2},"end":{"line":436,"column":3}},{"start":{"line":434,"column":2},"end":{"line":436,"column":3}}],"line":434},"36":{"loc":{"start":{"line":463,"column":4},"end":{"line":465,"column":5}},"type":"if","locations":[{"start":{"line":463,"column":4},"end":{"line":465,"column":5}},{"start":{"line":463,"column":4},"end":{"line":465,"column":5}}],"line":463},"37":{"loc":{"start":{"line":467,"column":4},"end":{"line":479,"column":5}},"type":"switch","locations":[{"start":{"line":468,"column":4},"end":{"line":471,"column":12}},{"start":{"line":472,"column":4},"end":{"line":475,"column":12}},{"start":{"line":476,"column":4},"end":{"line":478,"column":12}}],"line":467},"38":{"loc":{"start":{"line":506,"column":2},"end":{"line":511,"column":3}},"type":"if","locations":[{"start":{"line":506,"column":2},"end":{"line":511,"column":3}},{"start":{"line":506,"column":2},"end":{"line":511,"column":3}}],"line":506},"39":{"loc":{"start":{"line":513,"column":2},"end":{"line":518,"column":3}},"type":"if","locations":[{"start":{"line":513,"column":2},"end":{"line":518,"column":3}},{"start":{"line":513,"column":2},"end":{"line":518,"column":3}}],"line":513},"40":{"loc":{"start":{"line":561,"column":0},"end":{"line":601,"column":1}},"type":"if","locations":[{"start":{"line":561,"column":0},"end":{"line":601,"column":1}},{"start":{"line":561,"column":0},"end":{"line":601,"column":1}}],"line":561},"41":{"loc":{"start":{"line":596,"column":2},"end":{"line":598,"column":3}},"type":"if","locations":[{"start":{"line":596,"column":2},"end":{"line":598,"column":3}},{"start":{"line":596,"column":2},"end":{"line":598,"column":3}}],"line":596},"42":{"loc":{"start":{"line":625,"column":4},"end":{"line":627,"column":5}},"type":"if","locations":[{"start":{"line":625,"column":4},"end":{"line":627,"column":5}},{"start":{"line":625,"column":4},"end":{"line":627,"column":5}}],"line":625},"43":{"loc":{"start":{"line":629,"column":4},"end":{"line":649,"column":5}},"type":"switch","locations":[{"start":{"line":630,"column":4},"end":{"line":633,"column":12}},{"start":{"line":634,"column":4},"end":{"line":637,"column":12}},{"start":{"line":638,"column":4},"end":{"line":641,"column":12}},{"start":{"line":642,"column":4},"end":{"line":645,"column":12}},{"start":{"line":646,"column":4},"end":{"line":648,"column":12}}],"line":629},"44":{"loc":{"start":{"line":676,"column":2},"end":{"line":681,"column":3}},"type":"if","locations":[{"start":{"line":676,"column":2},"end":{"line":681,"column":3}},{"start":{"line":676,"column":2},"end":{"line":681,"column":3}}],"line":676},"45":{"loc":{"start":{"line":683,"column":2},"end":{"line":688,"column":3}},"type":"if","locations":[{"start":{"line":683,"column":2},"end":{"line":688,"column":3}},{"start":{"line":683,"column":2},"end":{"line":688,"column":3}}],"line":683},"46":{"loc":{"start":{"line":690,"column":2},"end":{"line":695,"column":3}},"type":"if","locations":[{"start":{"line":690,"column":2},"end":{"line":695,"column":3}},{"start":{"line":690,"column":2},"end":{"line":695,"column":3}}],"line":690},"47":{"loc":{"start":{"line":697,"column":2},"end":{"line":702,"column":3}},"type":"if","locations":[{"start":{"line":697,"column":2},"end":{"line":702,"column":3}},{"start":{"line":697,"column":2},"end":{"line":702,"column":3}}],"line":697},"48":{"loc":{"start":{"line":781,"column":0},"end":{"line":821,"column":1}},"type":"if","locations":[{"start":{"line":781,"column":0},"end":{"line":821,"column":1}},{"start":{"line":781,"column":0},"end":{"line":821,"column":1}}],"line":781},"49":{"loc":{"start":{"line":816,"column":2},"end":{"line":818,"column":3}},"type":"if","locations":[{"start":{"line":816,"column":2},"end":{"line":818,"column":3}},{"start":{"line":816,"column":2},"end":{"line":818,"column":3}}],"line":816},"50":{"loc":{"start":{"line":845,"column":4},"end":{"line":847,"column":5}},"type":"if","locations":[{"start":{"line":845,"column":4},"end":{"line":847,"column":5}},{"start":{"line":845,"column":4},"end":{"line":847,"column":5}}],"line":845},"51":{"loc":{"start":{"line":849,"column":4},"end":{"line":869,"column":5}},"type":"switch","locations":[{"start":{"line":850,"column":4},"end":{"line":853,"column":12}},{"start":{"line":854,"column":4},"end":{"line":857,"column":12}},{"start":{"line":858,"column":4},"end":{"line":861,"column":12}},{"start":{"line":862,"column":4},"end":{"line":865,"column":12}},{"start":{"line":866,"column":4},"end":{"line":868,"column":12}}],"line":849},"52":{"loc":{"start":{"line":896,"column":2},"end":{"line":901,"column":3}},"type":"if","locations":[{"start":{"line":896,"column":2},"end":{"line":901,"column":3}},{"start":{"line":896,"column":2},"end":{"line":901,"column":3}}],"line":896},"53":{"loc":{"start":{"line":903,"column":2},"end":{"line":908,"column":3}},"type":"if","locations":[{"start":{"line":903,"column":2},"end":{"line":908,"column":3}},{"start":{"line":903,"column":2},"end":{"line":908,"column":3}}],"line":903},"54":{"loc":{"start":{"line":910,"column":2},"end":{"line":915,"column":3}},"type":"if","locations":[{"start":{"line":910,"column":2},"end":{"line":915,"column":3}},{"start":{"line":910,"column":2},"end":{"line":915,"column":3}}],"line":910},"55":{"loc":{"start":{"line":917,"column":2},"end":{"line":922,"column":3}},"type":"if","locations":[{"start":{"line":917,"column":2},"end":{"line":922,"column":3}},{"start":{"line":917,"column":2},"end":{"line":922,"column":3}}],"line":917},"56":{"loc":{"start":{"line":1001,"column":0},"end":{"line":1047,"column":1}},"type":"if","locations":[{"start":{"line":1001,"column":0},"end":{"line":1047,"column":1}},{"start":{"line":1001,"column":0},"end":{"line":1047,"column":1}}],"line":1001},"57":{"loc":{"start":{"line":1042,"column":2},"end":{"line":1044,"column":3}},"type":"if","locations":[{"start":{"line":1042,"column":2},"end":{"line":1044,"column":3}},{"start":{"line":1042,"column":2},"end":{"line":1044,"column":3}}],"line":1042},"58":{"loc":{"start":{"line":1071,"column":4},"end":{"line":1073,"column":5}},"type":"if","locations":[{"start":{"line":1071,"column":4},"end":{"line":1073,"column":5}},{"start":{"line":1071,"column":4},"end":{"line":1073,"column":5}}],"line":1071},"59":{"loc":{"start":{"line":1075,"column":4},"end":{"line":1119,"column":5}},"type":"switch","locations":[{"start":{"line":1076,"column":4},"end":{"line":1079,"column":12}},{"start":{"line":1080,"column":4},"end":{"line":1083,"column":12}},{"start":{"line":1084,"column":4},"end":{"line":1087,"column":12}},{"start":{"line":1088,"column":4},"end":{"line":1091,"column":12}},{"start":{"line":1092,"column":4},"end":{"line":1095,"column":12}},{"start":{"line":1096,"column":4},"end":{"line":1099,"column":12}},{"start":{"line":1100,"column":4},"end":{"line":1103,"column":12}},{"start":{"line":1104,"column":4},"end":{"line":1107,"column":12}},{"start":{"line":1108,"column":4},"end":{"line":1111,"column":12}},{"start":{"line":1112,"column":4},"end":{"line":1115,"column":12}},{"start":{"line":1116,"column":4},"end":{"line":1118,"column":12}}],"line":1075},"60":{"loc":{"start":{"line":1146,"column":2},"end":{"line":1151,"column":3}},"type":"if","locations":[{"start":{"line":1146,"column":2},"end":{"line":1151,"column":3}},{"start":{"line":1146,"column":2},"end":{"line":1151,"column":3}}],"line":1146},"61":{"loc":{"start":{"line":1153,"column":2},"end":{"line":1158,"column":3}},"type":"if","locations":[{"start":{"line":1153,"column":2},"end":{"line":1158,"column":3}},{"start":{"line":1153,"column":2},"end":{"line":1158,"column":3}}],"line":1153},"62":{"loc":{"start":{"line":1160,"column":2},"end":{"line":1165,"column":3}},"type":"if","locations":[{"start":{"line":1160,"column":2},"end":{"line":1165,"column":3}},{"start":{"line":1160,"column":2},"end":{"line":1165,"column":3}}],"line":1160},"63":{"loc":{"start":{"line":1167,"column":2},"end":{"line":1172,"column":3}},"type":"if","locations":[{"start":{"line":1167,"column":2},"end":{"line":1172,"column":3}},{"start":{"line":1167,"column":2},"end":{"line":1172,"column":3}}],"line":1167},"64":{"loc":{"start":{"line":1174,"column":2},"end":{"line":1179,"column":3}},"type":"if","locations":[{"start":{"line":1174,"column":2},"end":{"line":1179,"column":3}},{"start":{"line":1174,"column":2},"end":{"line":1179,"column":3}}],"line":1174},"65":{"loc":{"start":{"line":1181,"column":2},"end":{"line":1186,"column":3}},"type":"if","locations":[{"start":{"line":1181,"column":2},"end":{"line":1186,"column":3}},{"start":{"line":1181,"column":2},"end":{"line":1186,"column":3}}],"line":1181},"66":{"loc":{"start":{"line":1188,"column":2},"end":{"line":1193,"column":3}},"type":"if","locations":[{"start":{"line":1188,"column":2},"end":{"line":1193,"column":3}},{"start":{"line":1188,"column":2},"end":{"line":1193,"column":3}}],"line":1188},"67":{"loc":{"start":{"line":1195,"column":2},"end":{"line":1200,"column":3}},"type":"if","locations":[{"start":{"line":1195,"column":2},"end":{"line":1200,"column":3}},{"start":{"line":1195,"column":2},"end":{"line":1200,"column":3}}],"line":1195},"68":{"loc":{"start":{"line":1202,"column":2},"end":{"line":1207,"column":3}},"type":"if","locations":[{"start":{"line":1202,"column":2},"end":{"line":1207,"column":3}},{"start":{"line":1202,"column":2},"end":{"line":1207,"column":3}}],"line":1202},"69":{"loc":{"start":{"line":1209,"column":2},"end":{"line":1214,"column":3}},"type":"if","locations":[{"start":{"line":1209,"column":2},"end":{"line":1214,"column":3}},{"start":{"line":1209,"column":2},"end":{"line":1214,"column":3}}],"line":1209},"70":{"loc":{"start":{"line":1408,"column":0},"end":{"line":1446,"column":1}},"type":"if","locations":[{"start":{"line":1408,"column":0},"end":{"line":1446,"column":1}},{"start":{"line":1408,"column":0},"end":{"line":1446,"column":1}}],"line":1408},"71":{"loc":{"start":{"line":1438,"column":35},"end":{"line":1438,"column":102}},"type":"cond-expr","locations":[{"start":{"line":1438,"column":89},"end":{"line":1438,"column":98}},{"start":{"line":1438,"column":101},"end":{"line":1438,"column":102}}],"line":1438},"72":{"loc":{"start":{"line":1441,"column":2},"end":{"line":1443,"column":3}},"type":"if","locations":[{"start":{"line":1441,"column":2},"end":{"line":1443,"column":3}},{"start":{"line":1441,"column":2},"end":{"line":1443,"column":3}}],"line":1441},"73":{"loc":{"start":{"line":1470,"column":4},"end":{"line":1472,"column":5}},"type":"if","locations":[{"start":{"line":1470,"column":4},"end":{"line":1472,"column":5}},{"start":{"line":1470,"column":4},"end":{"line":1472,"column":5}}],"line":1470},"74":{"loc":{"start":{"line":1474,"column":4},"end":{"line":1486,"column":5}},"type":"switch","locations":[{"start":{"line":1475,"column":4},"end":{"line":1478,"column":12}},{"start":{"line":1479,"column":4},"end":{"line":1482,"column":12}},{"start":{"line":1483,"column":4},"end":{"line":1485,"column":12}}],"line":1474},"75":{"loc":{"start":{"line":1513,"column":2},"end":{"line":1518,"column":3}},"type":"if","locations":[{"start":{"line":1513,"column":2},"end":{"line":1518,"column":3}},{"start":{"line":1513,"column":2},"end":{"line":1518,"column":3}}],"line":1513},"76":{"loc":{"start":{"line":1520,"column":2},"end":{"line":1525,"column":3}},"type":"if","locations":[{"start":{"line":1520,"column":2},"end":{"line":1525,"column":3}},{"start":{"line":1520,"column":2},"end":{"line":1525,"column":3}}],"line":1520},"77":{"loc":{"start":{"line":1561,"column":40},"end":{"line":1561,"column":51}},"type":"binary-expr","locations":[{"start":{"line":1561,"column":40},"end":{"line":1561,"column":45}},{"start":{"line":1561,"column":49},"end":{"line":1561,"column":51}}],"line":1561},"78":{"loc":{"start":{"line":1615,"column":0},"end":{"line":1657,"column":1}},"type":"if","locations":[{"start":{"line":1615,"column":0},"end":{"line":1657,"column":1}},{"start":{"line":1615,"column":0},"end":{"line":1657,"column":1}}],"line":1615},"79":{"loc":{"start":{"line":1645,"column":18},"end":{"line":1645,"column":115}},"type":"binary-expr","locations":[{"start":{"line":1645,"column":19},"end":{"line":1645,"column":44}},{"start":{"line":1645,"column":49},"end":{"line":1645,"column":115}}],"line":1645},"80":{"loc":{"start":{"line":1646,"column":12},"end":{"line":1646,"column":97}},"type":"binary-expr","locations":[{"start":{"line":1646,"column":13},"end":{"line":1646,"column":32}},{"start":{"line":1646,"column":37},"end":{"line":1646,"column":97}}],"line":1646},"81":{"loc":{"start":{"line":1647,"column":14},"end":{"line":1647,"column":97}},"type":"binary-expr","locations":[{"start":{"line":1647,"column":15},"end":{"line":1647,"column":33}},{"start":{"line":1647,"column":38},"end":{"line":1647,"column":97}}],"line":1647},"82":{"loc":{"start":{"line":1648,"column":10},"end":{"line":1648,"column":91}},"type":"binary-expr","locations":[{"start":{"line":1648,"column":11},"end":{"line":1648,"column":28}},{"start":{"line":1648,"column":33},"end":{"line":1648,"column":91}}],"line":1648},"83":{"loc":{"start":{"line":1649,"column":14},"end":{"line":1649,"column":109}},"type":"binary-expr","locations":[{"start":{"line":1649,"column":15},"end":{"line":1649,"column":36}},{"start":{"line":1649,"column":41},"end":{"line":1649,"column":109}}],"line":1649},"84":{"loc":{"start":{"line":1652,"column":2},"end":{"line":1654,"column":3}},"type":"if","locations":[{"start":{"line":1652,"column":2},"end":{"line":1654,"column":3}},{"start":{"line":1652,"column":2},"end":{"line":1654,"column":3}}],"line":1652},"85":{"loc":{"start":{"line":1681,"column":4},"end":{"line":1683,"column":5}},"type":"if","locations":[{"start":{"line":1681,"column":4},"end":{"line":1683,"column":5}},{"start":{"line":1681,"column":4},"end":{"line":1683,"column":5}}],"line":1681},"86":{"loc":{"start":{"line":1685,"column":4},"end":{"line":1718,"column":5}},"type":"switch","locations":[{"start":{"line":1686,"column":4},"end":{"line":1689,"column":12}},{"start":{"line":1690,"column":4},"end":{"line":1694,"column":12}},{"start":{"line":1695,"column":4},"end":{"line":1699,"column":12}},{"start":{"line":1700,"column":4},"end":{"line":1704,"column":12}},{"start":{"line":1705,"column":4},"end":{"line":1709,"column":12}},{"start":{"line":1710,"column":4},"end":{"line":1714,"column":12}},{"start":{"line":1715,"column":4},"end":{"line":1717,"column":12}}],"line":1685},"87":{"loc":{"start":{"line":1745,"column":2},"end":{"line":1750,"column":3}},"type":"if","locations":[{"start":{"line":1745,"column":2},"end":{"line":1750,"column":3}},{"start":{"line":1745,"column":2},"end":{"line":1750,"column":3}}],"line":1745},"88":{"loc":{"start":{"line":1752,"column":2},"end":{"line":1758,"column":3}},"type":"if","locations":[{"start":{"line":1752,"column":2},"end":{"line":1758,"column":3}},{"start":{"line":1752,"column":2},"end":{"line":1758,"column":3}}],"line":1752},"89":{"loc":{"start":{"line":1760,"column":2},"end":{"line":1766,"column":3}},"type":"if","locations":[{"start":{"line":1760,"column":2},"end":{"line":1766,"column":3}},{"start":{"line":1760,"column":2},"end":{"line":1766,"column":3}}],"line":1760},"90":{"loc":{"start":{"line":1768,"column":2},"end":{"line":1774,"column":3}},"type":"if","locations":[{"start":{"line":1768,"column":2},"end":{"line":1774,"column":3}},{"start":{"line":1768,"column":2},"end":{"line":1774,"column":3}}],"line":1768},"91":{"loc":{"start":{"line":1776,"column":2},"end":{"line":1782,"column":3}},"type":"if","locations":[{"start":{"line":1776,"column":2},"end":{"line":1782,"column":3}},{"start":{"line":1776,"column":2},"end":{"line":1782,"column":3}}],"line":1776},"92":{"loc":{"start":{"line":1784,"column":2},"end":{"line":1790,"column":3}},"type":"if","locations":[{"start":{"line":1784,"column":2},"end":{"line":1790,"column":3}},{"start":{"line":1784,"column":2},"end":{"line":1790,"column":3}}],"line":1784},"93":{"loc":{"start":{"line":2029,"column":0},"end":{"line":2072,"column":1}},"type":"if","locations":[{"start":{"line":2029,"column":0},"end":{"line":2072,"column":1}},{"start":{"line":2029,"column":0},"end":{"line":2072,"column":1}}],"line":2029},"94":{"loc":{"start":{"line":2060,"column":18},"end":{"line":2060,"column":115}},"type":"binary-expr","locations":[{"start":{"line":2060,"column":19},"end":{"line":2060,"column":44}},{"start":{"line":2060,"column":49},"end":{"line":2060,"column":115}}],"line":2060},"95":{"loc":{"start":{"line":2061,"column":18},"end":{"line":2061,"column":115}},"type":"binary-expr","locations":[{"start":{"line":2061,"column":19},"end":{"line":2061,"column":44}},{"start":{"line":2061,"column":49},"end":{"line":2061,"column":115}}],"line":2061},"96":{"loc":{"start":{"line":2062,"column":12},"end":{"line":2062,"column":97}},"type":"binary-expr","locations":[{"start":{"line":2062,"column":13},"end":{"line":2062,"column":32}},{"start":{"line":2062,"column":37},"end":{"line":2062,"column":97}}],"line":2062},"97":{"loc":{"start":{"line":2063,"column":14},"end":{"line":2063,"column":97}},"type":"binary-expr","locations":[{"start":{"line":2063,"column":15},"end":{"line":2063,"column":33}},{"start":{"line":2063,"column":38},"end":{"line":2063,"column":97}}],"line":2063},"98":{"loc":{"start":{"line":2064,"column":10},"end":{"line":2064,"column":91}},"type":"binary-expr","locations":[{"start":{"line":2064,"column":11},"end":{"line":2064,"column":28}},{"start":{"line":2064,"column":33},"end":{"line":2064,"column":91}}],"line":2064},"99":{"loc":{"start":{"line":2067,"column":2},"end":{"line":2069,"column":3}},"type":"if","locations":[{"start":{"line":2067,"column":2},"end":{"line":2069,"column":3}},{"start":{"line":2067,"column":2},"end":{"line":2069,"column":3}}],"line":2067},"100":{"loc":{"start":{"line":2096,"column":4},"end":{"line":2098,"column":5}},"type":"if","locations":[{"start":{"line":2096,"column":4},"end":{"line":2098,"column":5}},{"start":{"line":2096,"column":4},"end":{"line":2098,"column":5}}],"line":2096},"101":{"loc":{"start":{"line":2100,"column":4},"end":{"line":2137,"column":5}},"type":"switch","locations":[{"start":{"line":2101,"column":4},"end":{"line":2104,"column":12}},{"start":{"line":2105,"column":4},"end":{"line":2108,"column":12}},{"start":{"line":2109,"column":4},"end":{"line":2113,"column":12}},{"start":{"line":2114,"column":4},"end":{"line":2118,"column":12}},{"start":{"line":2119,"column":4},"end":{"line":2123,"column":12}},{"start":{"line":2124,"column":4},"end":{"line":2128,"column":12}},{"start":{"line":2129,"column":4},"end":{"line":2133,"column":12}},{"start":{"line":2134,"column":4},"end":{"line":2136,"column":12}}],"line":2100},"102":{"loc":{"start":{"line":2164,"column":2},"end":{"line":2169,"column":3}},"type":"if","locations":[{"start":{"line":2164,"column":2},"end":{"line":2169,"column":3}},{"start":{"line":2164,"column":2},"end":{"line":2169,"column":3}}],"line":2164},"103":{"loc":{"start":{"line":2171,"column":2},"end":{"line":2176,"column":3}},"type":"if","locations":[{"start":{"line":2171,"column":2},"end":{"line":2176,"column":3}},{"start":{"line":2171,"column":2},"end":{"line":2176,"column":3}}],"line":2171},"104":{"loc":{"start":{"line":2178,"column":2},"end":{"line":2184,"column":3}},"type":"if","locations":[{"start":{"line":2178,"column":2},"end":{"line":2184,"column":3}},{"start":{"line":2178,"column":2},"end":{"line":2184,"column":3}}],"line":2178},"105":{"loc":{"start":{"line":2186,"column":2},"end":{"line":2192,"column":3}},"type":"if","locations":[{"start":{"line":2186,"column":2},"end":{"line":2192,"column":3}},{"start":{"line":2186,"column":2},"end":{"line":2192,"column":3}}],"line":2186},"106":{"loc":{"start":{"line":2194,"column":2},"end":{"line":2200,"column":3}},"type":"if","locations":[{"start":{"line":2194,"column":2},"end":{"line":2200,"column":3}},{"start":{"line":2194,"column":2},"end":{"line":2200,"column":3}}],"line":2194},"107":{"loc":{"start":{"line":2202,"column":2},"end":{"line":2208,"column":3}},"type":"if","locations":[{"start":{"line":2202,"column":2},"end":{"line":2208,"column":3}},{"start":{"line":2202,"column":2},"end":{"line":2208,"column":3}}],"line":2202},"108":{"loc":{"start":{"line":2210,"column":2},"end":{"line":2216,"column":3}},"type":"if","locations":[{"start":{"line":2210,"column":2},"end":{"line":2216,"column":3}},{"start":{"line":2210,"column":2},"end":{"line":2216,"column":3}}],"line":2210},"109":{"loc":{"start":{"line":2451,"column":0},"end":{"line":2489,"column":1}},"type":"if","locations":[{"start":{"line":2451,"column":0},"end":{"line":2489,"column":1}},{"start":{"line":2451,"column":0},"end":{"line":2489,"column":1}}],"line":2451},"110":{"loc":{"start":{"line":2484,"column":2},"end":{"line":2486,"column":3}},"type":"if","locations":[{"start":{"line":2484,"column":2},"end":{"line":2486,"column":3}},{"start":{"line":2484,"column":2},"end":{"line":2486,"column":3}}],"line":2484},"111":{"loc":{"start":{"line":2513,"column":4},"end":{"line":2515,"column":5}},"type":"if","locations":[{"start":{"line":2513,"column":4},"end":{"line":2515,"column":5}},{"start":{"line":2513,"column":4},"end":{"line":2515,"column":5}}],"line":2513},"112":{"loc":{"start":{"line":2517,"column":4},"end":{"line":2526,"column":5}},"type":"switch","locations":[{"start":{"line":2518,"column":4},"end":{"line":2522,"column":12}},{"start":{"line":2523,"column":4},"end":{"line":2525,"column":12}}],"line":2517},"113":{"loc":{"start":{"line":2553,"column":2},"end":{"line":2559,"column":3}},"type":"if","locations":[{"start":{"line":2553,"column":2},"end":{"line":2559,"column":3}},{"start":{"line":2553,"column":2},"end":{"line":2559,"column":3}}],"line":2553},"114":{"loc":{"start":{"line":2611,"column":0},"end":{"line":2649,"column":1}},"type":"if","locations":[{"start":{"line":2611,"column":0},"end":{"line":2649,"column":1}},{"start":{"line":2611,"column":0},"end":{"line":2649,"column":1}}],"line":2611},"115":{"loc":{"start":{"line":2644,"column":2},"end":{"line":2646,"column":3}},"type":"if","locations":[{"start":{"line":2644,"column":2},"end":{"line":2646,"column":3}},{"start":{"line":2644,"column":2},"end":{"line":2646,"column":3}}],"line":2644},"116":{"loc":{"start":{"line":2673,"column":4},"end":{"line":2675,"column":5}},"type":"if","locations":[{"start":{"line":2673,"column":4},"end":{"line":2675,"column":5}},{"start":{"line":2673,"column":4},"end":{"line":2675,"column":5}}],"line":2673},"117":{"loc":{"start":{"line":2677,"column":4},"end":{"line":2686,"column":5}},"type":"switch","locations":[{"start":{"line":2678,"column":4},"end":{"line":2682,"column":12}},{"start":{"line":2683,"column":4},"end":{"line":2685,"column":12}}],"line":2677},"118":{"loc":{"start":{"line":2713,"column":2},"end":{"line":2719,"column":3}},"type":"if","locations":[{"start":{"line":2713,"column":2},"end":{"line":2719,"column":3}},{"start":{"line":2713,"column":2},"end":{"line":2719,"column":3}}],"line":2713},"119":{"loc":{"start":{"line":2764,"column":0},"end":{"line":2805,"column":1}},"type":"if","locations":[{"start":{"line":2764,"column":0},"end":{"line":2805,"column":1}},{"start":{"line":2764,"column":0},"end":{"line":2805,"column":1}}],"line":2764},"120":{"loc":{"start":{"line":2797,"column":12},"end":{"line":2797,"column":96}},"type":"binary-expr","locations":[{"start":{"line":2797,"column":13},"end":{"line":2797,"column":32}},{"start":{"line":2797,"column":37},"end":{"line":2797,"column":96}}],"line":2797},"121":{"loc":{"start":{"line":2800,"column":2},"end":{"line":2802,"column":3}},"type":"if","locations":[{"start":{"line":2800,"column":2},"end":{"line":2802,"column":3}},{"start":{"line":2800,"column":2},"end":{"line":2802,"column":3}}],"line":2800},"122":{"loc":{"start":{"line":2829,"column":4},"end":{"line":2831,"column":5}},"type":"if","locations":[{"start":{"line":2829,"column":4},"end":{"line":2831,"column":5}},{"start":{"line":2829,"column":4},"end":{"line":2831,"column":5}}],"line":2829},"123":{"loc":{"start":{"line":2833,"column":4},"end":{"line":2858,"column":5}},"type":"switch","locations":[{"start":{"line":2834,"column":4},"end":{"line":2837,"column":12}},{"start":{"line":2838,"column":4},"end":{"line":2841,"column":12}},{"start":{"line":2842,"column":4},"end":{"line":2845,"column":12}},{"start":{"line":2846,"column":4},"end":{"line":2849,"column":12}},{"start":{"line":2850,"column":4},"end":{"line":2854,"column":12}},{"start":{"line":2855,"column":4},"end":{"line":2857,"column":12}}],"line":2833},"124":{"loc":{"start":{"line":2885,"column":2},"end":{"line":2890,"column":3}},"type":"if","locations":[{"start":{"line":2885,"column":2},"end":{"line":2890,"column":3}},{"start":{"line":2885,"column":2},"end":{"line":2890,"column":3}}],"line":2885},"125":{"loc":{"start":{"line":2892,"column":2},"end":{"line":2897,"column":3}},"type":"if","locations":[{"start":{"line":2892,"column":2},"end":{"line":2897,"column":3}},{"start":{"line":2892,"column":2},"end":{"line":2897,"column":3}}],"line":2892},"126":{"loc":{"start":{"line":2899,"column":2},"end":{"line":2904,"column":3}},"type":"if","locations":[{"start":{"line":2899,"column":2},"end":{"line":2904,"column":3}},{"start":{"line":2899,"column":2},"end":{"line":2904,"column":3}}],"line":2899},"127":{"loc":{"start":{"line":2906,"column":2},"end":{"line":2911,"column":3}},"type":"if","locations":[{"start":{"line":2906,"column":2},"end":{"line":2911,"column":3}},{"start":{"line":2906,"column":2},"end":{"line":2911,"column":3}}],"line":2906},"128":{"loc":{"start":{"line":2913,"column":2},"end":{"line":2919,"column":3}},"type":"if","locations":[{"start":{"line":2913,"column":2},"end":{"line":2919,"column":3}},{"start":{"line":2913,"column":2},"end":{"line":2919,"column":3}}],"line":2913},"129":{"loc":{"start":{"line":3064,"column":0},"end":{"line":3105,"column":1}},"type":"if","locations":[{"start":{"line":3064,"column":0},"end":{"line":3105,"column":1}},{"start":{"line":3064,"column":0},"end":{"line":3105,"column":1}}],"line":3064},"130":{"loc":{"start":{"line":3093,"column":16},"end":{"line":3093,"column":114}},"type":"binary-expr","locations":[{"start":{"line":3093,"column":17},"end":{"line":3093,"column":40}},{"start":{"line":3093,"column":45},"end":{"line":3093,"column":114}}],"line":3093},"131":{"loc":{"start":{"line":3094,"column":13},"end":{"line":3094,"column":112}},"type":"binary-expr","locations":[{"start":{"line":3094,"column":14},"end":{"line":3094,"column":34}},{"start":{"line":3094,"column":39},"end":{"line":3094,"column":112}}],"line":3094},"132":{"loc":{"start":{"line":3095,"column":20},"end":{"line":3095,"column":126}},"type":"binary-expr","locations":[{"start":{"line":3095,"column":21},"end":{"line":3095,"column":48}},{"start":{"line":3095,"column":53},"end":{"line":3095,"column":126}}],"line":3095},"133":{"loc":{"start":{"line":3096,"column":18},"end":{"line":3096,"column":127}},"type":"binary-expr","locations":[{"start":{"line":3096,"column":19},"end":{"line":3096,"column":44}},{"start":{"line":3096,"column":49},"end":{"line":3096,"column":127}}],"line":3096},"134":{"loc":{"start":{"line":3097,"column":24},"end":{"line":3097,"column":138}},"type":"binary-expr","locations":[{"start":{"line":3097,"column":25},"end":{"line":3097,"column":56}},{"start":{"line":3097,"column":61},"end":{"line":3097,"column":138}}],"line":3097},"135":{"loc":{"start":{"line":3100,"column":2},"end":{"line":3102,"column":3}},"type":"if","locations":[{"start":{"line":3100,"column":2},"end":{"line":3102,"column":3}},{"start":{"line":3100,"column":2},"end":{"line":3102,"column":3}}],"line":3100},"136":{"loc":{"start":{"line":3129,"column":4},"end":{"line":3131,"column":5}},"type":"if","locations":[{"start":{"line":3129,"column":4},"end":{"line":3131,"column":5}},{"start":{"line":3129,"column":4},"end":{"line":3131,"column":5}}],"line":3129},"137":{"loc":{"start":{"line":3133,"column":4},"end":{"line":3162,"column":5}},"type":"switch","locations":[{"start":{"line":3134,"column":4},"end":{"line":3138,"column":12}},{"start":{"line":3139,"column":4},"end":{"line":3143,"column":12}},{"start":{"line":3144,"column":4},"end":{"line":3148,"column":12}},{"start":{"line":3149,"column":4},"end":{"line":3153,"column":12}},{"start":{"line":3154,"column":4},"end":{"line":3158,"column":12}},{"start":{"line":3159,"column":4},"end":{"line":3161,"column":12}}],"line":3133},"138":{"loc":{"start":{"line":3189,"column":2},"end":{"line":3195,"column":3}},"type":"if","locations":[{"start":{"line":3189,"column":2},"end":{"line":3195,"column":3}},{"start":{"line":3189,"column":2},"end":{"line":3195,"column":3}}],"line":3189},"139":{"loc":{"start":{"line":3197,"column":2},"end":{"line":3203,"column":3}},"type":"if","locations":[{"start":{"line":3197,"column":2},"end":{"line":3203,"column":3}},{"start":{"line":3197,"column":2},"end":{"line":3203,"column":3}}],"line":3197},"140":{"loc":{"start":{"line":3205,"column":2},"end":{"line":3211,"column":3}},"type":"if","locations":[{"start":{"line":3205,"column":2},"end":{"line":3211,"column":3}},{"start":{"line":3205,"column":2},"end":{"line":3211,"column":3}}],"line":3205},"141":{"loc":{"start":{"line":3213,"column":2},"end":{"line":3219,"column":3}},"type":"if","locations":[{"start":{"line":3213,"column":2},"end":{"line":3219,"column":3}},{"start":{"line":3213,"column":2},"end":{"line":3219,"column":3}}],"line":3213},"142":{"loc":{"start":{"line":3221,"column":2},"end":{"line":3227,"column":3}},"type":"if","locations":[{"start":{"line":3221,"column":2},"end":{"line":3227,"column":3}},{"start":{"line":3221,"column":2},"end":{"line":3227,"column":3}}],"line":3221},"143":{"loc":{"start":{"line":3426,"column":0},"end":{"line":3465,"column":1}},"type":"if","locations":[{"start":{"line":3426,"column":0},"end":{"line":3465,"column":1}},{"start":{"line":3426,"column":0},"end":{"line":3465,"column":1}}],"line":3426},"144":{"loc":{"start":{"line":3457,"column":27},"end":{"line":3457,"column":94}},"type":"cond-expr","locations":[{"start":{"line":3457,"column":81},"end":{"line":3457,"column":90}},{"start":{"line":3457,"column":93},"end":{"line":3457,"column":94}}],"line":3457},"145":{"loc":{"start":{"line":3460,"column":2},"end":{"line":3462,"column":3}},"type":"if","locations":[{"start":{"line":3460,"column":2},"end":{"line":3462,"column":3}},{"start":{"line":3460,"column":2},"end":{"line":3462,"column":3}}],"line":3460},"146":{"loc":{"start":{"line":3489,"column":4},"end":{"line":3491,"column":5}},"type":"if","locations":[{"start":{"line":3489,"column":4},"end":{"line":3491,"column":5}},{"start":{"line":3489,"column":4},"end":{"line":3491,"column":5}}],"line":3489},"147":{"loc":{"start":{"line":3493,"column":4},"end":{"line":3506,"column":5}},"type":"switch","locations":[{"start":{"line":3494,"column":4},"end":{"line":3498,"column":12}},{"start":{"line":3499,"column":4},"end":{"line":3502,"column":12}},{"start":{"line":3503,"column":4},"end":{"line":3505,"column":12}}],"line":3493},"148":{"loc":{"start":{"line":3533,"column":2},"end":{"line":3539,"column":3}},"type":"if","locations":[{"start":{"line":3533,"column":2},"end":{"line":3539,"column":3}},{"start":{"line":3533,"column":2},"end":{"line":3539,"column":3}}],"line":3533},"149":{"loc":{"start":{"line":3541,"column":2},"end":{"line":3546,"column":3}},"type":"if","locations":[{"start":{"line":3541,"column":2},"end":{"line":3546,"column":3}},{"start":{"line":3541,"column":2},"end":{"line":3546,"column":3}}],"line":3541},"150":{"loc":{"start":{"line":3602,"column":40},"end":{"line":3602,"column":51}},"type":"binary-expr","locations":[{"start":{"line":3602,"column":40},"end":{"line":3602,"column":45}},{"start":{"line":3602,"column":49},"end":{"line":3602,"column":51}}],"line":3602},"151":{"loc":{"start":{"line":3635,"column":0},"end":{"line":3672,"column":1}},"type":"if","locations":[{"start":{"line":3635,"column":0},"end":{"line":3672,"column":1}},{"start":{"line":3635,"column":0},"end":{"line":3672,"column":1}}],"line":3635},"152":{"loc":{"start":{"line":3664,"column":17},"end":{"line":3664,"column":84}},"type":"cond-expr","locations":[{"start":{"line":3664,"column":71},"end":{"line":3664,"column":80}},{"start":{"line":3664,"column":83},"end":{"line":3664,"column":84}}],"line":3664},"153":{"loc":{"start":{"line":3667,"column":2},"end":{"line":3669,"column":3}},"type":"if","locations":[{"start":{"line":3667,"column":2},"end":{"line":3669,"column":3}},{"start":{"line":3667,"column":2},"end":{"line":3669,"column":3}}],"line":3667},"154":{"loc":{"start":{"line":3696,"column":4},"end":{"line":3698,"column":5}},"type":"if","locations":[{"start":{"line":3696,"column":4},"end":{"line":3698,"column":5}},{"start":{"line":3696,"column":4},"end":{"line":3698,"column":5}}],"line":3696},"155":{"loc":{"start":{"line":3700,"column":4},"end":{"line":3708,"column":5}},"type":"switch","locations":[{"start":{"line":3701,"column":4},"end":{"line":3704,"column":12}},{"start":{"line":3705,"column":4},"end":{"line":3707,"column":12}}],"line":3700},"156":{"loc":{"start":{"line":3735,"column":2},"end":{"line":3740,"column":3}},"type":"if","locations":[{"start":{"line":3735,"column":2},"end":{"line":3740,"column":3}},{"start":{"line":3735,"column":2},"end":{"line":3740,"column":3}}],"line":3735},"157":{"loc":{"start":{"line":3758,"column":40},"end":{"line":3758,"column":51}},"type":"binary-expr","locations":[{"start":{"line":3758,"column":40},"end":{"line":3758,"column":45}},{"start":{"line":3758,"column":49},"end":{"line":3758,"column":51}}],"line":3758},"158":{"loc":{"start":{"line":3791,"column":0},"end":{"line":3828,"column":1}},"type":"if","locations":[{"start":{"line":3791,"column":0},"end":{"line":3828,"column":1}},{"start":{"line":3791,"column":0},"end":{"line":3828,"column":1}}],"line":3791},"159":{"loc":{"start":{"line":3820,"column":17},"end":{"line":3820,"column":84}},"type":"cond-expr","locations":[{"start":{"line":3820,"column":71},"end":{"line":3820,"column":80}},{"start":{"line":3820,"column":83},"end":{"line":3820,"column":84}}],"line":3820},"160":{"loc":{"start":{"line":3823,"column":2},"end":{"line":3825,"column":3}},"type":"if","locations":[{"start":{"line":3823,"column":2},"end":{"line":3825,"column":3}},{"start":{"line":3823,"column":2},"end":{"line":3825,"column":3}}],"line":3823},"161":{"loc":{"start":{"line":3852,"column":4},"end":{"line":3854,"column":5}},"type":"if","locations":[{"start":{"line":3852,"column":4},"end":{"line":3854,"column":5}},{"start":{"line":3852,"column":4},"end":{"line":3854,"column":5}}],"line":3852},"162":{"loc":{"start":{"line":3856,"column":4},"end":{"line":3864,"column":5}},"type":"switch","locations":[{"start":{"line":3857,"column":4},"end":{"line":3860,"column":12}},{"start":{"line":3861,"column":4},"end":{"line":3863,"column":12}}],"line":3856},"163":{"loc":{"start":{"line":3891,"column":2},"end":{"line":3896,"column":3}},"type":"if","locations":[{"start":{"line":3891,"column":2},"end":{"line":3896,"column":3}},{"start":{"line":3891,"column":2},"end":{"line":3896,"column":3}}],"line":3891},"164":{"loc":{"start":{"line":3914,"column":40},"end":{"line":3914,"column":51}},"type":"binary-expr","locations":[{"start":{"line":3914,"column":40},"end":{"line":3914,"column":45}},{"start":{"line":3914,"column":49},"end":{"line":3914,"column":51}}],"line":3914},"165":{"loc":{"start":{"line":3947,"column":0},"end":{"line":3984,"column":1}},"type":"if","locations":[{"start":{"line":3947,"column":0},"end":{"line":3984,"column":1}},{"start":{"line":3947,"column":0},"end":{"line":3984,"column":1}}],"line":3947},"166":{"loc":{"start":{"line":3976,"column":17},"end":{"line":3976,"column":84}},"type":"cond-expr","locations":[{"start":{"line":3976,"column":71},"end":{"line":3976,"column":80}},{"start":{"line":3976,"column":83},"end":{"line":3976,"column":84}}],"line":3976},"167":{"loc":{"start":{"line":3979,"column":2},"end":{"line":3981,"column":3}},"type":"if","locations":[{"start":{"line":3979,"column":2},"end":{"line":3981,"column":3}},{"start":{"line":3979,"column":2},"end":{"line":3981,"column":3}}],"line":3979},"168":{"loc":{"start":{"line":4008,"column":4},"end":{"line":4010,"column":5}},"type":"if","locations":[{"start":{"line":4008,"column":4},"end":{"line":4010,"column":5}},{"start":{"line":4008,"column":4},"end":{"line":4010,"column":5}}],"line":4008},"169":{"loc":{"start":{"line":4012,"column":4},"end":{"line":4020,"column":5}},"type":"switch","locations":[{"start":{"line":4013,"column":4},"end":{"line":4016,"column":12}},{"start":{"line":4017,"column":4},"end":{"line":4019,"column":12}}],"line":4012},"170":{"loc":{"start":{"line":4047,"column":2},"end":{"line":4052,"column":3}},"type":"if","locations":[{"start":{"line":4047,"column":2},"end":{"line":4052,"column":3}},{"start":{"line":4047,"column":2},"end":{"line":4052,"column":3}}],"line":4047},"171":{"loc":{"start":{"line":4070,"column":40},"end":{"line":4070,"column":51}},"type":"binary-expr","locations":[{"start":{"line":4070,"column":40},"end":{"line":4070,"column":45}},{"start":{"line":4070,"column":49},"end":{"line":4070,"column":51}}],"line":4070},"172":{"loc":{"start":{"line":4103,"column":0},"end":{"line":4142,"column":1}},"type":"if","locations":[{"start":{"line":4103,"column":0},"end":{"line":4142,"column":1}},{"start":{"line":4103,"column":0},"end":{"line":4142,"column":1}}],"line":4103},"173":{"loc":{"start":{"line":4134,"column":27},"end":{"line":4134,"column":94}},"type":"cond-expr","locations":[{"start":{"line":4134,"column":81},"end":{"line":4134,"column":90}},{"start":{"line":4134,"column":93},"end":{"line":4134,"column":94}}],"line":4134},"174":{"loc":{"start":{"line":4137,"column":2},"end":{"line":4139,"column":3}},"type":"if","locations":[{"start":{"line":4137,"column":2},"end":{"line":4139,"column":3}},{"start":{"line":4137,"column":2},"end":{"line":4139,"column":3}}],"line":4137},"175":{"loc":{"start":{"line":4166,"column":4},"end":{"line":4168,"column":5}},"type":"if","locations":[{"start":{"line":4166,"column":4},"end":{"line":4168,"column":5}},{"start":{"line":4166,"column":4},"end":{"line":4168,"column":5}}],"line":4166},"176":{"loc":{"start":{"line":4170,"column":4},"end":{"line":4183,"column":5}},"type":"switch","locations":[{"start":{"line":4171,"column":4},"end":{"line":4175,"column":12}},{"start":{"line":4176,"column":4},"end":{"line":4179,"column":12}},{"start":{"line":4180,"column":4},"end":{"line":4182,"column":12}}],"line":4170},"177":{"loc":{"start":{"line":4210,"column":2},"end":{"line":4216,"column":3}},"type":"if","locations":[{"start":{"line":4210,"column":2},"end":{"line":4216,"column":3}},{"start":{"line":4210,"column":2},"end":{"line":4216,"column":3}}],"line":4210},"178":{"loc":{"start":{"line":4218,"column":2},"end":{"line":4223,"column":3}},"type":"if","locations":[{"start":{"line":4218,"column":2},"end":{"line":4223,"column":3}},{"start":{"line":4218,"column":2},"end":{"line":4223,"column":3}}],"line":4218},"179":{"loc":{"start":{"line":4279,"column":40},"end":{"line":4279,"column":51}},"type":"binary-expr","locations":[{"start":{"line":4279,"column":40},"end":{"line":4279,"column":45}},{"start":{"line":4279,"column":49},"end":{"line":4279,"column":51}}],"line":4279},"180":{"loc":{"start":{"line":4312,"column":0},"end":{"line":4350,"column":1}},"type":"if","locations":[{"start":{"line":4312,"column":0},"end":{"line":4350,"column":1}},{"start":{"line":4312,"column":0},"end":{"line":4350,"column":1}}],"line":4312},"181":{"loc":{"start":{"line":4342,"column":17},"end":{"line":4342,"column":84}},"type":"cond-expr","locations":[{"start":{"line":4342,"column":71},"end":{"line":4342,"column":80}},{"start":{"line":4342,"column":83},"end":{"line":4342,"column":84}}],"line":4342},"182":{"loc":{"start":{"line":4345,"column":2},"end":{"line":4347,"column":3}},"type":"if","locations":[{"start":{"line":4345,"column":2},"end":{"line":4347,"column":3}},{"start":{"line":4345,"column":2},"end":{"line":4347,"column":3}}],"line":4345},"183":{"loc":{"start":{"line":4374,"column":4},"end":{"line":4376,"column":5}},"type":"if","locations":[{"start":{"line":4374,"column":4},"end":{"line":4376,"column":5}},{"start":{"line":4374,"column":4},"end":{"line":4376,"column":5}}],"line":4374},"184":{"loc":{"start":{"line":4378,"column":4},"end":{"line":4390,"column":5}},"type":"switch","locations":[{"start":{"line":4379,"column":4},"end":{"line":4382,"column":12}},{"start":{"line":4383,"column":4},"end":{"line":4386,"column":12}},{"start":{"line":4387,"column":4},"end":{"line":4389,"column":12}}],"line":4378},"185":{"loc":{"start":{"line":4417,"column":2},"end":{"line":4422,"column":3}},"type":"if","locations":[{"start":{"line":4417,"column":2},"end":{"line":4422,"column":3}},{"start":{"line":4417,"column":2},"end":{"line":4422,"column":3}}],"line":4417},"186":{"loc":{"start":{"line":4424,"column":2},"end":{"line":4429,"column":3}},"type":"if","locations":[{"start":{"line":4424,"column":2},"end":{"line":4429,"column":3}},{"start":{"line":4424,"column":2},"end":{"line":4429,"column":3}}],"line":4424},"187":{"loc":{"start":{"line":4465,"column":40},"end":{"line":4465,"column":51}},"type":"binary-expr","locations":[{"start":{"line":4465,"column":40},"end":{"line":4465,"column":45}},{"start":{"line":4465,"column":49},"end":{"line":4465,"column":51}}],"line":4465}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":8,"28":1,"29":1,"30":0,"31":1,"32":14,"33":1,"34":1,"35":0,"36":1,"37":14,"38":1,"39":1,"40":0,"41":1,"42":18,"43":1,"44":1,"45":0,"46":1,"47":0,"48":1,"49":1,"50":0,"51":1,"52":0,"53":1,"54":1,"55":0,"56":1,"57":63,"58":1,"59":1,"60":0,"61":1,"62":0,"63":1,"64":1,"65":0,"66":1,"67":0,"68":1,"69":1,"70":0,"71":1,"72":0,"73":1,"74":1,"75":0,"76":1,"77":0,"78":1,"79":1,"80":0,"81":1,"82":0,"83":1,"84":1,"85":0,"86":1,"87":0,"88":1,"89":1,"90":0,"91":1,"92":0,"93":1,"94":1,"95":0,"96":1,"97":0,"98":1,"99":1,"100":0,"101":1,"102":0,"103":1,"104":1,"105":0,"106":1,"107":0,"108":1,"109":1,"110":0,"111":1,"112":1,"113":9,"114":1,"115":9,"116":9,"117":0,"118":9,"119":1,"120":0,"121":0,"122":0,"123":1,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":1,"139":0,"140":0,"141":0,"142":1,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":1,"151":1,"152":1,"153":6,"154":1,"155":0,"156":1,"157":6,"158":1,"159":1,"160":16,"161":1,"162":16,"163":16,"164":0,"165":16,"166":1,"167":0,"168":0,"169":0,"170":1,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":1,"192":0,"193":0,"194":0,"195":1,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":1,"210":1,"211":1,"212":15,"213":1,"214":0,"215":1,"216":15,"217":1,"218":0,"219":1,"220":16,"221":1,"222":0,"223":1,"224":15,"225":1,"226":1,"227":17,"228":1,"229":17,"230":17,"231":0,"232":17,"233":1,"234":0,"235":0,"236":0,"237":1,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":1,"259":0,"260":0,"261":0,"262":1,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":1,"277":1,"278":1,"279":15,"280":1,"281":0,"282":1,"283":15,"284":1,"285":0,"286":1,"287":16,"288":1,"289":0,"290":1,"291":15,"292":1,"293":1,"294":21,"295":1,"296":21,"297":21,"298":0,"299":21,"300":1,"301":0,"302":0,"303":0,"304":1,"305":0,"306":0,"307":0,"308":0,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"316":0,"317":0,"318":0,"319":0,"320":0,"321":0,"322":0,"323":0,"324":0,"325":0,"326":0,"327":0,"328":0,"329":0,"330":0,"331":0,"332":0,"333":0,"334":0,"335":0,"336":0,"337":0,"338":0,"339":0,"340":0,"341":0,"342":0,"343":1,"344":0,"345":0,"346":0,"347":1,"348":0,"349":0,"350":0,"351":0,"352":0,"353":0,"354":0,"355":0,"356":0,"357":0,"358":0,"359":0,"360":0,"361":0,"362":0,"363":0,"364":0,"365":0,"366":0,"367":0,"368":0,"369":0,"370":0,"371":0,"372":0,"373":0,"374":0,"375":0,"376":0,"377":0,"378":0,"379":1,"380":3,"381":1,"382":18,"383":1,"384":0,"385":1,"386":18,"387":1,"388":0,"389":1,"390":18,"391":1,"392":0,"393":1,"394":16,"395":1,"396":0,"397":1,"398":16,"399":1,"400":0,"401":1,"402":17,"403":1,"404":0,"405":1,"406":19,"407":1,"408":0,"409":1,"410":19,"411":1,"412":0,"413":1,"414":18,"415":1,"416":0,"417":1,"418":19,"419":1,"420":1,"421":1,"422":0,"423":1,"424":0,"425":0,"426":0,"427":0,"428":1,"429":0,"430":0,"431":0,"432":1,"433":0,"434":0,"435":0,"436":0,"437":0,"438":0,"439":0,"440":0,"441":0,"442":0,"443":0,"444":0,"445":0,"446":0,"447":1,"448":0,"449":0,"450":0,"451":1,"452":0,"453":0,"454":0,"455":0,"456":0,"457":0,"458":0,"459":1,"460":0,"461":1,"462":0,"463":1,"464":0,"465":1,"466":0,"467":1,"468":0,"469":1,"470":0,"471":1,"472":1,"473":1,"474":0,"475":1,"476":1,"477":0,"478":1,"479":0,"480":0,"481":0,"482":0,"483":1,"484":0,"485":0,"486":0,"487":1,"488":0,"489":0,"490":0,"491":0,"492":0,"493":0,"494":0,"495":0,"496":0,"497":0,"498":0,"499":0,"500":0,"501":0,"502":0,"503":0,"504":0,"505":0,"506":0,"507":0,"508":0,"509":0,"510":0,"511":0,"512":0,"513":0,"514":0,"515":0,"516":0,"517":0,"518":0,"519":1,"520":0,"521":0,"522":0,"523":1,"524":0,"525":0,"526":0,"527":0,"528":0,"529":0,"530":0,"531":0,"532":0,"533":0,"534":0,"535":0,"536":0,"537":0,"538":0,"539":0,"540":0,"541":0,"542":0,"543":1,"544":0,"545":1,"546":0,"547":1,"548":0,"549":1,"550":0,"551":1,"552":0,"553":1,"554":0,"555":1,"556":0,"557":1,"558":0,"559":1,"560":0,"561":1,"562":0,"563":1,"564":0,"565":1,"566":0,"567":1,"568":0,"569":1,"570":0,"571":1,"572":0,"573":1,"574":0,"575":1,"576":0,"577":1,"578":0,"579":1,"580":0,"581":1,"582":0,"583":1,"584":0,"585":1,"586":0,"587":1,"588":1,"589":1,"590":126,"591":1,"592":1,"593":0,"594":1,"595":0,"596":0,"597":0,"598":0,"599":1,"600":0,"601":0,"602":0,"603":1,"604":0,"605":0,"606":0,"607":0,"608":0,"609":0,"610":0,"611":0,"612":0,"613":0,"614":0,"615":0,"616":0,"617":0,"618":0,"619":0,"620":0,"621":0,"622":0,"623":0,"624":0,"625":0,"626":0,"627":0,"628":0,"629":0,"630":0,"631":0,"632":0,"633":0,"634":0,"635":0,"636":0,"637":0,"638":1,"639":0,"640":0,"641":0,"642":1,"643":0,"644":0,"645":0,"646":0,"647":0,"648":0,"649":0,"650":0,"651":0,"652":0,"653":0,"654":0,"655":0,"656":0,"657":0,"658":0,"659":0,"660":0,"661":0,"662":0,"663":0,"664":0,"665":1,"666":63,"667":1,"668":63,"669":1,"670":63,"671":1,"672":0,"673":1,"674":0,"675":1,"676":0,"677":1,"678":0,"679":1,"680":0,"681":1,"682":9,"683":1,"684":9,"685":1,"686":0,"687":1,"688":0,"689":1,"690":16,"691":1,"692":16,"693":1,"694":0,"695":1,"696":0,"697":1,"698":17,"699":1,"700":17,"701":1,"702":0,"703":1,"704":0,"705":1,"706":21,"707":1,"708":21,"709":1,"710":0,"711":1,"712":0,"713":1,"714":1,"715":1,"716":0,"717":1,"718":0,"719":0,"720":0,"721":0,"722":1,"723":0,"724":0,"725":0,"726":1,"727":0,"728":0,"729":0,"730":0,"731":0,"732":0,"733":0,"734":0,"735":0,"736":0,"737":0,"738":0,"739":1,"740":0,"741":0,"742":0,"743":1,"744":0,"745":0,"746":0,"747":0,"748":1,"749":0,"750":1,"751":0,"752":1,"753":0,"754":1,"755":0,"756":1,"757":1,"758":1,"759":0,"760":1,"761":0,"762":0,"763":0,"764":0,"765":1,"766":0,"767":0,"768":0,"769":1,"770":0,"771":0,"772":0,"773":0,"774":0,"775":0,"776":0,"777":0,"778":0,"779":0,"780":0,"781":0,"782":1,"783":0,"784":0,"785":0,"786":1,"787":0,"788":0,"789":0,"790":0,"791":1,"792":0,"793":1,"794":0,"795":1,"796":0,"797":1,"798":0,"799":1,"800":1,"801":0,"802":1,"803":0,"804":0,"805":0,"806":0,"807":1,"808":0,"809":0,"810":0,"811":1,"812":0,"813":0,"814":0,"815":0,"816":0,"817":0,"818":0,"819":0,"820":0,"821":0,"822":0,"823":0,"824":0,"825":0,"826":0,"827":0,"828":0,"829":0,"830":0,"831":0,"832":0,"833":0,"834":0,"835":0,"836":1,"837":0,"838":0,"839":0,"840":1,"841":0,"842":0,"843":0,"844":0,"845":0,"846":0,"847":0,"848":0,"849":0,"850":0,"851":0,"852":0,"853":0,"854":0,"855":0,"856":0,"857":1,"858":0,"859":1,"860":0,"861":1,"862":0,"863":1,"864":0,"865":1,"866":0,"867":1,"868":0,"869":1,"870":0,"871":1,"872":0,"873":1,"874":0,"875":1,"876":0,"877":1,"878":0,"879":1,"880":0,"881":1,"882":1,"883":1,"884":0,"885":1,"886":1,"887":0,"888":1,"889":0,"890":0,"891":0,"892":0,"893":1,"894":0,"895":0,"896":0,"897":1,"898":0,"899":0,"900":0,"901":0,"902":0,"903":0,"904":0,"905":0,"906":0,"907":0,"908":0,"909":0,"910":0,"911":0,"912":0,"913":0,"914":0,"915":0,"916":0,"917":0,"918":0,"919":0,"920":0,"921":0,"922":0,"923":0,"924":0,"925":0,"926":1,"927":0,"928":0,"929":0,"930":1,"931":0,"932":0,"933":0,"934":0,"935":0,"936":0,"937":0,"938":0,"939":0,"940":0,"941":0,"942":0,"943":0,"944":0,"945":0,"946":0,"947":1,"948":0,"949":1,"950":0,"951":1,"952":0,"953":1,"954":0,"955":1,"956":0,"957":1,"958":0,"959":1,"960":0,"961":1,"962":0,"963":1,"964":0,"965":1,"966":0,"967":1,"968":0,"969":1,"970":0,"971":1,"972":0,"973":1,"974":0,"975":1,"976":0,"977":1,"978":0,"979":1,"980":0,"981":1,"982":0,"983":1,"984":0,"985":1,"986":0,"987":1,"988":1,"989":1,"990":0,"991":1,"992":0,"993":0,"994":0,"995":0,"996":1,"997":0,"998":0,"999":0,"1000":1,"1001":0,"1002":0,"1003":0,"1004":0,"1005":0,"1006":0,"1007":0,"1008":0,"1009":0,"1010":0,"1011":0,"1012":0,"1013":0,"1014":0,"1015":0,"1016":1,"1017":0,"1018":0,"1019":0,"1020":1,"1021":0,"1022":0,"1023":0,"1024":0,"1025":0,"1026":0,"1027":0,"1028":1,"1029":0,"1030":1,"1031":0,"1032":1,"1033":0,"1034":1,"1035":0,"1036":1,"1037":0,"1038":1,"1039":0,"1040":1,"1041":0,"1042":1,"1043":0,"1044":1,"1045":1,"1046":1,"1047":0,"1048":1,"1049":0,"1050":0,"1051":0,"1052":0,"1053":1,"1054":0,"1055":0,"1056":0,"1057":1,"1058":0,"1059":0,"1060":0,"1061":0,"1062":0,"1063":0,"1064":0,"1065":0,"1066":0,"1067":0,"1068":0,"1069":1,"1070":0,"1071":0,"1072":0,"1073":1,"1074":0,"1075":0,"1076":0,"1077":0,"1078":1,"1079":0,"1080":1,"1081":0,"1082":1,"1083":0,"1084":1,"1085":0,"1086":1,"1087":1,"1088":1,"1089":0,"1090":1,"1091":0,"1092":0,"1093":0,"1094":0,"1095":1,"1096":0,"1097":0,"1098":0,"1099":1,"1100":0,"1101":0,"1102":0,"1103":0,"1104":0,"1105":0,"1106":0,"1107":0,"1108":0,"1109":0,"1110":0,"1111":1,"1112":0,"1113":0,"1114":0,"1115":1,"1116":0,"1117":0,"1118":0,"1119":0,"1120":1,"1121":0,"1122":1,"1123":0,"1124":1,"1125":0,"1126":1,"1127":0,"1128":1,"1129":1,"1130":1,"1131":0,"1132":1,"1133":0,"1134":0,"1135":0,"1136":0,"1137":1,"1138":0,"1139":0,"1140":0,"1141":1,"1142":0,"1143":0,"1144":0,"1145":0,"1146":0,"1147":0,"1148":0,"1149":0,"1150":0,"1151":0,"1152":0,"1153":1,"1154":0,"1155":0,"1156":0,"1157":1,"1158":0,"1159":0,"1160":0,"1161":0,"1162":1,"1163":0,"1164":1,"1165":0,"1166":1,"1167":0,"1168":1,"1169":0,"1170":1,"1171":1,"1172":1,"1173":0,"1174":1,"1175":0,"1176":0,"1177":0,"1178":0,"1179":1,"1180":0,"1181":0,"1182":0,"1183":1,"1184":0,"1185":0,"1186":0,"1187":0,"1188":0,"1189":0,"1190":0,"1191":0,"1192":0,"1193":0,"1194":0,"1195":0,"1196":0,"1197":0,"1198":0,"1199":1,"1200":0,"1201":0,"1202":0,"1203":1,"1204":0,"1205":0,"1206":0,"1207":0,"1208":0,"1209":0,"1210":0,"1211":1,"1212":0,"1213":1,"1214":0,"1215":1,"1216":0,"1217":1,"1218":0,"1219":1,"1220":0,"1221":1,"1222":0,"1223":1,"1224":0,"1225":1,"1226":0,"1227":1,"1228":1,"1229":1,"1230":0,"1231":1,"1232":0,"1233":0,"1234":0,"1235":0,"1236":1,"1237":0,"1238":0,"1239":0,"1240":1,"1241":0,"1242":0,"1243":0,"1244":0,"1245":0,"1246":0,"1247":0,"1248":0,"1249":0,"1250":0,"1251":0,"1252":0,"1253":0,"1254":0,"1255":1,"1256":0,"1257":0,"1258":0,"1259":1,"1260":0,"1261":0,"1262":0,"1263":0,"1264":0,"1265":0,"1266":0,"1267":1,"1268":0,"1269":1,"1270":0,"1271":1,"1272":0,"1273":1,"1274":0,"1275":1,"1276":0,"1277":1,"1278":0,"1279":1,"1280":1,"1281":1,"1282":1},"f":{"0":8,"1":14,"2":14,"3":18,"4":0,"5":0,"6":63,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":9,"18":9,"19":0,"20":0,"21":0,"22":0,"23":1,"24":6,"25":0,"26":6,"27":16,"28":16,"29":0,"30":0,"31":0,"32":0,"33":1,"34":15,"35":0,"36":15,"37":0,"38":16,"39":0,"40":15,"41":17,"42":17,"43":0,"44":0,"45":0,"46":0,"47":1,"48":15,"49":0,"50":15,"51":0,"52":16,"53":0,"54":15,"55":21,"56":21,"57":0,"58":0,"59":0,"60":0,"61":3,"62":18,"63":0,"64":18,"65":0,"66":18,"67":0,"68":16,"69":0,"70":16,"71":0,"72":17,"73":0,"74":19,"75":0,"76":19,"77":0,"78":18,"79":0,"80":19,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":126,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":63,"130":63,"131":63,"132":0,"133":0,"134":0,"135":0,"136":0,"137":9,"138":9,"139":0,"140":0,"141":16,"142":16,"143":0,"144":0,"145":17,"146":17,"147":0,"148":0,"149":21,"150":21,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0},"b":{"0":[0,1],"1":[1,0],"2":[0,1],"3":[1,0],"4":[0,1],"5":[1,0],"6":[0,1],"7":[1,0],"8":[0,1],"9":[1,0],"10":[0,1],"11":[1,0],"12":[0,1],"13":[1,0],"14":[0,1],"15":[1,0],"16":[0,1],"17":[1,0],"18":[0,1],"19":[1,0],"20":[0,1],"21":[1,0],"22":[0,1],"23":[1,0],"24":[0,1],"25":[1,0],"26":[0,1],"27":[1,0],"28":[0,1],"29":[1,0],"30":[0,1],"31":[1,0],"32":[0,1],"33":[1,0],"34":[1,0],"35":[0,9],"36":[0,0],"37":[0,0,0],"38":[0,0],"39":[0,0],"40":[1,0],"41":[0,16],"42":[0,0],"43":[0,0,0,0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[1,0],"49":[0,17],"50":[0,0],"51":[0,0,0,0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[1,0],"57":[0,21],"58":[0,0],"59":[0,0,0,0,0,0,0,0,0,0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[1,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[1,0],"79":[0,0],"80":[0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0],"85":[0,0],"86":[0,0,0,0,0,0,0],"87":[0,0],"88":[0,0],"89":[0,0],"90":[0,0],"91":[0,0],"92":[0,0],"93":[1,0],"94":[0,0],"95":[0,0],"96":[0,0],"97":[0,0],"98":[0,0],"99":[0,0],"100":[0,0],"101":[0,0,0,0,0,0,0,0],"102":[0,0],"103":[0,0],"104":[0,0],"105":[0,0],"106":[0,0],"107":[0,0],"108":[0,0],"109":[1,0],"110":[0,0],"111":[0,0],"112":[0,0],"113":[0,0],"114":[1,0],"115":[0,0],"116":[0,0],"117":[0,0],"118":[0,0],"119":[1,0],"120":[0,0],"121":[0,0],"122":[0,0],"123":[0,0,0,0,0,0],"124":[0,0],"125":[0,0],"126":[0,0],"127":[0,0],"128":[0,0],"129":[1,0],"130":[0,0],"131":[0,0],"132":[0,0],"133":[0,0],"134":[0,0],"135":[0,0],"136":[0,0],"137":[0,0,0,0,0,0],"138":[0,0],"139":[0,0],"140":[0,0],"141":[0,0],"142":[0,0],"143":[1,0],"144":[0,0],"145":[0,0],"146":[0,0],"147":[0,0,0],"148":[0,0],"149":[0,0],"150":[0,0],"151":[1,0],"152":[0,0],"153":[0,0],"154":[0,0],"155":[0,0],"156":[0,0],"157":[0,0],"158":[1,0],"159":[0,0],"160":[0,0],"161":[0,0],"162":[0,0],"163":[0,0],"164":[0,0],"165":[1,0],"166":[0,0],"167":[0,0],"168":[0,0],"169":[0,0],"170":[0,0],"171":[0,0],"172":[1,0],"173":[0,0],"174":[0,0],"175":[0,0],"176":[0,0,0],"177":[0,0],"178":[0,0],"179":[0,0],"180":[1,0],"181":[0,0],"182":[0,0],"183":[0,0],"184":[0,0,0],"185":[0,0],"186":[0,0],"187":[0,0]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"26a1f6fe3a4203c5cd853b64394f21261cbaba7f"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/protos/job_pb.js":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/protos/job_pb.js","statementMap":{"0":{"start":{"line":14,"column":11},"end":{"line":14,"column":37}},"1":{"start":{"line":15,"column":11},"end":{"line":15,"column":15}},"2":{"start":{"line":16,"column":13},"end":{"line":16,"column":38}},"3":{"start":{"line":18,"column":13},"end":{"line":18,"column":35}},"4":{"start":{"line":19,"column":0},"end":{"line":19,"column":34}},"5":{"start":{"line":20,"column":0},"end":{"line":20,"column":65}},"6":{"start":{"line":21,"column":0},"end":{"line":21,"column":77}},"7":{"start":{"line":22,"column":0},"end":{"line":22,"column":79}},"8":{"start":{"line":33,"column":0},"end":{"line":35,"column":2}},"9":{"start":{"line":34,"column":2},"end":{"line":34,"column":61}},"10":{"start":{"line":36,"column":0},"end":{"line":36,"column":59}},"11":{"start":{"line":37,"column":0},"end":{"line":43,"column":1}},"12":{"start":{"line":42,"column":2},"end":{"line":42,"column":78}},"13":{"start":{"line":54,"column":0},"end":{"line":56,"column":2}},"14":{"start":{"line":55,"column":2},"end":{"line":55,"column":61}},"15":{"start":{"line":57,"column":0},"end":{"line":57,"column":73}},"16":{"start":{"line":58,"column":0},"end":{"line":64,"column":1}},"17":{"start":{"line":63,"column":2},"end":{"line":63,"column":106}},"18":{"start":{"line":75,"column":0},"end":{"line":77,"column":2}},"19":{"start":{"line":76,"column":2},"end":{"line":76,"column":61}},"20":{"start":{"line":78,"column":0},"end":{"line":78,"column":71}},"21":{"start":{"line":79,"column":0},"end":{"line":85,"column":1}},"22":{"start":{"line":84,"column":2},"end":{"line":84,"column":102}},"23":{"start":{"line":89,"column":0},"end":{"line":126,"column":1}},"24":{"start":{"line":102,"column":0},"end":{"line":104,"column":2}},"25":{"start":{"line":103,"column":2},"end":{"line":103,"column":75}},"26":{"start":{"line":116,"column":0},"end":{"line":125,"column":2}},"27":{"start":{"line":117,"column":15},"end":{"line":119,"column":3}},"28":{"start":{"line":121,"column":2},"end":{"line":123,"column":3}},"29":{"start":{"line":122,"column":4},"end":{"line":122,"column":35}},"30":{"start":{"line":124,"column":2},"end":{"line":124,"column":13}},"31":{"start":{"line":134,"column":0},"end":{"line":138,"column":2}},"32":{"start":{"line":135,"column":15},"end":{"line":135,"column":43}},"33":{"start":{"line":136,"column":12},"end":{"line":136,"column":45}},"34":{"start":{"line":137,"column":2},"end":{"line":137,"column":80}},"35":{"start":{"line":148,"column":0},"end":{"line":166,"column":2}},"36":{"start":{"line":149,"column":2},"end":{"line":164,"column":3}},"37":{"start":{"line":150,"column":4},"end":{"line":152,"column":5}},"38":{"start":{"line":151,"column":6},"end":{"line":151,"column":12}},"39":{"start":{"line":153,"column":16},"end":{"line":153,"column":39}},"40":{"start":{"line":154,"column":4},"end":{"line":163,"column":5}},"41":{"start":{"line":156,"column":18},"end":{"line":156,"column":46}},"42":{"start":{"line":157,"column":6},"end":{"line":157,"column":85}},"43":{"start":{"line":158,"column":6},"end":{"line":158,"column":28}},"44":{"start":{"line":159,"column":6},"end":{"line":159,"column":12}},"45":{"start":{"line":161,"column":6},"end":{"line":161,"column":25}},"46":{"start":{"line":162,"column":6},"end":{"line":162,"column":12}},"47":{"start":{"line":165,"column":2},"end":{"line":165,"column":13}},"48":{"start":{"line":173,"column":0},"end":{"line":177,"column":2}},"49":{"start":{"line":174,"column":15},"end":{"line":174,"column":38}},"50":{"start":{"line":175,"column":2},"end":{"line":175,"column":70}},"51":{"start":{"line":176,"column":2},"end":{"line":176,"column":34}},"52":{"start":{"line":187,"column":0},"end":{"line":197,"column":2}},"53":{"start":{"line":188,"column":10},"end":{"line":188,"column":19}},"54":{"start":{"line":189,"column":2},"end":{"line":189,"column":27}},"55":{"start":{"line":190,"column":2},"end":{"line":196,"column":3}},"56":{"start":{"line":191,"column":4},"end":{"line":195,"column":6}},"57":{"start":{"line":204,"column":0},"end":{"line":207,"column":2}},"58":{"start":{"line":205,"column":2},"end":{"line":206,"column":69}},"59":{"start":{"line":214,"column":0},"end":{"line":216,"column":2}},"60":{"start":{"line":215,"column":2},"end":{"line":215,"column":54}},"61":{"start":{"line":223,"column":0},"end":{"line":225,"column":2}},"62":{"start":{"line":224,"column":2},"end":{"line":224,"column":36}},"63":{"start":{"line":232,"column":0},"end":{"line":234,"column":2}},"64":{"start":{"line":233,"column":2},"end":{"line":233,"column":48}},"65":{"start":{"line":240,"column":0},"end":{"line":280,"column":1}},"66":{"start":{"line":253,"column":0},"end":{"line":255,"column":2}},"67":{"start":{"line":254,"column":2},"end":{"line":254,"column":89}},"68":{"start":{"line":267,"column":0},"end":{"line":279,"column":2}},"69":{"start":{"line":268,"column":15},"end":{"line":273,"column":3}},"70":{"start":{"line":275,"column":2},"end":{"line":277,"column":3}},"71":{"start":{"line":276,"column":4},"end":{"line":276,"column":35}},"72":{"start":{"line":278,"column":2},"end":{"line":278,"column":13}},"73":{"start":{"line":288,"column":0},"end":{"line":292,"column":2}},"74":{"start":{"line":289,"column":15},"end":{"line":289,"column":43}},"75":{"start":{"line":290,"column":12},"end":{"line":290,"column":59}},"76":{"start":{"line":291,"column":2},"end":{"line":291,"column":94}},"77":{"start":{"line":302,"column":0},"end":{"line":331,"column":2}},"78":{"start":{"line":303,"column":2},"end":{"line":329,"column":3}},"79":{"start":{"line":304,"column":4},"end":{"line":306,"column":5}},"80":{"start":{"line":305,"column":6},"end":{"line":305,"column":12}},"81":{"start":{"line":307,"column":16},"end":{"line":307,"column":39}},"82":{"start":{"line":308,"column":4},"end":{"line":328,"column":5}},"83":{"start":{"line":310,"column":41},"end":{"line":310,"column":60}},"84":{"start":{"line":311,"column":6},"end":{"line":311,"column":30}},"85":{"start":{"line":312,"column":6},"end":{"line":312,"column":12}},"86":{"start":{"line":314,"column":67},"end":{"line":314,"column":84}},"87":{"start":{"line":315,"column":6},"end":{"line":315,"column":27}},"88":{"start":{"line":316,"column":6},"end":{"line":316,"column":12}},"89":{"start":{"line":318,"column":67},"end":{"line":318,"column":84}},"90":{"start":{"line":319,"column":6},"end":{"line":319,"column":27}},"91":{"start":{"line":320,"column":6},"end":{"line":320,"column":12}},"92":{"start":{"line":322,"column":41},"end":{"line":322,"column":60}},"93":{"start":{"line":323,"column":6},"end":{"line":323,"column":29}},"94":{"start":{"line":324,"column":6},"end":{"line":324,"column":12}},"95":{"start":{"line":326,"column":6},"end":{"line":326,"column":25}},"96":{"start":{"line":327,"column":6},"end":{"line":327,"column":12}},"97":{"start":{"line":330,"column":2},"end":{"line":330,"column":13}},"98":{"start":{"line":338,"column":0},"end":{"line":342,"column":2}},"99":{"start":{"line":339,"column":15},"end":{"line":339,"column":38}},"100":{"start":{"line":340,"column":2},"end":{"line":340,"column":84}},"101":{"start":{"line":341,"column":2},"end":{"line":341,"column":34}},"102":{"start":{"line":352,"column":0},"end":{"line":382,"column":2}},"103":{"start":{"line":353,"column":10},"end":{"line":353,"column":19}},"104":{"start":{"line":354,"column":2},"end":{"line":354,"column":29}},"105":{"start":{"line":355,"column":2},"end":{"line":360,"column":3}},"106":{"start":{"line":356,"column":4},"end":{"line":359,"column":6}},"107":{"start":{"line":361,"column":2},"end":{"line":361,"column":26}},"108":{"start":{"line":362,"column":2},"end":{"line":367,"column":3}},"109":{"start":{"line":363,"column":4},"end":{"line":366,"column":6}},"110":{"start":{"line":368,"column":2},"end":{"line":368,"column":26}},"111":{"start":{"line":369,"column":2},"end":{"line":374,"column":3}},"112":{"start":{"line":370,"column":4},"end":{"line":373,"column":6}},"113":{"start":{"line":375,"column":2},"end":{"line":375,"column":28}},"114":{"start":{"line":376,"column":2},"end":{"line":381,"column":3}},"115":{"start":{"line":377,"column":4},"end":{"line":380,"column":6}},"116":{"start":{"line":389,"column":0},"end":{"line":391,"column":2}},"117":{"start":{"line":390,"column":2},"end":{"line":390,"column":79}},"118":{"start":{"line":398,"column":0},"end":{"line":400,"column":2}},"119":{"start":{"line":399,"column":2},"end":{"line":399,"column":59}},"120":{"start":{"line":407,"column":0},"end":{"line":409,"column":2}},"121":{"start":{"line":408,"column":2},"end":{"line":408,"column":104}},"122":{"start":{"line":416,"column":0},"end":{"line":418,"column":2}},"123":{"start":{"line":417,"column":2},"end":{"line":417,"column":57}},"124":{"start":{"line":425,"column":0},"end":{"line":427,"column":2}},"125":{"start":{"line":426,"column":2},"end":{"line":426,"column":104}},"126":{"start":{"line":434,"column":0},"end":{"line":436,"column":2}},"127":{"start":{"line":435,"column":2},"end":{"line":435,"column":57}},"128":{"start":{"line":443,"column":0},"end":{"line":445,"column":2}},"129":{"start":{"line":444,"column":2},"end":{"line":444,"column":79}},"130":{"start":{"line":452,"column":0},"end":{"line":454,"column":2}},"131":{"start":{"line":453,"column":2},"end":{"line":453,"column":59}},"132":{"start":{"line":460,"column":0},"end":{"line":500,"column":1}},"133":{"start":{"line":473,"column":0},"end":{"line":475,"column":2}},"134":{"start":{"line":474,"column":2},"end":{"line":474,"column":87}},"135":{"start":{"line":487,"column":0},"end":{"line":499,"column":2}},"136":{"start":{"line":488,"column":15},"end":{"line":493,"column":3}},"137":{"start":{"line":495,"column":2},"end":{"line":497,"column":3}},"138":{"start":{"line":496,"column":4},"end":{"line":496,"column":35}},"139":{"start":{"line":498,"column":2},"end":{"line":498,"column":13}},"140":{"start":{"line":508,"column":0},"end":{"line":512,"column":2}},"141":{"start":{"line":509,"column":15},"end":{"line":509,"column":43}},"142":{"start":{"line":510,"column":12},"end":{"line":510,"column":57}},"143":{"start":{"line":511,"column":2},"end":{"line":511,"column":92}},"144":{"start":{"line":522,"column":0},"end":{"line":552,"column":2}},"145":{"start":{"line":523,"column":2},"end":{"line":550,"column":3}},"146":{"start":{"line":524,"column":4},"end":{"line":526,"column":5}},"147":{"start":{"line":525,"column":6},"end":{"line":525,"column":12}},"148":{"start":{"line":527,"column":16},"end":{"line":527,"column":39}},"149":{"start":{"line":528,"column":4},"end":{"line":549,"column":5}},"150":{"start":{"line":530,"column":41},"end":{"line":530,"column":60}},"151":{"start":{"line":531,"column":6},"end":{"line":531,"column":30}},"152":{"start":{"line":532,"column":6},"end":{"line":532,"column":12}},"153":{"start":{"line":534,"column":67},"end":{"line":534,"column":84}},"154":{"start":{"line":535,"column":6},"end":{"line":535,"column":27}},"155":{"start":{"line":536,"column":6},"end":{"line":536,"column":12}},"156":{"start":{"line":538,"column":67},"end":{"line":538,"column":84}},"157":{"start":{"line":539,"column":6},"end":{"line":539,"column":27}},"158":{"start":{"line":540,"column":6},"end":{"line":540,"column":12}},"159":{"start":{"line":542,"column":18},"end":{"line":542,"column":34}},"160":{"start":{"line":543,"column":6},"end":{"line":543,"column":73}},"161":{"start":{"line":544,"column":6},"end":{"line":544,"column":27}},"162":{"start":{"line":545,"column":6},"end":{"line":545,"column":12}},"163":{"start":{"line":547,"column":6},"end":{"line":547,"column":25}},"164":{"start":{"line":548,"column":6},"end":{"line":548,"column":12}},"165":{"start":{"line":551,"column":2},"end":{"line":551,"column":13}},"166":{"start":{"line":559,"column":0},"end":{"line":563,"column":2}},"167":{"start":{"line":560,"column":15},"end":{"line":560,"column":38}},"168":{"start":{"line":561,"column":2},"end":{"line":561,"column":82}},"169":{"start":{"line":562,"column":2},"end":{"line":562,"column":34}},"170":{"start":{"line":573,"column":0},"end":{"line":604,"column":2}},"171":{"start":{"line":574,"column":10},"end":{"line":574,"column":19}},"172":{"start":{"line":575,"column":2},"end":{"line":575,"column":29}},"173":{"start":{"line":576,"column":2},"end":{"line":581,"column":3}},"174":{"start":{"line":577,"column":4},"end":{"line":580,"column":6}},"175":{"start":{"line":582,"column":2},"end":{"line":582,"column":26}},"176":{"start":{"line":583,"column":2},"end":{"line":588,"column":3}},"177":{"start":{"line":584,"column":4},"end":{"line":587,"column":6}},"178":{"start":{"line":589,"column":2},"end":{"line":589,"column":26}},"179":{"start":{"line":590,"column":2},"end":{"line":595,"column":3}},"180":{"start":{"line":591,"column":4},"end":{"line":594,"column":6}},"181":{"start":{"line":596,"column":2},"end":{"line":596,"column":26}},"182":{"start":{"line":597,"column":2},"end":{"line":603,"column":3}},"183":{"start":{"line":598,"column":4},"end":{"line":602,"column":6}},"184":{"start":{"line":611,"column":0},"end":{"line":613,"column":2}},"185":{"start":{"line":612,"column":2},"end":{"line":612,"column":79}},"186":{"start":{"line":620,"column":0},"end":{"line":622,"column":2}},"187":{"start":{"line":621,"column":2},"end":{"line":621,"column":59}},"188":{"start":{"line":629,"column":0},"end":{"line":631,"column":2}},"189":{"start":{"line":630,"column":2},"end":{"line":630,"column":104}},"190":{"start":{"line":638,"column":0},"end":{"line":640,"column":2}},"191":{"start":{"line":639,"column":2},"end":{"line":639,"column":57}},"192":{"start":{"line":647,"column":0},"end":{"line":649,"column":2}},"193":{"start":{"line":648,"column":2},"end":{"line":648,"column":104}},"194":{"start":{"line":656,"column":0},"end":{"line":658,"column":2}},"195":{"start":{"line":657,"column":2},"end":{"line":657,"column":57}},"196":{"start":{"line":665,"column":0},"end":{"line":668,"column":2}},"197":{"start":{"line":666,"column":2},"end":{"line":667,"column":57}},"198":{"start":{"line":675,"column":0},"end":{"line":677,"column":2}},"199":{"start":{"line":676,"column":2},"end":{"line":676,"column":54}},"200":{"start":{"line":684,"column":0},"end":{"line":686,"column":2}},"201":{"start":{"line":685,"column":2},"end":{"line":685,"column":35}},"202":{"start":{"line":693,"column":0},"end":{"line":695,"column":2}},"203":{"start":{"line":694,"column":2},"end":{"line":694,"column":48}},"204":{"start":{"line":698,"column":0},"end":{"line":698,"column":55}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":33,"column":32},"end":{"line":33,"column":33}},"loc":{"start":{"line":33,"column":51},"end":{"line":35,"column":1}},"line":33},"1":{"name":"(anonymous_1)","decl":{"start":{"line":54,"column":46},"end":{"line":54,"column":47}},"loc":{"start":{"line":54,"column":65},"end":{"line":56,"column":1}},"line":54},"2":{"name":"(anonymous_2)","decl":{"start":{"line":75,"column":44},"end":{"line":75,"column":45}},"loc":{"start":{"line":75,"column":63},"end":{"line":77,"column":1}},"line":75},"3":{"name":"(anonymous_3)","decl":{"start":{"line":102,"column":51},"end":{"line":102,"column":52}},"loc":{"start":{"line":102,"column":81},"end":{"line":104,"column":1}},"line":102},"4":{"name":"(anonymous_4)","decl":{"start":{"line":116,"column":41},"end":{"line":116,"column":42}},"loc":{"start":{"line":116,"column":72},"end":{"line":125,"column":1}},"line":116},"5":{"name":"(anonymous_5)","decl":{"start":{"line":134,"column":50},"end":{"line":134,"column":51}},"loc":{"start":{"line":134,"column":66},"end":{"line":138,"column":1}},"line":134},"6":{"name":"(anonymous_6)","decl":{"start":{"line":148,"column":60},"end":{"line":148,"column":61}},"loc":{"start":{"line":148,"column":82},"end":{"line":166,"column":1}},"line":148},"7":{"name":"(anonymous_7)","decl":{"start":{"line":173,"column":58},"end":{"line":173,"column":59}},"loc":{"start":{"line":173,"column":69},"end":{"line":177,"column":1}},"line":173},"8":{"name":"(anonymous_8)","decl":{"start":{"line":187,"column":56},"end":{"line":187,"column":57}},"loc":{"start":{"line":187,"column":82},"end":{"line":197,"column":1}},"line":187},"9":{"name":"(anonymous_9)","decl":{"start":{"line":204,"column":53},"end":{"line":204,"column":54}},"loc":{"start":{"line":204,"column":64},"end":{"line":207,"column":1}},"line":204},"10":{"name":"(anonymous_10)","decl":{"start":{"line":214,"column":53},"end":{"line":214,"column":54}},"loc":{"start":{"line":214,"column":69},"end":{"line":216,"column":1}},"line":214},"11":{"name":"(anonymous_11)","decl":{"start":{"line":223,"column":55},"end":{"line":223,"column":56}},"loc":{"start":{"line":223,"column":66},"end":{"line":225,"column":1}},"line":223},"12":{"name":"(anonymous_12)","decl":{"start":{"line":232,"column":53},"end":{"line":232,"column":54}},"loc":{"start":{"line":232,"column":64},"end":{"line":234,"column":1}},"line":232},"13":{"name":"(anonymous_13)","decl":{"start":{"line":253,"column":65},"end":{"line":253,"column":66}},"loc":{"start":{"line":253,"column":95},"end":{"line":255,"column":1}},"line":253},"14":{"name":"(anonymous_14)","decl":{"start":{"line":267,"column":55},"end":{"line":267,"column":56}},"loc":{"start":{"line":267,"column":86},"end":{"line":279,"column":1}},"line":267},"15":{"name":"(anonymous_15)","decl":{"start":{"line":288,"column":64},"end":{"line":288,"column":65}},"loc":{"start":{"line":288,"column":80},"end":{"line":292,"column":1}},"line":288},"16":{"name":"(anonymous_16)","decl":{"start":{"line":302,"column":74},"end":{"line":302,"column":75}},"loc":{"start":{"line":302,"column":96},"end":{"line":331,"column":1}},"line":302},"17":{"name":"(anonymous_17)","decl":{"start":{"line":338,"column":72},"end":{"line":338,"column":73}},"loc":{"start":{"line":338,"column":83},"end":{"line":342,"column":1}},"line":338},"18":{"name":"(anonymous_18)","decl":{"start":{"line":352,"column":70},"end":{"line":352,"column":71}},"loc":{"start":{"line":352,"column":96},"end":{"line":382,"column":1}},"line":352},"19":{"name":"(anonymous_19)","decl":{"start":{"line":389,"column":69},"end":{"line":389,"column":70}},"loc":{"start":{"line":389,"column":80},"end":{"line":391,"column":1}},"line":389},"20":{"name":"(anonymous_20)","decl":{"start":{"line":398,"column":69},"end":{"line":398,"column":70}},"loc":{"start":{"line":398,"column":85},"end":{"line":400,"column":1}},"line":398},"21":{"name":"(anonymous_21)","decl":{"start":{"line":407,"column":66},"end":{"line":407,"column":67}},"loc":{"start":{"line":407,"column":77},"end":{"line":409,"column":1}},"line":407},"22":{"name":"(anonymous_22)","decl":{"start":{"line":416,"column":66},"end":{"line":416,"column":67}},"loc":{"start":{"line":416,"column":82},"end":{"line":418,"column":1}},"line":416},"23":{"name":"(anonymous_23)","decl":{"start":{"line":425,"column":66},"end":{"line":425,"column":67}},"loc":{"start":{"line":425,"column":77},"end":{"line":427,"column":1}},"line":425},"24":{"name":"(anonymous_24)","decl":{"start":{"line":434,"column":66},"end":{"line":434,"column":67}},"loc":{"start":{"line":434,"column":82},"end":{"line":436,"column":1}},"line":434},"25":{"name":"(anonymous_25)","decl":{"start":{"line":443,"column":68},"end":{"line":443,"column":69}},"loc":{"start":{"line":443,"column":79},"end":{"line":445,"column":1}},"line":443},"26":{"name":"(anonymous_26)","decl":{"start":{"line":452,"column":68},"end":{"line":452,"column":69}},"loc":{"start":{"line":452,"column":84},"end":{"line":454,"column":1}},"line":452},"27":{"name":"(anonymous_27)","decl":{"start":{"line":473,"column":63},"end":{"line":473,"column":64}},"loc":{"start":{"line":473,"column":93},"end":{"line":475,"column":1}},"line":473},"28":{"name":"(anonymous_28)","decl":{"start":{"line":487,"column":53},"end":{"line":487,"column":54}},"loc":{"start":{"line":487,"column":84},"end":{"line":499,"column":1}},"line":487},"29":{"name":"(anonymous_29)","decl":{"start":{"line":508,"column":62},"end":{"line":508,"column":63}},"loc":{"start":{"line":508,"column":78},"end":{"line":512,"column":1}},"line":508},"30":{"name":"(anonymous_30)","decl":{"start":{"line":522,"column":72},"end":{"line":522,"column":73}},"loc":{"start":{"line":522,"column":94},"end":{"line":552,"column":1}},"line":522},"31":{"name":"(anonymous_31)","decl":{"start":{"line":559,"column":70},"end":{"line":559,"column":71}},"loc":{"start":{"line":559,"column":81},"end":{"line":563,"column":1}},"line":559},"32":{"name":"(anonymous_32)","decl":{"start":{"line":573,"column":68},"end":{"line":573,"column":69}},"loc":{"start":{"line":573,"column":94},"end":{"line":604,"column":1}},"line":573},"33":{"name":"(anonymous_33)","decl":{"start":{"line":611,"column":67},"end":{"line":611,"column":68}},"loc":{"start":{"line":611,"column":78},"end":{"line":613,"column":1}},"line":611},"34":{"name":"(anonymous_34)","decl":{"start":{"line":620,"column":67},"end":{"line":620,"column":68}},"loc":{"start":{"line":620,"column":83},"end":{"line":622,"column":1}},"line":620},"35":{"name":"(anonymous_35)","decl":{"start":{"line":629,"column":64},"end":{"line":629,"column":65}},"loc":{"start":{"line":629,"column":75},"end":{"line":631,"column":1}},"line":629},"36":{"name":"(anonymous_36)","decl":{"start":{"line":638,"column":64},"end":{"line":638,"column":65}},"loc":{"start":{"line":638,"column":80},"end":{"line":640,"column":1}},"line":638},"37":{"name":"(anonymous_37)","decl":{"start":{"line":647,"column":64},"end":{"line":647,"column":65}},"loc":{"start":{"line":647,"column":75},"end":{"line":649,"column":1}},"line":647},"38":{"name":"(anonymous_38)","decl":{"start":{"line":656,"column":64},"end":{"line":656,"column":65}},"loc":{"start":{"line":656,"column":80},"end":{"line":658,"column":1}},"line":656},"39":{"name":"(anonymous_39)","decl":{"start":{"line":665,"column":64},"end":{"line":665,"column":65}},"loc":{"start":{"line":665,"column":75},"end":{"line":668,"column":1}},"line":665},"40":{"name":"(anonymous_40)","decl":{"start":{"line":675,"column":64},"end":{"line":675,"column":65}},"loc":{"start":{"line":675,"column":80},"end":{"line":677,"column":1}},"line":675},"41":{"name":"(anonymous_41)","decl":{"start":{"line":684,"column":66},"end":{"line":684,"column":67}},"loc":{"start":{"line":684,"column":77},"end":{"line":686,"column":1}},"line":684},"42":{"name":"(anonymous_42)","decl":{"start":{"line":693,"column":64},"end":{"line":693,"column":65}},"loc":{"start":{"line":693,"column":75},"end":{"line":695,"column":1}},"line":693}},"branchMap":{"0":{"loc":{"start":{"line":37,"column":0},"end":{"line":43,"column":1}},"type":"if","locations":[{"start":{"line":37,"column":0},"end":{"line":43,"column":1}},{"start":{"line":37,"column":0},"end":{"line":43,"column":1}}],"line":37},"1":{"loc":{"start":{"line":37,"column":4},"end":{"line":37,"column":27}},"type":"binary-expr","locations":[{"start":{"line":37,"column":4},"end":{"line":37,"column":14}},{"start":{"line":37,"column":18},"end":{"line":37,"column":27}}],"line":37},"2":{"loc":{"start":{"line":58,"column":0},"end":{"line":64,"column":1}},"type":"if","locations":[{"start":{"line":58,"column":0},"end":{"line":64,"column":1}},{"start":{"line":58,"column":0},"end":{"line":64,"column":1}}],"line":58},"3":{"loc":{"start":{"line":58,"column":4},"end":{"line":58,"column":27}},"type":"binary-expr","locations":[{"start":{"line":58,"column":4},"end":{"line":58,"column":14}},{"start":{"line":58,"column":18},"end":{"line":58,"column":27}}],"line":58},"4":{"loc":{"start":{"line":79,"column":0},"end":{"line":85,"column":1}},"type":"if","locations":[{"start":{"line":79,"column":0},"end":{"line":85,"column":1}},{"start":{"line":79,"column":0},"end":{"line":85,"column":1}}],"line":79},"5":{"loc":{"start":{"line":79,"column":4},"end":{"line":79,"column":27}},"type":"binary-expr","locations":[{"start":{"line":79,"column":4},"end":{"line":79,"column":14}},{"start":{"line":79,"column":18},"end":{"line":79,"column":27}}],"line":79},"6":{"loc":{"start":{"line":89,"column":0},"end":{"line":126,"column":1}},"type":"if","locations":[{"start":{"line":89,"column":0},"end":{"line":126,"column":1}},{"start":{"line":89,"column":0},"end":{"line":126,"column":1}}],"line":89},"7":{"loc":{"start":{"line":118,"column":13},"end":{"line":118,"column":92}},"type":"binary-expr","locations":[{"start":{"line":118,"column":14},"end":{"line":118,"column":34}},{"start":{"line":118,"column":39},"end":{"line":118,"column":92}}],"line":118},"8":{"loc":{"start":{"line":121,"column":2},"end":{"line":123,"column":3}},"type":"if","locations":[{"start":{"line":121,"column":2},"end":{"line":123,"column":3}},{"start":{"line":121,"column":2},"end":{"line":123,"column":3}}],"line":121},"9":{"loc":{"start":{"line":150,"column":4},"end":{"line":152,"column":5}},"type":"if","locations":[{"start":{"line":150,"column":4},"end":{"line":152,"column":5}},{"start":{"line":150,"column":4},"end":{"line":152,"column":5}}],"line":150},"10":{"loc":{"start":{"line":154,"column":4},"end":{"line":163,"column":5}},"type":"switch","locations":[{"start":{"line":155,"column":4},"end":{"line":159,"column":12}},{"start":{"line":160,"column":4},"end":{"line":162,"column":12}}],"line":154},"11":{"loc":{"start":{"line":190,"column":2},"end":{"line":196,"column":3}},"type":"if","locations":[{"start":{"line":190,"column":2},"end":{"line":196,"column":3}},{"start":{"line":190,"column":2},"end":{"line":196,"column":3}}],"line":190},"12":{"loc":{"start":{"line":240,"column":0},"end":{"line":280,"column":1}},"type":"if","locations":[{"start":{"line":240,"column":0},"end":{"line":280,"column":1}},{"start":{"line":240,"column":0},"end":{"line":280,"column":1}}],"line":240},"13":{"loc":{"start":{"line":275,"column":2},"end":{"line":277,"column":3}},"type":"if","locations":[{"start":{"line":275,"column":2},"end":{"line":277,"column":3}},{"start":{"line":275,"column":2},"end":{"line":277,"column":3}}],"line":275},"14":{"loc":{"start":{"line":304,"column":4},"end":{"line":306,"column":5}},"type":"if","locations":[{"start":{"line":304,"column":4},"end":{"line":306,"column":5}},{"start":{"line":304,"column":4},"end":{"line":306,"column":5}}],"line":304},"15":{"loc":{"start":{"line":308,"column":4},"end":{"line":328,"column":5}},"type":"switch","locations":[{"start":{"line":309,"column":4},"end":{"line":312,"column":12}},{"start":{"line":313,"column":4},"end":{"line":316,"column":12}},{"start":{"line":317,"column":4},"end":{"line":320,"column":12}},{"start":{"line":321,"column":4},"end":{"line":324,"column":12}},{"start":{"line":325,"column":4},"end":{"line":327,"column":12}}],"line":308},"16":{"loc":{"start":{"line":355,"column":2},"end":{"line":360,"column":3}},"type":"if","locations":[{"start":{"line":355,"column":2},"end":{"line":360,"column":3}},{"start":{"line":355,"column":2},"end":{"line":360,"column":3}}],"line":355},"17":{"loc":{"start":{"line":362,"column":2},"end":{"line":367,"column":3}},"type":"if","locations":[{"start":{"line":362,"column":2},"end":{"line":367,"column":3}},{"start":{"line":362,"column":2},"end":{"line":367,"column":3}}],"line":362},"18":{"loc":{"start":{"line":369,"column":2},"end":{"line":374,"column":3}},"type":"if","locations":[{"start":{"line":369,"column":2},"end":{"line":374,"column":3}},{"start":{"line":369,"column":2},"end":{"line":374,"column":3}}],"line":369},"19":{"loc":{"start":{"line":376,"column":2},"end":{"line":381,"column":3}},"type":"if","locations":[{"start":{"line":376,"column":2},"end":{"line":381,"column":3}},{"start":{"line":376,"column":2},"end":{"line":381,"column":3}}],"line":376},"20":{"loc":{"start":{"line":460,"column":0},"end":{"line":500,"column":1}},"type":"if","locations":[{"start":{"line":460,"column":0},"end":{"line":500,"column":1}},{"start":{"line":460,"column":0},"end":{"line":500,"column":1}}],"line":460},"21":{"loc":{"start":{"line":492,"column":12},"end":{"line":492,"column":78}},"type":"binary-expr","locations":[{"start":{"line":492,"column":13},"end":{"line":492,"column":32}},{"start":{"line":492,"column":37},"end":{"line":492,"column":78}}],"line":492},"22":{"loc":{"start":{"line":495,"column":2},"end":{"line":497,"column":3}},"type":"if","locations":[{"start":{"line":495,"column":2},"end":{"line":497,"column":3}},{"start":{"line":495,"column":2},"end":{"line":497,"column":3}}],"line":495},"23":{"loc":{"start":{"line":524,"column":4},"end":{"line":526,"column":5}},"type":"if","locations":[{"start":{"line":524,"column":4},"end":{"line":526,"column":5}},{"start":{"line":524,"column":4},"end":{"line":526,"column":5}}],"line":524},"24":{"loc":{"start":{"line":528,"column":4},"end":{"line":549,"column":5}},"type":"switch","locations":[{"start":{"line":529,"column":4},"end":{"line":532,"column":12}},{"start":{"line":533,"column":4},"end":{"line":536,"column":12}},{"start":{"line":537,"column":4},"end":{"line":540,"column":12}},{"start":{"line":541,"column":4},"end":{"line":545,"column":12}},{"start":{"line":546,"column":4},"end":{"line":548,"column":12}}],"line":528},"25":{"loc":{"start":{"line":576,"column":2},"end":{"line":581,"column":3}},"type":"if","locations":[{"start":{"line":576,"column":2},"end":{"line":581,"column":3}},{"start":{"line":576,"column":2},"end":{"line":581,"column":3}}],"line":576},"26":{"loc":{"start":{"line":583,"column":2},"end":{"line":588,"column":3}},"type":"if","locations":[{"start":{"line":583,"column":2},"end":{"line":588,"column":3}},{"start":{"line":583,"column":2},"end":{"line":588,"column":3}}],"line":583},"27":{"loc":{"start":{"line":590,"column":2},"end":{"line":595,"column":3}},"type":"if","locations":[{"start":{"line":590,"column":2},"end":{"line":595,"column":3}},{"start":{"line":590,"column":2},"end":{"line":595,"column":3}}],"line":590},"28":{"loc":{"start":{"line":597,"column":2},"end":{"line":603,"column":3}},"type":"if","locations":[{"start":{"line":597,"column":2},"end":{"line":603,"column":3}},{"start":{"line":597,"column":2},"end":{"line":603,"column":3}}],"line":597}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":1,"11":1,"12":0,"13":1,"14":0,"15":1,"16":1,"17":0,"18":1,"19":0,"20":1,"21":1,"22":0,"23":1,"24":1,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1,"49":0,"50":0,"51":0,"52":1,"53":0,"54":0,"55":0,"56":0,"57":1,"58":0,"59":1,"60":0,"61":1,"62":0,"63":1,"64":0,"65":1,"66":1,"67":0,"68":1,"69":0,"70":0,"71":0,"72":0,"73":1,"74":0,"75":0,"76":0,"77":1,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":1,"99":0,"100":0,"101":0,"102":1,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":1,"117":0,"118":1,"119":0,"120":1,"121":0,"122":1,"123":0,"124":1,"125":0,"126":1,"127":0,"128":1,"129":0,"130":1,"131":0,"132":1,"133":1,"134":0,"135":1,"136":0,"137":0,"138":0,"139":0,"140":1,"141":0,"142":0,"143":0,"144":1,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":1,"167":0,"168":0,"169":0,"170":1,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":1,"185":0,"186":1,"187":0,"188":1,"189":0,"190":1,"191":0,"192":1,"193":0,"194":1,"195":0,"196":1,"197":0,"198":1,"199":0,"200":1,"201":0,"202":1,"203":0,"204":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0},"b":{"0":[0,1],"1":[1,0],"2":[0,1],"3":[1,0],"4":[0,1],"5":[1,0],"6":[1,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[1,0],"13":[0,0],"14":[0,0],"15":[0,0,0,0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[1,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0,0,0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9681fa8399191f54dff02e18e319319053ad5d37"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/adminService/index.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/adminService/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}},"4":{"start":{"line":7,"column":15},"end":{"line":7,"column":45}},"5":{"start":{"line":8,"column":16},"end":{"line":8,"column":52}},"6":{"start":{"line":9,"column":16},"end":{"line":9,"column":52}},"7":{"start":{"line":10,"column":22},"end":{"line":10,"column":61}},"8":{"start":{"line":11,"column":17},"end":{"line":11,"column":40}},"9":{"start":{"line":12,"column":16},"end":{"line":12,"column":38}},"10":{"start":{"line":13,"column":16},"end":{"line":13,"column":38}},"11":{"start":{"line":14,"column":23},"end":{"line":14,"column":48}},"12":{"start":{"line":15,"column":19},"end":{"line":15,"column":40}},"13":{"start":{"line":16,"column":16},"end":{"line":16,"column":34}},"14":{"start":{"line":17,"column":26},"end":{"line":20,"column":2}},"15":{"start":{"line":17,"column":45},"end":{"line":20,"column":1}},"16":{"start":{"line":23,"column":8},"end":{"line":23,"column":31}},"17":{"start":{"line":24,"column":8},"end":{"line":24,"column":59}},"18":{"start":{"line":27,"column":8},"end":{"line":28,"column":34}},"19":{"start":{"line":28,"column":12},"end":{"line":28,"column":34}},"20":{"start":{"line":29,"column":20},"end":{"line":29,"column":49}},"21":{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},"22":{"start":{"line":31,"column":12},"end":{"line":31,"column":80}},"23":{"start":{"line":33,"column":25},"end":{"line":36,"column":10}},"24":{"start":{"line":42,"column":26},"end":{"line":52,"column":10}},"25":{"start":{"line":50,"column":48},"end":{"line":50,"column":55}},"26":{"start":{"line":53,"column":26},"end":{"line":80,"column":10}},"27":{"start":{"line":63,"column":12},"end":{"line":68,"column":20}},"28":{"start":{"line":64,"column":16},"end":{"line":68,"column":20}},"29":{"start":{"line":64,"column":61},"end":{"line":68,"column":18}},"30":{"start":{"line":70,"column":12},"end":{"line":74,"column":19}},"31":{"start":{"line":71,"column":16},"end":{"line":74,"column":19}},"32":{"start":{"line":75,"column":12},"end":{"line":79,"column":19}},"33":{"start":{"line":76,"column":16},"end":{"line":79,"column":19}},"34":{"start":{"line":81,"column":8},"end":{"line":95,"column":9}},"35":{"start":{"line":82,"column":27},"end":{"line":85,"column":14}},"36":{"start":{"line":86,"column":12},"end":{"line":86,"column":59}},"37":{"start":{"line":87,"column":12},"end":{"line":87,"column":68}},"38":{"start":{"line":88,"column":12},"end":{"line":88,"column":34}},"39":{"start":{"line":91,"column":12},"end":{"line":93,"column":15}},"40":{"start":{"line":94,"column":12},"end":{"line":94,"column":24}},"41":{"start":{"line":98,"column":8},"end":{"line":98,"column":28}},"42":{"start":{"line":101,"column":24},"end":{"line":101,"column":135}},"43":{"start":{"line":102,"column":8},"end":{"line":102,"column":23}},"44":{"start":{"line":105,"column":24},"end":{"line":105,"column":155}},"45":{"start":{"line":106,"column":8},"end":{"line":106,"column":23}},"46":{"start":{"line":109,"column":24},"end":{"line":109,"column":126}},"47":{"start":{"line":110,"column":8},"end":{"line":110,"column":23}},"48":{"start":{"line":113,"column":24},"end":{"line":113,"column":143}},"49":{"start":{"line":114,"column":8},"end":{"line":114,"column":23}},"50":{"start":{"line":117,"column":28},"end":{"line":117,"column":42}},"51":{"start":{"line":117,"column":40},"end":{"line":117,"column":42}},"52":{"start":{"line":118,"column":20},"end":{"line":118,"column":143}},"53":{"start":{"line":119,"column":8},"end":{"line":120,"column":147}},"54":{"start":{"line":120,"column":12},"end":{"line":120,"column":147}},"55":{"start":{"line":121,"column":8},"end":{"line":122,"column":65}},"56":{"start":{"line":122,"column":12},"end":{"line":122,"column":65}},"57":{"start":{"line":123,"column":8},"end":{"line":123,"column":22}},"58":{"start":{"line":138,"column":26},"end":{"line":138,"column":30}},"59":{"start":{"line":139,"column":21},"end":{"line":139,"column":23}},"60":{"start":{"line":140,"column":23},"end":{"line":140,"column":25}},"61":{"start":{"line":141,"column":8},"end":{"line":176,"column":9}},"62":{"start":{"line":148,"column":29},"end":{"line":152,"column":14}},"63":{"start":{"line":153,"column":33},"end":{"line":153,"column":53}},"64":{"start":{"line":154,"column":12},"end":{"line":170,"column":13}},"65":{"start":{"line":155,"column":29},"end":{"line":155,"column":51}},"66":{"start":{"line":156,"column":16},"end":{"line":168,"column":17}},"67":{"start":{"line":158,"column":24},"end":{"line":158,"column":61}},"68":{"start":{"line":159,"column":24},"end":{"line":159,"column":30}},"69":{"start":{"line":161,"column":24},"end":{"line":161,"column":53}},"70":{"start":{"line":162,"column":24},"end":{"line":162,"column":30}},"71":{"start":{"line":164,"column":24},"end":{"line":164,"column":56}},"72":{"start":{"line":165,"column":24},"end":{"line":165,"column":30}},"73":{"start":{"line":167,"column":24},"end":{"line":167,"column":30}},"74":{"start":{"line":169,"column":16},"end":{"line":169,"column":209}},"75":{"start":{"line":171,"column":12},"end":{"line":171,"column":60}},"76":{"start":{"line":172,"column":12},"end":{"line":172,"column":53}},"77":{"start":{"line":173,"column":12},"end":{"line":175,"column":13}},"78":{"start":{"line":174,"column":16},"end":{"line":174,"column":47}},"79":{"start":{"line":177,"column":8},"end":{"line":177,"column":22}},"80":{"start":{"line":180,"column":0},"end":{"line":180,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":17,"column":26},"end":{"line":17,"column":27}},"loc":{"start":{"line":17,"column":45},"end":{"line":20,"column":1}},"line":17},"2":{"name":"(anonymous_2)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":30},"end":{"line":25,"column":5}},"line":22},"3":{"name":"(anonymous_3)","decl":{"start":{"line":26,"column":4},"end":{"line":26,"column":5}},"loc":{"start":{"line":26,"column":31},"end":{"line":96,"column":5}},"line":26},"4":{"name":"(anonymous_4)","decl":{"start":{"line":50,"column":25},"end":{"line":50,"column":26}},"loc":{"start":{"line":50,"column":48},"end":{"line":50,"column":55}},"line":50},"5":{"name":"(anonymous_5)","decl":{"start":{"line":53,"column":47},"end":{"line":53,"column":48}},"loc":{"start":{"line":53,"column":94},"end":{"line":80,"column":9}},"line":53},"6":{"name":"(anonymous_6)","decl":{"start":{"line":64,"column":38},"end":{"line":64,"column":39}},"loc":{"start":{"line":64,"column":61},"end":{"line":68,"column":18}},"line":64},"7":{"name":"(anonymous_7)","decl":{"start":{"line":97,"column":4},"end":{"line":97,"column":5}},"loc":{"start":{"line":97,"column":17},"end":{"line":99,"column":5}},"line":97},"8":{"name":"(anonymous_8)","decl":{"start":{"line":100,"column":4},"end":{"line":100,"column":5}},"loc":{"start":{"line":100,"column":33},"end":{"line":103,"column":5}},"line":100},"9":{"name":"(anonymous_9)","decl":{"start":{"line":104,"column":4},"end":{"line":104,"column":5}},"loc":{"start":{"line":104,"column":46},"end":{"line":107,"column":5}},"line":104},"10":{"name":"(anonymous_10)","decl":{"start":{"line":108,"column":4},"end":{"line":108,"column":5}},"loc":{"start":{"line":108,"column":30},"end":{"line":111,"column":5}},"line":108},"11":{"name":"(anonymous_11)","decl":{"start":{"line":112,"column":4},"end":{"line":112,"column":5}},"loc":{"start":{"line":112,"column":43},"end":{"line":115,"column":5}},"line":112},"12":{"name":"(anonymous_12)","decl":{"start":{"line":116,"column":4},"end":{"line":116,"column":5}},"loc":{"start":{"line":116,"column":40},"end":{"line":124,"column":5}},"line":116},"13":{"name":"(anonymous_13)","decl":{"start":{"line":117,"column":28},"end":{"line":117,"column":29}},"loc":{"start":{"line":117,"column":40},"end":{"line":117,"column":42}},"line":117},"14":{"name":"(anonymous_14)","decl":{"start":{"line":137,"column":4},"end":{"line":137,"column":5}},"loc":{"start":{"line":137,"column":88},"end":{"line":178,"column":5}},"line":137}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":27,"column":8},"end":{"line":28,"column":34}},"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":28,"column":34}},{"start":{"line":27,"column":8},"end":{"line":28,"column":34}}],"line":27},"4":{"loc":{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},{"start":{"line":30,"column":8},"end":{"line":32,"column":9}}],"line":30},"5":{"loc":{"start":{"line":30,"column":12},"end":{"line":30,"column":36}},"type":"binary-expr","locations":[{"start":{"line":30,"column":12},"end":{"line":30,"column":16}},{"start":{"line":30,"column":20},"end":{"line":30,"column":36}}],"line":30},"6":{"loc":{"start":{"line":63,"column":12},"end":{"line":68,"column":20}},"type":"if","locations":[{"start":{"line":63,"column":12},"end":{"line":68,"column":20}},{"start":{"line":63,"column":12},"end":{"line":68,"column":20}}],"line":63},"7":{"loc":{"start":{"line":70,"column":12},"end":{"line":74,"column":19}},"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":74,"column":19}},{"start":{"line":70,"column":12},"end":{"line":74,"column":19}}],"line":70},"8":{"loc":{"start":{"line":75,"column":12},"end":{"line":79,"column":19}},"type":"if","locations":[{"start":{"line":75,"column":12},"end":{"line":79,"column":19}},{"start":{"line":75,"column":12},"end":{"line":79,"column":19}}],"line":75},"9":{"loc":{"start":{"line":119,"column":8},"end":{"line":120,"column":147}},"type":"if","locations":[{"start":{"line":119,"column":8},"end":{"line":120,"column":147}},{"start":{"line":119,"column":8},"end":{"line":120,"column":147}}],"line":119},"10":{"loc":{"start":{"line":121,"column":8},"end":{"line":122,"column":65}},"type":"if","locations":[{"start":{"line":121,"column":8},"end":{"line":122,"column":65}},{"start":{"line":121,"column":8},"end":{"line":122,"column":65}}],"line":121},"11":{"loc":{"start":{"line":154,"column":12},"end":{"line":170,"column":13}},"type":"if","locations":[{"start":{"line":154,"column":12},"end":{"line":170,"column":13}},{"start":{"line":154,"column":12},"end":{"line":170,"column":13}}],"line":154},"12":{"loc":{"start":{"line":154,"column":16},"end":{"line":154,"column":55}},"type":"binary-expr","locations":[{"start":{"line":154,"column":16},"end":{"line":154,"column":29}},{"start":{"line":154,"column":33},"end":{"line":154,"column":55}}],"line":154},"13":{"loc":{"start":{"line":156,"column":16},"end":{"line":168,"column":17}},"type":"switch","locations":[{"start":{"line":157,"column":20},"end":{"line":159,"column":30}},{"start":{"line":160,"column":20},"end":{"line":162,"column":30}},{"start":{"line":163,"column":20},"end":{"line":165,"column":30}},{"start":{"line":166,"column":20},"end":{"line":167,"column":30}}],"line":156}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/adminService/index.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/adminService/index.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  ApolloClient,\n  DocumentNode,\n  from,\n  HttpLink,\n  InMemoryCache,\n  NormalizedCacheObject,\n  TypedDocumentNode,\n} from '@apollo/client/core';\nimport { onError } from '@apollo/client/link/error';\nimport { RetryLink } from '@apollo/client/link/retry';\nimport fetch from 'cross-fetch';\nimport { Logger } from 'pino';\n\nimport {\n  Category,\n  ENVIRONMENT_VARIABLE_ERROR,\n  MachineError,\n  OnboardingError,\n} from '../../errors';\nimport { Entity } from '../../types';\nimport { log as baseLogger, Uuid } from '../../utils';\n\nimport { GET_ORGANIZATION } from './organization';\nimport { GET_PROGRAMS_BY_ORGANIZATION, GET_SYSTEM_PROGRAMS } from './programs';\nimport { GET_ORGANIZATION_ROLES, GET_SYSTEM_ROLES } from './roles';\n\ntype SupportedConnections =\n  | 'programsConnection'\n  | 'rolesConnection'\n  | 'organizationConnection';\n\nexport type IdNameMapper = {\n  id: Uuid;\n  name: string;\n};\n\nconst idNameTransformer = ({ id, name }: IdNameMapper): IdNameMapper => ({\n  id,\n  name,\n});\n\nexport class AdminService {\n  private static _instance: AdminService;\n  private context: { headers: { authorization: string } };\n\n  private constructor(\n    private _client: ApolloClient<NormalizedCacheObject>,\n    jwt: string\n  ) {\n    this.context = { headers: { authorization: jwt } };\n  }\n\n  public static async getInstance() {\n    if (this._instance) return this._instance;\n\n    const jwt = process.env.ADMIN_SERVICE_JWT;\n    if (!jwt || jwt.length === 0) {\n      throw ENVIRONMENT_VARIABLE_ERROR('ADMIN_SERVICE_JWT');\n    }\n\n    const httpLink = new HttpLink({\n      uri: process.env.ADMIN_SERVICE_URL,\n      fetch,\n    });\n    /**\n     * Only retry network errors\n     *\n     * Reference: https://www.apollographql.com/docs/react/api/link/apollo-link-retry/\n     */\n    const retryLink = new RetryLink({\n      delay: {\n        initial: 300,\n        max: Infinity,\n        jitter: true,\n      },\n      attempts: {\n        max: 5,\n        retryIf: (error, _operation) => !!error,\n      },\n    });\n    const errorLink = onError(({ graphQLErrors, networkError, response }) => {\n      /**\n       * GraphQL errors, will not retry\n       *\n       * - Syntax errors (e.g., a query was malformed) - 4xx error\n       * - Validation errors (e.g., a query included a schema field that doesn't exist) - 4xx error\n       * - Resolver errors (e.g., an error occurred while attempting to populate a query field) - 2xx error\n       *\n       * Reference: https://www.apollographql.com/docs/react/data/error-handling\n       */\n      if (graphQLErrors)\n        graphQLErrors.forEach(({ message, path }) =>\n          baseLogger.error(`GraphQL query failed`, {\n            error: message,\n            api: 'admin',\n            path,\n          })\n        );\n\n      // 4xx/5xx errors\n      if (networkError)\n        baseLogger.error(`Network error while attempting a GraphQL call`, {\n          error: networkError,\n          api: 'admin',\n        });\n\n      if (response)\n        baseLogger.error(`Received response but found an error`, {\n          error: response,\n          api: 'admin',\n        });\n    });\n\n    try {\n      const client = new ApolloClient({\n        link: from([errorLink, retryLink, httpLink]),\n        cache: new InMemoryCache(),\n      });\n\n      this._instance = new AdminService(client, jwt);\n      baseLogger.info('Connected to KidsLoop admin service');\n      return this._instance;\n    } catch (error) {\n      baseLogger.error('❌ Failed to connect KidsLoop admin service', {\n        error,\n      });\n      throw error;\n    }\n  }\n\n  get client(): ApolloClient<NormalizedCacheObject> {\n    return this._client;\n  }\n\n  public async getSystemPrograms(log: Logger): Promise<IdNameMapper[]> {\n    const results = await this.traversePaginatedQuery(\n      GET_SYSTEM_PROGRAMS,\n      idNameTransformer,\n      'programsConnection',\n      log\n    );\n    return results;\n  }\n\n  public async getOrganizationPrograms(\n    orgId: Uuid,\n    log: Logger\n  ): Promise<IdNameMapper[]> {\n    const results = await this.traversePaginatedQuery(\n      GET_PROGRAMS_BY_ORGANIZATION,\n      idNameTransformer,\n      'programsConnection',\n      log,\n      { orgId }\n    );\n    return results;\n  }\n\n  public async getSystemRoles(log: Logger): Promise<IdNameMapper[]> {\n    const results = await this.traversePaginatedQuery(\n      GET_SYSTEM_ROLES,\n      idNameTransformer,\n      'rolesConnection',\n      log\n    );\n    return results;\n  }\n\n  public async getOrganizationRoles(\n    orgId: Uuid,\n    log: Logger\n  ): Promise<IdNameMapper[]> {\n    const results = await this.traversePaginatedQuery(\n      GET_ORGANIZATION_ROLES,\n      idNameTransformer,\n      'rolesConnection',\n      log,\n      { orgId }\n    );\n    return results;\n  }\n\n  public async getOrganization(orgName: string, log: Logger): Promise<Uuid> {\n    const transformer = ({ id }: { id: string }) => id;\n    const org = await this.traversePaginatedQuery(\n      GET_ORGANIZATION,\n      transformer,\n      'organizationConnection',\n      log,\n      { orgName }\n    );\n    if (org.length > 1)\n      throw new Error(\n        `Unexpectedly found more than one organization with the name ${orgName}, unable to identify which one should be used`\n      );\n    if (org.length === 0) throw new Error(`Organization ${orgName} not found`);\n    return org[0];\n  }\n\n  /**\n   * A helper function to send a request to a paginated API and walk the\n   * full length of the cursor, collating all the responses before returning\n   * an array of items\n   *\n   * @param {string} query - The GraphQL query to be sent\n   * @param {function} transformer - A function that will be called on each\n   * node within the response to convert the response data into the desired format\n   * @param {object} variables - Any variables that need to be provided to the\n   * GraphQL query\n   * @returns {T[]} An array of the transformed type\n   */\n  private async traversePaginatedQuery<T, U>(\n    query: DocumentNode | TypedDocumentNode,\n    transformer: (responseData: U) => T,\n    connectionName: SupportedConnections,\n    logger: Logger,\n    variables?: Record<string, unknown>\n  ): Promise<T[]> {\n    let hasNextPage = true;\n    let cursor = '';\n\n    const result: T[] = [];\n    while (hasNextPage) {\n      /**\n       * Don't need to handle errors here because:\n       *\n       * - 4xx/5xx were handled in `errorLink` when initializing `ApolloClient`\n       * - 2xx errors won't exist in this case\n       */\n      const { data } = await this.client.query({\n        query,\n        variables: {\n          count: 50,\n          cursor,\n          ...variables,\n        },\n        context: this.context,\n      });\n\n      const responseData = data[connectionName];\n      if (!responseData || !responseData.pageInfo) {\n        let entity = Entity.UNKNOWN;\n        switch (connectionName) {\n          case 'organizationConnection':\n            entity = Entity.ORGANIZATION;\n            break;\n          case 'rolesConnection':\n            entity = Entity.ROLE;\n            break;\n          case 'programsConnection':\n            entity = Entity.PROGRAM;\n            break;\n          default:\n            break;\n        }\n\n        throw new OnboardingError(\n          MachineError.NOT_FOUND,\n          'When trying to parse the paginated query, found no pages of data',\n          Category.ADMIN_SERVICE,\n          logger,\n          [],\n          { entity }\n        );\n      }\n      hasNextPage = responseData.pageInfo.hasNextPage;\n      cursor = responseData.pageInfo.endCursor;\n\n      for (const { node } of responseData.edges) {\n        result.push(transformer(node));\n      }\n    }\n    return result;\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b9772d7539e4547549e8a2ce60befd5c29c5b480"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/types/index.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/types/index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":42}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":34}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":109}},"4":{"start":{"line":5,"column":80},"end":{"line":5,"column":103}},"5":{"start":{"line":6,"column":16},"end":{"line":6,"column":36}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":112}},"7":{"start":{"line":7,"column":81},"end":{"line":7,"column":106}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":66},"end":{"line":5,"column":67}},"loc":{"start":{"line":5,"column":78},"end":{"line":5,"column":105}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":67},"end":{"line":7,"column":68}},"loc":{"start":{"line":7,"column":79},"end":{"line":7,"column":108}},"line":7}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":9,"5":1,"6":1,"7":0},"f":{"0":9,"1":0},"b":{},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/types/index.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/types/index.ts"],"names":[],"mappings":";;;AAAA,mCAAkC;AAAzB,gGAAA,MAAM,OAAA;AACf,qCAAoC;AAA3B,kGAAA,OAAO,OAAA","sourcesContent":["export { Entity } from './entity';\nexport { Message } from './message';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fa6c4375c437c819088778df0e287555e8ca7760"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/types/entity.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/types/entity.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":78}},"2":{"start":{"line":4,"column":12},"end":{"line":4,"column":28}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":37}},"4":{"start":{"line":7,"column":0},"end":{"line":15,"column":53}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":44}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":32}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":30}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":28}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":28}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":34}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":34}},"12":{"start":{"line":17,"column":4},"end":{"line":32,"column":5}},"13":{"start":{"line":19,"column":12},"end":{"line":19,"column":49}},"14":{"start":{"line":21,"column":12},"end":{"line":21,"column":43}},"15":{"start":{"line":23,"column":12},"end":{"line":23,"column":42}},"16":{"start":{"line":25,"column":12},"end":{"line":25,"column":41}},"17":{"start":{"line":27,"column":12},"end":{"line":27,"column":44}},"18":{"start":{"line":29,"column":12},"end":{"line":29,"column":41}},"19":{"start":{"line":31,"column":12},"end":{"line":31,"column":156}},"20":{"start":{"line":34,"column":0},"end":{"line":34,"column":44}},"21":{"start":{"line":36,"column":4},"end":{"line":51,"column":5}},"22":{"start":{"line":38,"column":12},"end":{"line":38,"column":39}},"23":{"start":{"line":40,"column":12},"end":{"line":40,"column":33}},"24":{"start":{"line":42,"column":12},"end":{"line":42,"column":32}},"25":{"start":{"line":44,"column":12},"end":{"line":44,"column":31}},"26":{"start":{"line":46,"column":12},"end":{"line":46,"column":34}},"27":{"start":{"line":48,"column":12},"end":{"line":48,"column":31}},"28":{"start":{"line":50,"column":12},"end":{"line":50,"column":156}},"29":{"start":{"line":53,"column":0},"end":{"line":53,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":1},"end":{"line":7,"column":2}},"loc":{"start":{"line":7,"column":19},"end":{"line":15,"column":1}},"line":7},"1":{"name":"entityToProtobuf","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":25}},"loc":{"start":{"line":16,"column":34},"end":{"line":33,"column":1}},"line":16},"2":{"name":"protobufToEntity","decl":{"start":{"line":35,"column":9},"end":{"line":35,"column":25}},"loc":{"start":{"line":35,"column":34},"end":{"line":52,"column":1}},"line":35}},"branchMap":{"0":{"loc":{"start":{"line":15,"column":12},"end":{"line":15,"column":51}},"type":"binary-expr","locations":[{"start":{"line":15,"column":12},"end":{"line":15,"column":26}},{"start":{"line":15,"column":31},"end":{"line":15,"column":50}}],"line":15},"1":{"loc":{"start":{"line":17,"column":4},"end":{"line":32,"column":5}},"type":"switch","locations":[{"start":{"line":18,"column":8},"end":{"line":19,"column":49}},{"start":{"line":20,"column":8},"end":{"line":21,"column":43}},{"start":{"line":22,"column":8},"end":{"line":23,"column":42}},{"start":{"line":24,"column":8},"end":{"line":25,"column":41}},{"start":{"line":26,"column":8},"end":{"line":27,"column":44}},{"start":{"line":28,"column":8},"end":{"line":29,"column":41}},{"start":{"line":30,"column":8},"end":{"line":31,"column":156}}],"line":17},"2":{"loc":{"start":{"line":36,"column":4},"end":{"line":51,"column":5}},"type":"switch","locations":[{"start":{"line":37,"column":8},"end":{"line":38,"column":39}},{"start":{"line":39,"column":8},"end":{"line":40,"column":33}},{"start":{"line":41,"column":8},"end":{"line":42,"column":32}},{"start":{"line":43,"column":8},"end":{"line":44,"column":31}},{"start":{"line":45,"column":8},"end":{"line":46,"column":34}},{"start":{"line":47,"column":8},"end":{"line":48,"column":31}},{"start":{"line":49,"column":8},"end":{"line":50,"column":156}}],"line":36}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1},"f":{"0":1,"1":0,"2":0},"b":{"0":[1,1],"1":[0,0,0,0,0,0,0],"2":[0,0,0,0,0,0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/types/entity.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/types/entity.ts"],"names":[],"mappings":";;;AAEA,6BAA8B;AAC9B,sCAAoE;AAEpE,IAAY,MAQX;AARD,WAAY,MAAM;IAChB,uCAA6B,CAAA;IAC7B,2BAAiB,CAAA;IACjB,yBAAe,CAAA;IACf,uBAAa,CAAA;IACb,uBAAa,CAAA;IACb,6BAAmB,CAAA;IACnB,6BAAmB,CAAA;AACrB,CAAC,EARW,MAAM,GAAN,cAAM,KAAN,cAAM,QAQjB;AAED,SAAgB,gBAAgB,CAAC,CAAS,EAAE,GAAW;IACrD,QAAQ,CAAC,EAAE;QACT,KAAK,MAAM,CAAC,YAAY;YACtB,OAAO,SAAK,CAAC,MAAM,CAAC,YAAY,CAAC;QACnC,KAAK,MAAM,CAAC,MAAM;YAChB,OAAO,SAAK,CAAC,MAAM,CAAC,MAAM,CAAC;QAC7B,KAAK,MAAM,CAAC,KAAK;YACf,OAAO,SAAK,CAAC,MAAM,CAAC,KAAK,CAAC;QAC5B,KAAK,MAAM,CAAC,IAAI;YACd,OAAO,SAAK,CAAC,MAAM,CAAC,IAAI,CAAC;QAC3B,KAAK,MAAM,CAAC,OAAO;YACjB,OAAO,SAAK,CAAC,MAAM,CAAC,OAAO,CAAC;QAC9B,KAAK,MAAM,CAAC,IAAI;YACd,OAAO,SAAK,CAAC,MAAM,CAAC,IAAI,CAAC;QAC3B;YACE,MAAM,IAAI,wBAAe,CACvB,qBAAY,CAAC,UAAU,EACvB,6CAA6C,EAC7C,iBAAQ,CAAC,GAAG,EACZ,GAAG,CACJ,CAAC;KACL;AACH,CAAC;AAtBD,4CAsBC;AAED,SAAgB,gBAAgB,CAAC,CAAe,EAAE,GAAW;IAC3D,QAAQ,CAAC,EAAE;QACT,KAAK,SAAK,CAAC,MAAM,CAAC,YAAY;YAC5B,OAAO,MAAM,CAAC,YAAY,CAAC;QAC7B,KAAK,SAAK,CAAC,MAAM,CAAC,MAAM;YACtB,OAAO,MAAM,CAAC,MAAM,CAAC;QACvB,KAAK,SAAK,CAAC,MAAM,CAAC,KAAK;YACrB,OAAO,MAAM,CAAC,KAAK,CAAC;QACtB,KAAK,SAAK,CAAC,MAAM,CAAC,IAAI;YACpB,OAAO,MAAM,CAAC,IAAI,CAAC;QACrB,KAAK,SAAK,CAAC,MAAM,CAAC,OAAO;YACvB,OAAO,MAAM,CAAC,OAAO,CAAC;QACxB,KAAK,SAAK,CAAC,MAAM,CAAC,IAAI;YACpB,OAAO,MAAM,CAAC,IAAI,CAAC;QACrB;YACE,MAAM,IAAI,wBAAe,CACvB,qBAAY,CAAC,UAAU,EACvB,6CAA6C,EAC7C,iBAAQ,CAAC,GAAG,EACZ,GAAG,CACJ,CAAC;KACL;AACH,CAAC;AAtBD,4CAsBC","sourcesContent":["import { Logger } from 'pino';\n\nimport { proto } from '../..';\nimport { Category, MachineError, OnboardingError } from '../errors';\n\nexport enum Entity {\n  ORGANIZATION = 'Organization',\n  SCHOOL = 'School',\n  CLASS = 'Class',\n  USER = 'User',\n  ROLE = 'Role',\n  PROGRAM = 'Program',\n  UNKNOWN = 'Unknown',\n}\n\nexport function entityToProtobuf(e: Entity, log: Logger): proto.Entity {\n  switch (e) {\n    case Entity.ORGANIZATION:\n      return proto.Entity.ORGANIZATION;\n    case Entity.SCHOOL:\n      return proto.Entity.SCHOOL;\n    case Entity.CLASS:\n      return proto.Entity.CLASS;\n    case Entity.USER:\n      return proto.Entity.USER;\n    case Entity.PROGRAM:\n      return proto.Entity.PROGRAM;\n    case Entity.ROLE:\n      return proto.Entity.ROLE;\n    default:\n      throw new OnboardingError(\n        MachineError.APP_CONFIG,\n        'Unable to map app Entity to protobuf Entity',\n        Category.APP,\n        log\n      );\n  }\n}\n\nexport function protobufToEntity(e: proto.Entity, log: Logger): Entity {\n  switch (e) {\n    case proto.Entity.ORGANIZATION:\n      return Entity.ORGANIZATION;\n    case proto.Entity.SCHOOL:\n      return Entity.SCHOOL;\n    case proto.Entity.CLASS:\n      return Entity.CLASS;\n    case proto.Entity.USER:\n      return Entity.USER;\n    case proto.Entity.PROGRAM:\n      return Entity.PROGRAM;\n    case proto.Entity.ROLE:\n      return Entity.ROLE;\n    default:\n      throw new OnboardingError(\n        MachineError.APP_CONFIG,\n        'Unable to map protobuf Entity to app Entity',\n        Category.APP,\n        log\n      );\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ec57a7f584e34324ce5d728c6780a3bf612a99b7"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/types/message.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/types/message.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":25}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":37}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":37}},"4":{"start":{"line":6,"column":16},"end":{"line":6,"column":35}},"5":{"start":{"line":7,"column":34},"end":{"line":7,"column":77}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":23}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":45}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":39}},"9":{"start":{"line":13,"column":18},"end":{"line":13,"column":34}},"10":{"start":{"line":14,"column":8},"end":{"line":15,"column":184}},"11":{"start":{"line":15,"column":12},"end":{"line":15,"column":184}},"12":{"start":{"line":16,"column":47},"end":{"line":16,"column":114}},"13":{"start":{"line":17,"column":8},"end":{"line":17,"column":29}},"14":{"start":{"line":18,"column":8},"end":{"line":18,"column":29}},"15":{"start":{"line":19,"column":8},"end":{"line":19,"column":37}},"16":{"start":{"line":22,"column":8},"end":{"line":22,"column":37}},"17":{"start":{"line":25,"column":18},"end":{"line":25,"column":55}},"18":{"start":{"line":25,"column":45},"end":{"line":25,"column":54}},"19":{"start":{"line":26,"column":22},"end":{"line":26,"column":39}},"20":{"start":{"line":27,"column":20},"end":{"line":27,"column":57}},"21":{"start":{"line":28,"column":8},"end":{"line":29,"column":161}},"22":{"start":{"line":29,"column":12},"end":{"line":29,"column":161}},"23":{"start":{"line":30,"column":8},"end":{"line":30,"column":61}},"24":{"start":{"line":33,"column":18},"end":{"line":33,"column":36}},"25":{"start":{"line":34,"column":8},"end":{"line":34,"column":24}},"26":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"27":{"start":{"line":38,"column":8},"end":{"line":38,"column":54}},"28":{"start":{"line":41,"column":0},"end":{"line":41,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":55},"end":{"line":20,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":18},"end":{"line":23,"column":5}},"line":21},"2":{"name":"(anonymous_2)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":58},"end":{"line":31,"column":5}},"line":24},"3":{"name":"(anonymous_3)","decl":{"start":{"line":25,"column":38},"end":{"line":25,"column":39}},"loc":{"start":{"line":25,"column":45},"end":{"line":25,"column":54}},"line":25},"4":{"name":"(anonymous_4)","decl":{"start":{"line":32,"column":4},"end":{"line":32,"column":5}},"loc":{"start":{"line":32,"column":41},"end":{"line":36,"column":5}},"line":32},"5":{"name":"(anonymous_5)","decl":{"start":{"line":37,"column":4},"end":{"line":37,"column":5}},"loc":{"start":{"line":37,"column":19},"end":{"line":39,"column":5}},"line":37}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":8},"end":{"line":15,"column":184}},"type":"if","locations":[{"start":{"line":14,"column":8},"end":{"line":15,"column":184}},{"start":{"line":14,"column":8},"end":{"line":15,"column":184}}],"line":14},"1":{"loc":{"start":{"line":28,"column":8},"end":{"line":29,"column":161}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":29,"column":161}},{"start":{"line":28,"column":8},"end":{"line":29,"column":161}}],"line":28}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/types/message.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/types/message.ts"],"names":[],"mappings":";;;AAEA,sCAAoE;AACpE,sCAA2D;AAC3D,oCAAiC;AACjC,8EAAqF;AAIrF,MAAa,OAAO;IAKlB,YACkB,GAAQ,EACxB,GAAW,EACK,cAAuB,EACvB,WAAoB;QAHpB,QAAG,GAAH,GAAG,CAAK;QAER,mBAAc,GAAd,cAAc,CAAS;QACvB,gBAAW,GAAX,WAAW,CAAS;QAEpC,MAAM,CAAC,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC;QAC3B,IAAI,CAAC,CAAC;YACJ,MAAM,IAAI,wBAAe,CACvB,qBAAY,CAAC,UAAU,EACvB,oEAAoE,EACpE,iBAAQ,CAAC,QAAQ,EACjB,GAAG,CACJ,CAAC;QACJ,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,GAAG,IAAA,2DAAiC,EAAC,CAAC,CAAC,CAAC;QAC5E,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IAC/B,CAAC;IAED,IAAI,OAAO;QACT,OAAO,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;IAC/B,CAAC;IAEM,MAAM,CAAC,WAAW,CACvB,IAAY,EACZ,GAAW,EACX,cAAuB,EACvB,MAAe;QAEf,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAChD,MAAM,KAAK,GAAG,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC;QAChC,MAAM,GAAG,GAAG,YAAG,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QACzC,IAAI,CAAC,GAAG;YACN,MAAM,IAAI,wBAAe,CACvB,qBAAY,CAAC,KAAK,EAClB,kDAAkD,EAClD,iBAAQ,CAAC,QAAQ,EACjB,GAAG,CACJ,CAAC;QACJ,OAAO,IAAI,OAAO,CAAC,GAAG,EAAE,GAAG,EAAE,cAAc,EAAE,MAAM,CAAC,CAAC;IACvD,CAAC;IAEM,MAAM,CAAC,qBAAqB,CACjC,CAAoB,EACpB,GAAW;QAEX,MAAM,CAAC,GAAG,IAAI,YAAG,EAAE,CAAC;QACpB,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QAChB,OAAO,IAAI,OAAO,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;IAC7B,CAAC;IAEM,SAAS,CAAC,GAAW;QAC1B,OAAO,aAAK,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;IACxC,CAAC;CACF;AA5DD,0BA4DC","sourcesContent":["import { Logger } from 'pino';\n\nimport { Category, MachineError, OnboardingError } from '../errors';\nimport { Action, Job, OnboardingRequest } from '../protos';\nimport { Serde } from '../utils';\nimport { parseOnboardingRequestForMetadata } from '../utils/parseRequestForMetadata';\n\nimport { Entity } from '.';\n\nexport class Message {\n  public readonly action: Action;\n  public readonly entity: Entity;\n  public readonly identifier: string;\n\n  private constructor(\n    public readonly job: Job,\n    log: Logger,\n    public readonly redisMessageId?: string,\n    public readonly redisStream?: string\n  ) {\n    const r = job.getRequest();\n    if (!r)\n      throw new OnboardingError(\n        MachineError.APP_CONFIG,\n        'Expected to find a request embedded in the job, but none was found',\n        Category.PROTOBUF,\n        log\n      );\n    const { entity, identifier, action } = parseOnboardingRequestForMetadata(r);\n    this.action = action;\n    this.entity = entity;\n    this.identifier = identifier;\n  }\n\n  get request(): OnboardingRequest | undefined {\n    return this.job.getRequest();\n  }\n\n  public static deserialize(\n    data: string,\n    log: Logger,\n    redisMessageId?: string,\n    stream?: string\n  ): Message {\n    const d = data.split(',').map((n) => Number(n));\n    const bytes = new Uint8Array(d);\n    const msg = Job.deserializeBinary(bytes);\n    if (!msg)\n      throw new OnboardingError(\n        MachineError.SERDE,\n        'Failed to deserialize binary message from stream',\n        Category.PROTOBUF,\n        log\n      );\n    return new Message(msg, log, redisMessageId, stream);\n  }\n\n  public static fromOnboardingRequest(\n    r: OnboardingRequest,\n    log: Logger\n  ): Message {\n    const j = new Job();\n    j.setRequest(r);\n    return new Message(j, log);\n  }\n\n  public serialize(log: Logger): Uint8Array {\n    return Serde.serialize(this.job, log);\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a6c92b379cdb3a0fe704ed826d7fa5d57ba16183"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/index.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":96}},"2":{"start":{"line":4,"column":12},"end":{"line":4,"column":28}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":100}},"4":{"start":{"line":5,"column":77},"end":{"line":5,"column":94}},"5":{"start":{"line":6,"column":16},"end":{"line":6,"column":36}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":126}},"7":{"start":{"line":7,"column":88},"end":{"line":7,"column":120}},"8":{"start":{"line":8,"column":16},"end":{"line":8,"column":36}},"9":{"start":{"line":9,"column":0},"end":{"line":9,"column":112}},"10":{"start":{"line":9,"column":81},"end":{"line":9,"column":106}},"11":{"start":{"line":10,"column":14},"end":{"line":10,"column":32}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":106}},"13":{"start":{"line":11,"column":79},"end":{"line":11,"column":100}},"14":{"start":{"line":13,"column":4},"end":{"line":13,"column":61}},"15":{"start":{"line":13,"column":36},"end":{"line":13,"column":59}},"16":{"start":{"line":15,"column":0},"end":{"line":15,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":63},"end":{"line":5,"column":64}},"loc":{"start":{"line":5,"column":75},"end":{"line":5,"column":96}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":74},"end":{"line":7,"column":75}},"loc":{"start":{"line":7,"column":86},"end":{"line":7,"column":122}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":67},"end":{"line":9,"column":68}},"loc":{"start":{"line":9,"column":79},"end":{"line":9,"column":108}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":11,"column":65},"end":{"line":11,"column":66}},"loc":{"start":{"line":11,"column":77},"end":{"line":11,"column":102}},"line":11},"4":{"name":"sleep","decl":{"start":{"line":12,"column":15},"end":{"line":12,"column":20}},"loc":{"start":{"line":12,"column":25},"end":{"line":14,"column":1}},"line":12},"5":{"name":"(anonymous_5)","decl":{"start":{"line":13,"column":23},"end":{"line":13,"column":24}},"loc":{"start":{"line":13,"column":36},"end":{"line":13,"column":59}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":6,"5":1,"6":1,"7":0,"8":1,"9":1,"10":4,"11":1,"12":1,"13":0,"14":0,"15":0,"16":1},"f":{"0":6,"1":0,"2":4,"3":0,"4":0,"5":0},"b":{},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/index.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/index.ts"],"names":[],"mappings":";;;AAAA,6BAA4B;AAAnB,0FAAA,GAAG,OAAA;AACZ,qCAA2C;AAAlC,yGAAA,cAAc,OAAA;AACvB,qCAAoC;AAA3B,kGAAA,OAAO,OAAA;AAChB,iCAAgC;AAAvB,8FAAA,KAAK,OAAA;AAKP,KAAK,UAAU,KAAK,CAAC,EAAU;IACpC,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,UAAU,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC;AAC3D,CAAC;AAFD,sBAEC","sourcesContent":["export { log } from './log';\nexport { processMessage } from './process';\nexport { Context } from './context';\nexport { Serde } from './serde';\n\nexport type ExternalUuid = string;\nexport type Uuid = string;\n\nexport async function sleep(ms: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3aa0b626a422f3417a4beb1f4cf047b3ffc450c3"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/log.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/log.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":21}},"4":{"start":{"line":7,"column":15},"end":{"line":7,"column":47}},"5":{"start":{"line":9,"column":15},"end":{"line":9,"column":49}},"6":{"start":{"line":10,"column":0},"end":{"line":14,"column":10}},"7":{"start":{"line":11,"column":27},"end":{"line":13,"column":9}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":15},"end":{"line":11,"column":16}},"loc":{"start":{"line":11,"column":27},"end":{"line":13,"column":9}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":10,"column":85},"end":{"line":10,"column":119}},"type":"binary-expr","locations":[{"start":{"line":10,"column":85},"end":{"line":10,"column":110}},{"start":{"line":10,"column":114},"end":{"line":10,"column":119}}],"line":10},"4":{"loc":{"start":{"line":10,"column":130},"end":{"line":10,"column":180}},"type":"cond-expr","locations":[{"start":{"line":10,"column":168},"end":{"line":10,"column":173}},{"start":{"line":10,"column":176},"end":{"line":10,"column":180}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":6},"f":{"0":1,"1":6},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[1,0],"4":[0,1]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/log.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/log.ts"],"names":[],"mappings":";;;;;;AAAA,gDAAwB;AAExB,8DAA8D;AAC9D,MAAM,MAAM,GAAG,OAAO,CAAC,yBAAyB,CAAC,CAAC;AAErC,QAAA,GAAG,GAAG,IAAA,cAAI,kCAClB,MAAM,EAAE,KACX,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,aAAa,IAAI,KAAK,EACxC,OAAO,EAAE,OAAO,CAAC,GAAG,CAAC,WAAW,KAAK,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,EAC3D,UAAU,EAAE;QACV,KAAK,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;YACjB,KAAK,EAAE,KAAK;SACb,CAAC;KACH,IACD,CAAC","sourcesContent":["import pino from 'pino';\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst nrPino = require('@newrelic/pino-enricher');\n\nexport const log = pino({\n  ...nrPino(),\n  name: process.env.SERVICE_LABEL || 'cil',\n  enabled: process.env.LOG_ENABLED === 'false' ? false : true,\n  formatters: {\n    level: (label) => ({\n      level: label,\n    }),\n  },\n});\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5a0a52f0a229ff23d5bf72c50e744381f078df3d"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/process.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/process.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":37}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":44}},"4":{"start":{"line":6,"column":16},"end":{"line":6,"column":35}},"5":{"start":{"line":7,"column":16},"end":{"line":7,"column":35}},"6":{"start":{"line":8,"column":17},"end":{"line":8,"column":43}},"7":{"start":{"line":9,"column":21},"end":{"line":9,"column":45}},"8":{"start":{"line":12,"column":23},"end":{"line":46,"column":1}},"9":{"start":{"line":13,"column":17},"end":{"line":13,"column":40}},"10":{"start":{"line":14,"column":4},"end":{"line":14,"column":43}},"11":{"start":{"line":15,"column":20},"end":{"line":15,"column":40}},"12":{"start":{"line":16,"column":4},"end":{"line":16,"column":22}},"13":{"start":{"line":17,"column":4},"end":{"line":17,"column":25}},"14":{"start":{"line":18,"column":4},"end":{"line":18,"column":27}},"15":{"start":{"line":19,"column":4},"end":{"line":45,"column":5}},"16":{"start":{"line":20,"column":24},"end":{"line":20,"column":84}},"17":{"start":{"line":21,"column":23},"end":{"line":21,"column":76}},"18":{"start":{"line":22,"column":8},"end":{"line":22,"column":161}},"19":{"start":{"line":24,"column":8},"end":{"line":25,"column":145}},"20":{"start":{"line":25,"column":12},"end":{"line":25,"column":145}},"21":{"start":{"line":26,"column":8},"end":{"line":27,"column":154}},"22":{"start":{"line":27,"column":12},"end":{"line":27,"column":154}},"23":{"start":{"line":28,"column":8},"end":{"line":28,"column":39}},"24":{"start":{"line":29,"column":8},"end":{"line":29,"column":43}},"25":{"start":{"line":30,"column":20},"end":{"line":30,"column":71}},"26":{"start":{"line":31,"column":25},"end":{"line":31,"column":67}},"27":{"start":{"line":32,"column":8},"end":{"line":32,"column":51}},"28":{"start":{"line":33,"column":8},"end":{"line":33,"column":30}},"29":{"start":{"line":34,"column":8},"end":{"line":34,"column":20}},"30":{"start":{"line":37,"column":8},"end":{"line":43,"column":9}},"31":{"start":{"line":38,"column":24},"end":{"line":38,"column":47}},"32":{"start":{"line":39,"column":12},"end":{"line":39,"column":32}},"33":{"start":{"line":42,"column":12},"end":{"line":42,"column":134}},"34":{"start":{"line":44,"column":8},"end":{"line":44,"column":20}},"35":{"start":{"line":47,"column":0},"end":{"line":47,"column":40}},"36":{"start":{"line":48,"column":23},"end":{"line":88,"column":1}},"37":{"start":{"line":49,"column":13},"end":{"line":49,"column":22}},"38":{"start":{"line":50,"column":17},"end":{"line":50,"column":45}},"39":{"start":{"line":51,"column":4},"end":{"line":86,"column":5}},"40":{"start":{"line":53,"column":12},"end":{"line":53,"column":50}},"41":{"start":{"line":54,"column":24},"end":{"line":54,"column":43}},"42":{"start":{"line":55,"column":12},"end":{"line":56,"column":43}},"43":{"start":{"line":56,"column":16},"end":{"line":56,"column":43}},"44":{"start":{"line":57,"column":12},"end":{"line":57,"column":18}},"45":{"start":{"line":60,"column":12},"end":{"line":60,"column":44}},"46":{"start":{"line":61,"column":24},"end":{"line":61,"column":37}},"47":{"start":{"line":62,"column":12},"end":{"line":63,"column":43}},"48":{"start":{"line":63,"column":16},"end":{"line":63,"column":43}},"49":{"start":{"line":64,"column":12},"end":{"line":64,"column":18}},"50":{"start":{"line":67,"column":12},"end":{"line":67,"column":43}},"51":{"start":{"line":68,"column":24},"end":{"line":68,"column":36}},"52":{"start":{"line":69,"column":12},"end":{"line":70,"column":43}},"53":{"start":{"line":70,"column":16},"end":{"line":70,"column":43}},"54":{"start":{"line":71,"column":12},"end":{"line":71,"column":18}},"55":{"start":{"line":74,"column":12},"end":{"line":74,"column":42}},"56":{"start":{"line":75,"column":25},"end":{"line":75,"column":36}},"57":{"start":{"line":76,"column":12},"end":{"line":77,"column":44}},"58":{"start":{"line":77,"column":16},"end":{"line":77,"column":44}},"59":{"start":{"line":78,"column":12},"end":{"line":78,"column":18}},"60":{"start":{"line":81,"column":12},"end":{"line":81,"column":62}},"61":{"start":{"line":82,"column":12},"end":{"line":82,"column":18}},"62":{"start":{"line":85,"column":12},"end":{"line":85,"column":18}},"63":{"start":{"line":87,"column":4},"end":{"line":87,"column":24}},"64":{"start":{"line":89,"column":22},"end":{"line":127,"column":1}},"65":{"start":{"line":90,"column":17},"end":{"line":90,"column":45}},"66":{"start":{"line":91,"column":13},"end":{"line":91,"column":22}},"67":{"start":{"line":92,"column":4},"end":{"line":93,"column":28}},"68":{"start":{"line":93,"column":8},"end":{"line":93,"column":28}},"69":{"start":{"line":94,"column":4},"end":{"line":125,"column":5}},"70":{"start":{"line":96,"column":12},"end":{"line":96,"column":50}},"71":{"start":{"line":97,"column":24},"end":{"line":97,"column":43}},"72":{"start":{"line":98,"column":12},"end":{"line":99,"column":43}},"73":{"start":{"line":99,"column":16},"end":{"line":99,"column":43}},"74":{"start":{"line":100,"column":12},"end":{"line":100,"column":18}},"75":{"start":{"line":103,"column":12},"end":{"line":103,"column":44}},"76":{"start":{"line":104,"column":24},"end":{"line":104,"column":37}},"77":{"start":{"line":105,"column":12},"end":{"line":106,"column":43}},"78":{"start":{"line":106,"column":16},"end":{"line":106,"column":43}},"79":{"start":{"line":107,"column":12},"end":{"line":107,"column":18}},"80":{"start":{"line":110,"column":12},"end":{"line":110,"column":43}},"81":{"start":{"line":111,"column":24},"end":{"line":111,"column":36}},"82":{"start":{"line":112,"column":12},"end":{"line":113,"column":43}},"83":{"start":{"line":113,"column":16},"end":{"line":113,"column":43}},"84":{"start":{"line":114,"column":12},"end":{"line":114,"column":18}},"85":{"start":{"line":117,"column":12},"end":{"line":117,"column":42}},"86":{"start":{"line":118,"column":25},"end":{"line":118,"column":36}},"87":{"start":{"line":119,"column":12},"end":{"line":120,"column":44}},"88":{"start":{"line":120,"column":16},"end":{"line":120,"column":44}},"89":{"start":{"line":121,"column":12},"end":{"line":121,"column":18}},"90":{"start":{"line":124,"column":12},"end":{"line":124,"column":18}},"91":{"start":{"line":126,"column":4},"end":{"line":126,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":12,"column":23},"end":{"line":12,"column":24}},"loc":{"start":{"line":12,"column":44},"end":{"line":46,"column":1}},"line":12},"1":{"name":"(anonymous_1)","decl":{"start":{"line":48,"column":23},"end":{"line":48,"column":24}},"loc":{"start":{"line":48,"column":30},"end":{"line":88,"column":1}},"line":48},"2":{"name":"(anonymous_2)","decl":{"start":{"line":89,"column":22},"end":{"line":89,"column":23}},"loc":{"start":{"line":89,"column":29},"end":{"line":127,"column":1}},"line":89}},"branchMap":{"0":{"loc":{"start":{"line":24,"column":8},"end":{"line":25,"column":145}},"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":25,"column":145}},{"start":{"line":24,"column":8},"end":{"line":25,"column":145}}],"line":24},"1":{"loc":{"start":{"line":26,"column":8},"end":{"line":27,"column":154}},"type":"if","locations":[{"start":{"line":26,"column":8},"end":{"line":27,"column":154}},{"start":{"line":26,"column":8},"end":{"line":27,"column":154}}],"line":26},"2":{"loc":{"start":{"line":37,"column":8},"end":{"line":43,"column":9}},"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":43,"column":9}},{"start":{"line":37,"column":8},"end":{"line":43,"column":9}}],"line":37},"3":{"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":89}},"type":"binary-expr","locations":[{"start":{"line":37,"column":12},"end":{"line":37,"column":44}},{"start":{"line":37,"column":48},"end":{"line":37,"column":89}}],"line":37},"4":{"loc":{"start":{"line":51,"column":4},"end":{"line":86,"column":5}},"type":"switch","locations":[{"start":{"line":52,"column":8},"end":{"line":58,"column":9}},{"start":{"line":59,"column":8},"end":{"line":65,"column":9}},{"start":{"line":66,"column":8},"end":{"line":72,"column":9}},{"start":{"line":73,"column":8},"end":{"line":79,"column":9}},{"start":{"line":80,"column":8},"end":{"line":83,"column":9}},{"start":{"line":84,"column":8},"end":{"line":85,"column":18}}],"line":51},"5":{"loc":{"start":{"line":55,"column":12},"end":{"line":56,"column":43}},"type":"if","locations":[{"start":{"line":55,"column":12},"end":{"line":56,"column":43}},{"start":{"line":55,"column":12},"end":{"line":56,"column":43}}],"line":55},"6":{"loc":{"start":{"line":62,"column":12},"end":{"line":63,"column":43}},"type":"if","locations":[{"start":{"line":62,"column":12},"end":{"line":63,"column":43}},{"start":{"line":62,"column":12},"end":{"line":63,"column":43}}],"line":62},"7":{"loc":{"start":{"line":69,"column":12},"end":{"line":70,"column":43}},"type":"if","locations":[{"start":{"line":69,"column":12},"end":{"line":70,"column":43}},{"start":{"line":69,"column":12},"end":{"line":70,"column":43}}],"line":69},"8":{"loc":{"start":{"line":76,"column":12},"end":{"line":77,"column":44}},"type":"if","locations":[{"start":{"line":76,"column":12},"end":{"line":77,"column":44}},{"start":{"line":76,"column":12},"end":{"line":77,"column":44}}],"line":76},"9":{"loc":{"start":{"line":92,"column":4},"end":{"line":93,"column":28}},"type":"if","locations":[{"start":{"line":92,"column":4},"end":{"line":93,"column":28}},{"start":{"line":92,"column":4},"end":{"line":93,"column":28}}],"line":92},"10":{"loc":{"start":{"line":94,"column":4},"end":{"line":125,"column":5}},"type":"switch","locations":[{"start":{"line":95,"column":8},"end":{"line":101,"column":9}},{"start":{"line":102,"column":8},"end":{"line":108,"column":9}},{"start":{"line":109,"column":8},"end":{"line":115,"column":9}},{"start":{"line":116,"column":8},"end":{"line":122,"column":9}},{"start":{"line":123,"column":8},"end":{"line":124,"column":18}}],"line":94},"11":{"loc":{"start":{"line":98,"column":12},"end":{"line":99,"column":43}},"type":"if","locations":[{"start":{"line":98,"column":12},"end":{"line":99,"column":43}},{"start":{"line":98,"column":12},"end":{"line":99,"column":43}}],"line":98},"12":{"loc":{"start":{"line":105,"column":12},"end":{"line":106,"column":43}},"type":"if","locations":[{"start":{"line":105,"column":12},"end":{"line":106,"column":43}},{"start":{"line":105,"column":12},"end":{"line":106,"column":43}}],"line":105},"13":{"loc":{"start":{"line":112,"column":12},"end":{"line":113,"column":43}},"type":"if","locations":[{"start":{"line":112,"column":12},"end":{"line":113,"column":43}},{"start":{"line":112,"column":12},"end":{"line":113,"column":43}}],"line":112},"14":{"loc":{"start":{"line":119,"column":12},"end":{"line":120,"column":44}},"type":"if","locations":[{"start":{"line":119,"column":12},"end":{"line":120,"column":44}},{"start":{"line":119,"column":12},"end":{"line":120,"column":44}}],"line":119}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":1,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":1,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0,0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0,0,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/process.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/process.ts"],"names":[],"mappings":"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","sourcesContent":["import { Logger } from 'pino';\n\nimport { Errors, OnboardingError } from '../errors';\nimport {\n  Entity,\n  LinkEntities,\n  OnboardingRequest,\n  Response,\n} from '../protos/api_pb';\nimport { Producer } from '../redis';\nimport { Message } from '../types';\nimport { actionToString } from '../types/action';\nimport { ValidationWrapper } from '../validation';\n\nimport { ExternalUuid } from '.';\n\n// @TODO - Need to actually implement error handling around this\n// Currently we either throw an error or succeed (don't send error messages back)\nexport const processMessage = async (\n  data: OnboardingRequest,\n  log: Logger\n): Promise<Response> => {\n  const resp = new Response();\n  resp.setRequestId(data.getRequestId());\n  const [e, id] = mapPayloadCase(data);\n  resp.setEntity(e);\n  resp.setEntityId(id);\n  resp.setSuccess(false);\n\n  try {\n    const wrapper = await ValidationWrapper.parseRequest(data, log);\n    const logger = wrapper.logger.child({ currentOperation: 'PUBLISH' });\n    logger.info(\n      `Received request to perform action: ${actionToString(\n        wrapper.data.getAction()\n      )} ${wrapper.data.getPayloadCase().toString()}`\n    );\n    // @TODO - Can probably remove these once we're confident that they line up\n    if (e !== wrapper.entity)\n      logger.warn(\n        `When parsing request expected the initially identified entity ${e} to match the newly parsed entity ${wrapper.entity}`\n      );\n    if (id !== wrapper.entityId)\n      logger.warn(\n        `When parsing request expected the initially identified entity id ${id} to match the newly parsed entity id ${wrapper.entityId}`\n      );\n    resp.setEntity(wrapper.entity);\n    resp.setEntityId(wrapper.entityId);\n    const msg = Message.fromOnboardingRequest(data, logger);\n    const producer = await Producer.getInstance(logger);\n    await producer.publishMessage(msg, logger);\n    resp.setSuccess(true);\n    return resp;\n  } catch (error) {\n    if (error instanceof Errors || error instanceof OnboardingError) {\n      const err = error.toProtobufError();\n      resp.setErrors(err);\n    } else {\n      log.warn(\n        `Found an error that wasn't correctly converted to a response - if you're seeing this the code needs an update`\n      );\n    }\n\n    return resp;\n  }\n};\n\nconst mapPayloadCase = (r: OnboardingRequest): [Entity, ExternalUuid] => {\n  let id = 'UNKNOWN';\n  let entity = Entity.ORGANIZATION;\n  switch (r.getPayloadCase()) {\n    case OnboardingRequest.PayloadCase.ORGANIZATION: {\n      entity = Entity.ORGANIZATION;\n      const org = r.getOrganization();\n      if (org) id = org.getExternalUuid();\n      break;\n    }\n    case OnboardingRequest.PayloadCase.SCHOOL: {\n      entity = Entity.SCHOOL;\n      const sch = r.getSchool();\n      if (sch) id = sch.getExternalUuid();\n      break;\n    }\n    case OnboardingRequest.PayloadCase.CLASS: {\n      entity = Entity.CLASS;\n      const cla = r.getClass();\n      if (cla) id = cla.getExternalUuid();\n      break;\n    }\n    case OnboardingRequest.PayloadCase.USER: {\n      entity = Entity.USER;\n      const user = r.getUser();\n      if (user) id = user.getExternalUuid();\n      break;\n    }\n    case OnboardingRequest.PayloadCase.LINK_ENTITIES: {\n      [entity, id] = mapTargetCase(r.getLinkEntities());\n      break;\n    }\n    default:\n      break;\n  }\n  return [entity, id];\n};\n\nconst mapTargetCase = (r?: LinkEntities): [Entity, ExternalUuid] => {\n  let entity = Entity.ORGANIZATION;\n  let id = 'UNKNOWN';\n  if (!r) return [entity, id];\n  switch (r.getTargetCase()) {\n    case LinkEntities.TargetCase.ORGANIZATION: {\n      entity = Entity.ORGANIZATION;\n      const org = r.getOrganization();\n      if (org) id = org.getExternalUuid();\n      break;\n    }\n    case LinkEntities.TargetCase.SCHOOL: {\n      entity = Entity.SCHOOL;\n      const sch = r.getSchool();\n      if (sch) id = sch.getExternalUuid();\n      break;\n    }\n    case LinkEntities.TargetCase.CLASS: {\n      entity = Entity.CLASS;\n      const cla = r.getClass();\n      if (cla) id = cla.getExternalUuid();\n      break;\n    }\n    case LinkEntities.TargetCase.USER: {\n      entity = Entity.USER;\n      const user = r.getUser();\n      if (user) id = user.getExternalUuid();\n      break;\n    }\n    default:\n      break;\n  }\n  return [entity, id];\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"56360a0508eaec43bfbc138f3dc5691fa0e2af9a"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/index.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":67}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":34}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":119}},"4":{"start":{"line":5,"column":85},"end":{"line":5,"column":113}},"5":{"start":{"line":6,"column":17},"end":{"line":6,"column":38}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":115}},"7":{"start":{"line":7,"column":82},"end":{"line":7,"column":109}},"8":{"start":{"line":8,"column":17},"end":{"line":8,"column":38}},"9":{"start":{"line":9,"column":0},"end":{"line":9,"column":115}},"10":{"start":{"line":9,"column":82},"end":{"line":9,"column":109}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":71},"end":{"line":5,"column":72}},"loc":{"start":{"line":5,"column":83},"end":{"line":5,"column":115}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":68},"end":{"line":7,"column":69}},"loc":{"start":{"line":7,"column":80},"end":{"line":7,"column":111}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":68},"end":{"line":9,"column":69}},"loc":{"start":{"line":9,"column":80},"end":{"line":9,"column":111}},"line":9}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":1,"6":1,"7":0,"8":1,"9":1,"10":0},"f":{"0":0,"1":0,"2":0},"b":{},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/index.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/index.ts"],"names":[],"mappings":";;;AAAA,mCAAuC;AAA9B,qGAAA,WAAW,OAAA;AACpB,uCAAsC;AAA7B,oGAAA,QAAQ,OAAA;AACjB,uCAAsC;AAA7B,oGAAA,QAAQ,OAAA","sourcesContent":["export { RedisClient } from './client';\nexport { Producer } from './producer';\nexport { Consumer } from './consumer';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a8958f04662d53d865147273e866258ce79b8602"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/client.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/client.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":29}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":53}},"5":{"start":{"line":8,"column":17},"end":{"line":8,"column":37}},"6":{"start":{"line":11,"column":8},"end":{"line":11,"column":27}},"7":{"start":{"line":14,"column":8},"end":{"line":15,"column":34}},"8":{"start":{"line":15,"column":12},"end":{"line":15,"column":34}},"9":{"start":{"line":16,"column":8},"end":{"line":16,"column":58}},"10":{"start":{"line":17,"column":8},"end":{"line":17,"column":32}},"11":{"start":{"line":18,"column":8},"end":{"line":27,"column":9}},"12":{"start":{"line":19,"column":27},"end":{"line":19,"column":59}},"13":{"start":{"line":20,"column":12},"end":{"line":20,"column":61}},"14":{"start":{"line":21,"column":12},"end":{"line":21,"column":53}},"15":{"start":{"line":22,"column":12},"end":{"line":22,"column":34}},"16":{"start":{"line":25,"column":24},"end":{"line":25,"column":75}},"17":{"start":{"line":26,"column":12},"end":{"line":26,"column":113}},"18":{"start":{"line":31,"column":26},"end":{"line":31,"column":95}},"19":{"start":{"line":32,"column":21},"end":{"line":32,"column":64}},"20":{"start":{"line":33,"column":21},"end":{"line":33,"column":43}},"21":{"start":{"line":34,"column":25},"end":{"line":34,"column":51}},"22":{"start":{"line":35,"column":28},"end":{"line":35,"column":32}},"23":{"start":{"line":37,"column":8},"end":{"line":55,"column":9}},"24":{"start":{"line":38,"column":12},"end":{"line":48,"column":15}},"25":{"start":{"line":51,"column":12},"end":{"line":54,"column":15}},"26":{"start":{"line":56,"column":8},"end":{"line":56,"column":30}},"27":{"start":{"line":57,"column":8},"end":{"line":57,"column":21}},"28":{"start":{"line":60,"column":8},"end":{"line":60,"column":26}},"29":{"start":{"line":63,"column":0},"end":{"line":63,"column":34}},"30":{"start":{"line":65,"column":15},"end":{"line":65,"column":43}},"31":{"start":{"line":66,"column":4},"end":{"line":68,"column":5}},"32":{"start":{"line":67,"column":8},"end":{"line":67,"column":79}},"33":{"start":{"line":69,"column":4},"end":{"line":74,"column":5}},"34":{"start":{"line":70,"column":20},"end":{"line":70,"column":39}},"35":{"start":{"line":71,"column":8},"end":{"line":73,"column":9}},"36":{"start":{"line":72,"column":12},"end":{"line":72,"column":67}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":23},"end":{"line":12,"column":5}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":34},"end":{"line":28,"column":5}},"line":13},"3":{"name":"(anonymous_3)","decl":{"start":{"line":29,"column":4},"end":{"line":29,"column":5}},"loc":{"start":{"line":29,"column":32},"end":{"line":58,"column":5}},"line":29},"4":{"name":"(anonymous_4)","decl":{"start":{"line":59,"column":4},"end":{"line":59,"column":5}},"loc":{"start":{"line":59,"column":17},"end":{"line":61,"column":5}},"line":59},"5":{"name":"checkRedisEnvVars","decl":{"start":{"line":64,"column":9},"end":{"line":64,"column":26}},"loc":{"start":{"line":64,"column":47},"end":{"line":75,"column":1}},"line":64}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":14,"column":8},"end":{"line":15,"column":34}},"type":"if","locations":[{"start":{"line":14,"column":8},"end":{"line":15,"column":34}},{"start":{"line":14,"column":8},"end":{"line":15,"column":34}}],"line":14},"4":{"loc":{"start":{"line":25,"column":24},"end":{"line":25,"column":75}},"type":"cond-expr","locations":[{"start":{"line":25,"column":49},"end":{"line":25,"column":62}},{"start":{"line":25,"column":65},"end":{"line":25,"column":75}}],"line":25},"5":{"loc":{"start":{"line":31,"column":26},"end":{"line":31,"column":95}},"type":"cond-expr","locations":[{"start":{"line":31,"column":84},"end":{"line":31,"column":86}},{"start":{"line":31,"column":89},"end":{"line":31,"column":95}}],"line":31},"6":{"loc":{"start":{"line":31,"column":26},"end":{"line":31,"column":81}},"type":"binary-expr","locations":[{"start":{"line":31,"column":26},"end":{"line":31,"column":64}},{"start":{"line":31,"column":68},"end":{"line":31,"column":81}}],"line":31},"7":{"loc":{"start":{"line":32,"column":21},"end":{"line":32,"column":64}},"type":"binary-expr","locations":[{"start":{"line":32,"column":21},"end":{"line":32,"column":51}},{"start":{"line":32,"column":55},"end":{"line":32,"column":64}}],"line":32},"8":{"loc":{"start":{"line":37,"column":8},"end":{"line":55,"column":9}},"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":55,"column":9}},{"start":{"line":37,"column":8},"end":{"line":55,"column":9}}],"line":37},"9":{"loc":{"start":{"line":64,"column":27},"end":{"line":64,"column":45}},"type":"default-arg","locations":[{"start":{"line":64,"column":41},"end":{"line":64,"column":45}}],"line":64},"10":{"loc":{"start":{"line":66,"column":4},"end":{"line":68,"column":5}},"type":"if","locations":[{"start":{"line":66,"column":4},"end":{"line":68,"column":5}},{"start":{"line":66,"column":4},"end":{"line":68,"column":5}}],"line":66},"11":{"loc":{"start":{"line":71,"column":8},"end":{"line":73,"column":9}},"type":"if","locations":[{"start":{"line":71,"column":8},"end":{"line":73,"column":9}},{"start":{"line":71,"column":8},"end":{"line":73,"column":9}}],"line":71},"12":{"loc":{"start":{"line":71,"column":12},"end":{"line":71,"column":36}},"type":"binary-expr","locations":[{"start":{"line":71,"column":12},"end":{"line":71,"column":16}},{"start":{"line":71,"column":20},"end":{"line":71,"column":36}}],"line":71}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0},"f":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0],"10":[0,0],"11":[0,0],"12":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/client.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/client.ts"],"names":[],"mappings":";;;;;;AAAA,sDAAwB;AAGxB,sCAKmB;AAEnB,MAAa,WAAW;IAGtB,YAA4B,KAA0B;QAA1B,UAAK,GAAL,KAAK,CAAqB;IAAG,CAAC;IAEnD,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC,GAAW;QACzC,IAAI,IAAI,CAAC,SAAS;YAAE,OAAO,IAAI,CAAC,SAAS,CAAC;QAC1C,GAAG,CAAC,IAAI,CAAC,uCAAuC,CAAC,CAAC;QAClD,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAExB,IAAI;YACF,MAAM,MAAM,GAAG,MAAM,WAAW,CAAC,YAAY,EAAE,CAAC;YAChD,GAAG,CAAC,IAAI,CAAC,sCAAsC,CAAC,CAAC;YACjD,IAAI,CAAC,SAAS,GAAG,IAAI,WAAW,CAAC,MAAM,CAAC,CAAC;YACzC,OAAO,IAAI,CAAC,SAAS,CAAC;SACvB;QAAC,OAAO,KAAK,EAAE;YACd,MAAM,GAAG,GAAG,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,KAAK,EAAE,CAAC;YAChE,MAAM,IAAI,wBAAe,CAAC,qBAAY,CAAC,OAAO,EAAE,GAAG,EAAE,iBAAQ,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;SAC3E;IACH,CAAC;IAEM,MAAM,CAAC,KAAK,CAAC,YAAY;;QAC9B,MAAM,SAAS,GAAG,MAAA,OAAO,CAAC,GAAG,CAAC,UAAU,mCAAI,MAAM,CAAC;QACnD,MAAM,IAAI,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,SAAS,CAAC;QACzD,MAAM,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC;QACpC,MAAM,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC;QAC5C,MAAM,WAAW,GAAG,IAAI,CAAC;QAEzB,IAAI,KAA0B,CAAC;QAC/B,IAAI,SAAS,KAAK,SAAS,EAAE;YAC3B,KAAK,GAAG,IAAI,iBAAC,CAAC,OAAO,CACnB;gBACE;oBACE,IAAI;oBACJ,IAAI;iBACL;aACF,EACD;gBACE,WAAW;gBACX,YAAY,EAAE;oBACZ,QAAQ;iBACT;aACF,CACF,CAAC;SACH;aAAM;YACL,KAAK,GAAG,IAAI,iBAAC,CAAC,IAAI,EAAE,IAAI,EAAE;gBACxB,WAAW,EAAE,IAAI;gBACjB,QAAQ;aACT,CAAC,CAAC;SACJ;QACD,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;QACtB,OAAO,KAAK,CAAC;IACf,CAAC;IAED,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,KAAK,CAAC;IACpB,CAAC;CACF;AAzDD,kCAyDC;AAED,SAAS,iBAAiB,CAAC,WAAW,GAAG,IAAI;IAC3C,IAAI,IAAI,GAAG,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;IACxC,IAAI,WAAW,EAAE;QACf,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,2BAA2B,EAAE,mBAAmB,CAAC,CAAC,CAAC;KACxE;IACD,KAAK,MAAM,MAAM,IAAI,IAAI,EAAE;QACzB,MAAM,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAChC,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC,MAAM,KAAK,CAAC,EAAE;YAC5B,MAAM,IAAA,mCAA0B,EAAC,MAAM,CAAC,CAAC;SAC1C;KACF;AACH,CAAC","sourcesContent":["import R from 'ioredis';\nimport { Logger } from 'pino';\n\nimport {\n  Category,\n  ENVIRONMENT_VARIABLE_ERROR,\n  MachineError,\n  OnboardingError,\n} from '../errors';\n\nexport class RedisClient {\n  private static _instance: RedisClient;\n\n  private constructor(private redis: R.Redis | R.Cluster) {}\n\n  public static async getInstance(log: Logger): Promise<RedisClient> {\n    if (this._instance) return this._instance;\n    log.info('Attempting to initialize Redis stream');\n    checkRedisEnvVars(true);\n\n    try {\n      const client = await RedisClient.createClient();\n      log.info('Succesfully initialized Redis client');\n      this._instance = new RedisClient(client);\n      return this._instance;\n    } catch (error) {\n      const msg = error instanceof Error ? error.message : `${error}`;\n      throw new OnboardingError(MachineError.NETWORK, msg, Category.REDIS, log);\n    }\n  }\n\n  public static async createClient(): Promise<R.Redis | R.Cluster> {\n    const redisMode = process.env.REDIS_MODE ?? `NODE`;\n    const port = Number(process.env.REDIS_PORT) || undefined;\n    const host = process.env.REDIS_HOST;\n    const password = process.env.REDIS_PASSWORD;\n    const lazyConnect = true;\n\n    let redis: R.Redis | R.Cluster;\n    if (redisMode === `CLUSTER`) {\n      redis = new R.Cluster(\n        [\n          {\n            port,\n            host,\n          },\n        ],\n        {\n          lazyConnect,\n          redisOptions: {\n            password,\n          },\n        }\n      );\n    } else {\n      redis = new R(port, host, {\n        lazyConnect: true,\n        password,\n      });\n    }\n    await redis.connect();\n    return redis;\n  }\n\n  get client(): R.Redis | R.Cluster {\n    return this.redis;\n  }\n}\n\nfunction checkRedisEnvVars(checkStream = true): void {\n  let vars = ['REDIS_HOST', 'REDIS_PORT'];\n  if (checkStream) {\n    vars = vars.concat(['REDIS_CONSUMER_GROUP_NAME', 'REDIS_STREAM_NAME']);\n  }\n  for (const envVar of vars) {\n    const env = process.env[envVar];\n    if (!env || env.length === 0) {\n      throw ENVIRONMENT_VARIABLE_ERROR(envVar);\n    }\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"23ed69a73fee04ac532290cff0799b6822b7446b"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/producer.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/producer.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":37}},"3":{"start":{"line":5,"column":15},"end":{"line":5,"column":32}},"4":{"start":{"line":6,"column":11},"end":{"line":6,"column":23}},"5":{"start":{"line":7,"column":16},"end":{"line":7,"column":35}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":27}},"7":{"start":{"line":13,"column":8},"end":{"line":14,"column":34}},"8":{"start":{"line":14,"column":12},"end":{"line":14,"column":34}},"9":{"start":{"line":15,"column":8},"end":{"line":15,"column":60}},"10":{"start":{"line":16,"column":23},"end":{"line":16,"column":69}},"11":{"start":{"line":17,"column":8},"end":{"line":17,"column":59}},"12":{"start":{"line":18,"column":8},"end":{"line":18,"column":46}},"13":{"start":{"line":19,"column":8},"end":{"line":19,"column":30}},"14":{"start":{"line":22,"column":21},"end":{"line":22,"column":23}},"15":{"start":{"line":23,"column":8},"end":{"line":31,"column":9}},"16":{"start":{"line":24,"column":28},"end":{"line":24,"column":46}},"17":{"start":{"line":25,"column":12},"end":{"line":25,"column":65}},"18":{"start":{"line":26,"column":12},"end":{"line":26,"column":75}},"19":{"start":{"line":29,"column":24},"end":{"line":29,"column":80}},"20":{"start":{"line":30,"column":12},"end":{"line":30,"column":170}},"21":{"start":{"line":34,"column":21},"end":{"line":34,"column":23}},"22":{"start":{"line":35,"column":8},"end":{"line":43,"column":9}},"23":{"start":{"line":36,"column":28},"end":{"line":36,"column":61}},"24":{"start":{"line":37,"column":12},"end":{"line":37,"column":54}},"25":{"start":{"line":38,"column":12},"end":{"line":38,"column":75}},"26":{"start":{"line":41,"column":24},"end":{"line":41,"column":80}},"27":{"start":{"line":42,"column":12},"end":{"line":42,"column":178}},"28":{"start":{"line":46,"column":21},"end":{"line":46,"column":23}},"29":{"start":{"line":47,"column":8},"end":{"line":55,"column":9}},"30":{"start":{"line":48,"column":28},"end":{"line":48,"column":61}},"31":{"start":{"line":49,"column":12},"end":{"line":49,"column":54}},"32":{"start":{"line":50,"column":12},"end":{"line":50,"column":75}},"33":{"start":{"line":53,"column":24},"end":{"line":53,"column":80}},"34":{"start":{"line":54,"column":12},"end":{"line":54,"column":178}},"35":{"start":{"line":58,"column":0},"end":{"line":58,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":23},"end":{"line":11,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":34},"end":{"line":20,"column":5}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":35},"end":{"line":32,"column":5}},"line":21},"3":{"name":"(anonymous_3)","decl":{"start":{"line":33,"column":4},"end":{"line":33,"column":5}},"loc":{"start":{"line":33,"column":35},"end":{"line":44,"column":5}},"line":33},"4":{"name":"(anonymous_4)","decl":{"start":{"line":45,"column":4},"end":{"line":45,"column":5}},"loc":{"start":{"line":45,"column":35},"end":{"line":56,"column":5}},"line":45}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":8},"end":{"line":14,"column":34}},"type":"if","locations":[{"start":{"line":13,"column":8},"end":{"line":14,"column":34}},{"start":{"line":13,"column":8},"end":{"line":14,"column":34}}],"line":13}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/producer.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/producer.ts"],"names":[],"mappings":"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","sourcesContent":["import R from 'ioredis';\nimport { Logger } from 'pino';\n\nimport {\n  Category,\n  MachineError,\n  OnboardingError,\n  returnMessageOrThrowOnboardingError,\n} from '../errors';\nimport { Message } from '../types';\n\nimport { RedisKeys } from './keys';\n\nimport { RedisClient } from '.';\nimport { Response } from '../protos';\nimport { Serde } from '../utils';\n\nexport class Producer {\n  private static _instance: Producer;\n\n  private constructor(private redis: R.Redis | R.Cluster) {}\n\n  public static async getInstance(log: Logger): Promise<Producer> {\n    if (this._instance) return this._instance;\n    log.info('Attempting to initialize Redis producer');\n    const client = (await RedisClient.getInstance(log)).client;\n    log.info('Succesfully initialized Redis producer');\n    this._instance = new Producer(client);\n    return this._instance;\n  }\n\n  public async publishMessage(msg: Message, log: Logger): Promise<void> {\n    let stream = '';\n    try {\n      const payload = msg.serialize(log);\n      stream = RedisKeys.getKeyForMessage(msg, log);\n      await this.redis.xadd(stream, '*', 'PROTO', payload.join(','));\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw new OnboardingError(\n        MachineError.STREAM,\n        `Failed to publish message to stream. ${msg}`,\n        Category.REDIS,\n        log,\n        [],\n        { stream }\n      );\n    }\n  }\n\n  public async publishSuccess(msg: Response, log: Logger): Promise<void> {\n    let stream = '';\n    try {\n      const payload = Serde.serialize(msg, log);\n      stream = RedisKeys.successStream();\n      await this.redis.xadd(stream, '*', 'PROTO', payload.join(','));\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw new OnboardingError(\n        MachineError.STREAM,\n        `Failed to publish message to success stream. ${msg}`,\n        Category.REDIS,\n        log,\n        [],\n        { stream }\n      );\n    }\n  }\n\n  public async publishFailure(msg: Response, log: Logger): Promise<void> {\n    let stream = '';\n    try {\n      const payload = Serde.serialize(msg, log);\n      stream = RedisKeys.failureStream();\n      await this.redis.xadd(stream, '*', 'PROTO', payload.join(','));\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw new OnboardingError(\n        MachineError.STREAM,\n        `Failed to publish message to failure stream. ${msg}`,\n        Category.REDIS,\n        log,\n        [],\n        { stream }\n      );\n    }\n  }\n}\n\n// async function main() {\n//   const redis = await RedisStream.initialize();\n//   const r = new OnboardingRequest();\n//   const o = new Organization();\n//   o.setClientUuid('12345');\n//   o.setName('Hello');\n//   r.setOrganization(o);\n//   const msg = new Message(r, 0);\n//   await redis.publishMessage(msg);\n//   await sleep(1000);\n//   const m = await redis.readMessage();\n//   console.log(m.redisMessageId, m.data.toObject());\n// }\n// main();\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6c4c098d12262d9d3ff561e7f59f49f8bd5915c6"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/keys.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/keys.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":12},"end":{"line":4,"column":28}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":37}},"4":{"start":{"line":6,"column":16},"end":{"line":6,"column":35}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":24}},"6":{"start":{"line":12,"column":8},"end":{"line":12,"column":88}},"7":{"start":{"line":15,"column":8},"end":{"line":15,"column":82}},"8":{"start":{"line":18,"column":8},"end":{"line":18,"column":81}},"9":{"start":{"line":21,"column":8},"end":{"line":21,"column":80}},"10":{"start":{"line":24,"column":8},"end":{"line":24,"column":63}},"11":{"start":{"line":27,"column":8},"end":{"line":27,"column":59}},"12":{"start":{"line":30,"column":8},"end":{"line":30,"column":59}},"13":{"start":{"line":34,"column":8},"end":{"line":58,"column":9}},"14":{"start":{"line":35,"column":12},"end":{"line":35,"column":46}},"15":{"start":{"line":38,"column":12},"end":{"line":57,"column":13}},"16":{"start":{"line":40,"column":20},"end":{"line":40,"column":60}},"17":{"start":{"line":41,"column":20},"end":{"line":41,"column":26}},"18":{"start":{"line":44,"column":20},"end":{"line":44,"column":54}},"19":{"start":{"line":45,"column":20},"end":{"line":45,"column":26}},"20":{"start":{"line":48,"column":20},"end":{"line":48,"column":53}},"21":{"start":{"line":49,"column":20},"end":{"line":49,"column":26}},"22":{"start":{"line":52,"column":20},"end":{"line":52,"column":52}},"23":{"start":{"line":53,"column":20},"end":{"line":53,"column":26}},"24":{"start":{"line":56,"column":20},"end":{"line":56,"column":159}},"25":{"start":{"line":59,"column":8},"end":{"line":59,"column":22}},"26":{"start":{"line":62,"column":0},"end":{"line":62,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":26},"end":{"line":10,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":32},"end":{"line":13,"column":5}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":26},"end":{"line":16,"column":5}},"line":14},"3":{"name":"(anonymous_3)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":25},"end":{"line":19,"column":5}},"line":17},"4":{"name":"(anonymous_4)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":24},"end":{"line":22,"column":5}},"line":20},"5":{"name":"(anonymous_5)","decl":{"start":{"line":23,"column":4},"end":{"line":23,"column":5}},"loc":{"start":{"line":23,"column":26},"end":{"line":25,"column":5}},"line":23},"6":{"name":"(anonymous_6)","decl":{"start":{"line":26,"column":4},"end":{"line":26,"column":5}},"loc":{"start":{"line":26,"column":27},"end":{"line":28,"column":5}},"line":26},"7":{"name":"(anonymous_7)","decl":{"start":{"line":29,"column":4},"end":{"line":29,"column":5}},"loc":{"start":{"line":29,"column":27},"end":{"line":31,"column":5}},"line":29},"8":{"name":"(anonymous_8)","decl":{"start":{"line":32,"column":4},"end":{"line":32,"column":5}},"loc":{"start":{"line":32,"column":38},"end":{"line":60,"column":5}},"line":32}},"branchMap":{"0":{"loc":{"start":{"line":34,"column":8},"end":{"line":58,"column":9}},"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":58,"column":9}},{"start":{"line":34,"column":8},"end":{"line":58,"column":9}}],"line":34},"1":{"loc":{"start":{"line":38,"column":12},"end":{"line":57,"column":13}},"type":"switch","locations":[{"start":{"line":39,"column":16},"end":{"line":42,"column":17}},{"start":{"line":43,"column":16},"end":{"line":46,"column":17}},{"start":{"line":47,"column":16},"end":{"line":50,"column":17}},{"start":{"line":51,"column":16},"end":{"line":54,"column":17}},{"start":{"line":55,"column":16},"end":{"line":56,"column":159}}],"line":38}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":4,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1},"f":{"0":4,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0},"b":{"0":[0,0],"1":[0,0,0,0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/keys.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/keys.ts"],"names":[],"mappings":";;;AAEA,6BAAgE;AAChE,sCAAmC;AACnC,oCAA2C;AAE3C,MAAa,SAAS;IACZ,MAAM,CAAC,YAAY;QACzB,OAAO,QAAQ,CAAC;IAClB,CAAC;IAEM,MAAM,CAAC,kBAAkB;QAC9B,OAAO,GACL,OAAO,CAAC,GAAG,CAAC,iBACd,KAAK,IAAI,CAAC,YAAY,EAAE,gBAAgB,CAAC;IAC3C,CAAC;IAEM,MAAM,CAAC,YAAY;QACxB,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,iBAAiB,KAAK,IAAI,CAAC,YAAY,EAAE,UAAU,CAAC;IAC5E,CAAC;IAEM,MAAM,CAAC,WAAW;QACvB,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,iBAAiB,KAAK,IAAI,CAAC,YAAY,EAAE,SAAS,CAAC;IAC3E,CAAC;IAEM,MAAM,CAAC,UAAU;QACtB,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,iBAAiB,KAAK,IAAI,CAAC,YAAY,EAAE,QAAQ,CAAC;IAC1E,CAAC;IAEM,MAAM,CAAC,YAAY;QACxB,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,iBAAiB,eAAe,CAAC;IACzD,CAAC;IAEM,MAAM,CAAC,aAAa;QACzB,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,iBAAiB,WAAW,CAAC;IACrD,CAAC;IAEM,MAAM,CAAC,aAAa;QACzB,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,iBAAiB,WAAW,CAAC;IACrD,CAAC;IAEM,MAAM,CAAC,gBAAgB,CAAC,GAAY,EAAE,GAAW;QACtD,IAAI,MAAc,CAAC;QACnB,IAAI,GAAG,CAAC,MAAM,KAAK,eAAM,CAAC,IAAI,EAAE;YAC9B,MAAM,GAAG,SAAS,CAAC,YAAY,EAAE,CAAC;SACnC;aAAM;YACL,QAAQ,GAAG,CAAC,MAAM,EAAE;gBAClB,KAAK,cAAM,CAAC,YAAY,CAAC,CAAC;oBACxB,MAAM,GAAG,SAAS,CAAC,kBAAkB,EAAE,CAAC;oBACxC,MAAM;iBACP;gBACD,KAAK,cAAM,CAAC,MAAM,CAAC,CAAC;oBAClB,MAAM,GAAG,SAAS,CAAC,YAAY,EAAE,CAAC;oBAClC,MAAM;iBACP;gBACD,KAAK,cAAM,CAAC,KAAK,CAAC,CAAC;oBACjB,MAAM,GAAG,SAAS,CAAC,WAAW,EAAE,CAAC;oBACjC,MAAM;iBACP;gBACD,KAAK,cAAM,CAAC,IAAI,CAAC,CAAC;oBAChB,MAAM,GAAG,SAAS,CAAC,UAAU,EAAE,CAAC;oBAChC,MAAM;iBACP;gBACD;oBACE,MAAM,IAAI,mBAAe,CACvB,gBAAY,CAAC,OAAO,EACpB,wDAAwD,EACxD,YAAQ,CAAC,KAAK,EACd,GAAG,CACJ,CAAC;aACL;SACF;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;CACF;AApED,8BAoEC","sourcesContent":["import { Logger } from 'pino';\n\nimport { Category, MachineError, OnboardingError } from '../..';\nimport { Action } from '../protos';\nimport { Entity, Message } from '../types';\n\nexport class RedisKeys {\n  private static createPrefix(): string {\n    return 'create';\n  }\n\n  public static createOrganization(): string {\n    return `${\n      process.env.REDIS_STREAM_NAME\n    }::${this.createPrefix()}::organization`;\n  }\n\n  public static createSchool(): string {\n    return `${process.env.REDIS_STREAM_NAME}::${this.createPrefix()}::school`;\n  }\n\n  public static createClass(): string {\n    return `${process.env.REDIS_STREAM_NAME}::${this.createPrefix()}::class`;\n  }\n\n  public static createUser(): string {\n    return `${process.env.REDIS_STREAM_NAME}::${this.createPrefix()}::user`;\n  }\n\n  public static linkEntities(): string {\n    return `${process.env.REDIS_STREAM_NAME}::link_entity`;\n  }\n\n  public static successStream(): string {\n    return `${process.env.REDIS_STREAM_NAME}::success`;\n  }\n\n  public static failureStream(): string {\n    return `${process.env.REDIS_STREAM_NAME}::failure`;\n  }\n\n  public static getKeyForMessage(msg: Message, log: Logger): string {\n    let stream: string;\n    if (msg.action === Action.LINK) {\n      stream = RedisKeys.linkEntities();\n    } else {\n      switch (msg.entity) {\n        case Entity.ORGANIZATION: {\n          stream = RedisKeys.createOrganization();\n          break;\n        }\n        case Entity.SCHOOL: {\n          stream = RedisKeys.createSchool();\n          break;\n        }\n        case Entity.CLASS: {\n          stream = RedisKeys.createClass();\n          break;\n        }\n        case Entity.USER: {\n          stream = RedisKeys.createUser();\n          break;\n        }\n        default:\n          throw new OnboardingError(\n            MachineError.REQUEST,\n            'Unable to identify which stream should be published to',\n            Category.REDIS,\n            log\n          );\n      }\n    }\n    return stream;\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"aaabbf2155c0b480a6fbadd966c33fbdeb1eddd1"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/consumer.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/consumer.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":30}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":37}},"4":{"start":{"line":6,"column":16},"end":{"line":6,"column":35}},"5":{"start":{"line":7,"column":15},"end":{"line":7,"column":32}},"6":{"start":{"line":8,"column":11},"end":{"line":8,"column":23}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":27}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":43}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":49}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":25}},"11":{"start":{"line":15,"column":8},"end":{"line":15,"column":24}},"12":{"start":{"line":16,"column":8},"end":{"line":16,"column":31}},"13":{"start":{"line":17,"column":8},"end":{"line":17,"column":43}},"14":{"start":{"line":18,"column":8},"end":{"line":21,"column":10}},"15":{"start":{"line":24,"column":8},"end":{"line":25,"column":34}},"16":{"start":{"line":25,"column":12},"end":{"line":25,"column":34}},"17":{"start":{"line":26,"column":8},"end":{"line":26,"column":60}},"18":{"start":{"line":27,"column":23},"end":{"line":27,"column":69}},"19":{"start":{"line":28,"column":29},"end":{"line":28,"column":64}},"20":{"start":{"line":29,"column":30},"end":{"line":29,"column":73}},"21":{"start":{"line":30,"column":33},"end":{"line":30,"column":80}},"22":{"start":{"line":31,"column":8},"end":{"line":32,"column":216}},"23":{"start":{"line":32,"column":12},"end":{"line":32,"column":216}},"24":{"start":{"line":33,"column":22},"end":{"line":36,"column":9}},"25":{"start":{"line":37,"column":8},"end":{"line":55,"column":9}},"26":{"start":{"line":38,"column":12},"end":{"line":54,"column":13}},"27":{"start":{"line":39,"column":35},"end":{"line":39,"column":71}},"28":{"start":{"line":40,"column":16},"end":{"line":44,"column":17}},"29":{"start":{"line":41,"column":20},"end":{"line":43,"column":21}},"30":{"start":{"line":42,"column":24},"end":{"line":42,"column":92}},"31":{"start":{"line":47,"column":16},"end":{"line":51,"column":17}},"32":{"start":{"line":48,"column":20},"end":{"line":48,"column":88}},"33":{"start":{"line":49,"column":20},"end":{"line":49,"column":76}},"34":{"start":{"line":50,"column":20},"end":{"line":50,"column":81}},"35":{"start":{"line":52,"column":28},"end":{"line":52,"column":67}},"36":{"start":{"line":53,"column":16},"end":{"line":53,"column":174}},"37":{"start":{"line":56,"column":8},"end":{"line":56,"column":66}},"38":{"start":{"line":57,"column":8},"end":{"line":57,"column":79}},"39":{"start":{"line":58,"column":8},"end":{"line":58,"column":30}},"40":{"start":{"line":64,"column":23},"end":{"line":64,"column":59}},"41":{"start":{"line":65,"column":20},"end":{"line":65,"column":90}},"42":{"start":{"line":66,"column":8},"end":{"line":66,"column":60}},"43":{"start":{"line":67,"column":8},"end":{"line":75,"column":9}},"44":{"start":{"line":68,"column":12},"end":{"line":74,"column":13}},"45":{"start":{"line":69,"column":29},"end":{"line":69,"column":90}},"46":{"start":{"line":70,"column":16},"end":{"line":70,"column":28}},"47":{"start":{"line":76,"column":8},"end":{"line":97,"column":9}},"48":{"start":{"line":77,"column":22},"end":{"line":77,"column":142}},"49":{"start":{"line":78,"column":12},"end":{"line":79,"column":57}},"50":{"start":{"line":79,"column":16},"end":{"line":79,"column":57}},"51":{"start":{"line":80,"column":35},"end":{"line":80,"column":37}},"52":{"start":{"line":81,"column":12},"end":{"line":85,"column":13}},"53":{"start":{"line":82,"column":16},"end":{"line":84,"column":17}},"54":{"start":{"line":83,"column":20},"end":{"line":83,"column":93}},"55":{"start":{"line":86,"column":12},"end":{"line":86,"column":34}},"56":{"start":{"line":89,"column":12},"end":{"line":89,"column":28}},"57":{"start":{"line":90,"column":12},"end":{"line":91,"column":28}},"58":{"start":{"line":91,"column":16},"end":{"line":91,"column":28}},"59":{"start":{"line":92,"column":24},"end":{"line":92,"column":80}},"60":{"start":{"line":93,"column":12},"end":{"line":93,"column":153}},"61":{"start":{"line":96,"column":12},"end":{"line":96,"column":35}},"62":{"start":{"line":100,"column":8},"end":{"line":110,"column":9}},"63":{"start":{"line":101,"column":12},"end":{"line":102,"column":103}},"64":{"start":{"line":102,"column":16},"end":{"line":102,"column":103}},"65":{"start":{"line":103,"column":12},"end":{"line":104,"column":107}},"66":{"start":{"line":104,"column":16},"end":{"line":104,"column":107}},"67":{"start":{"line":105,"column":12},"end":{"line":105,"column":91}},"68":{"start":{"line":108,"column":22},"end":{"line":108,"column":78}},"69":{"start":{"line":109,"column":12},"end":{"line":109,"column":237}},"70":{"start":{"line":113,"column":8},"end":{"line":113,"column":109}},"71":{"start":{"line":114,"column":8},"end":{"line":129,"column":9}},"72":{"start":{"line":115,"column":22},"end":{"line":115,"column":147}},"73":{"start":{"line":116,"column":12},"end":{"line":117,"column":57}},"74":{"start":{"line":117,"column":16},"end":{"line":117,"column":57}},"75":{"start":{"line":118,"column":35},"end":{"line":118,"column":37}},"76":{"start":{"line":119,"column":12},"end":{"line":121,"column":13}},"77":{"start":{"line":120,"column":16},"end":{"line":120,"column":91}},"78":{"start":{"line":122,"column":12},"end":{"line":122,"column":34}},"79":{"start":{"line":125,"column":12},"end":{"line":126,"column":28}},"80":{"start":{"line":126,"column":16},"end":{"line":126,"column":28}},"81":{"start":{"line":127,"column":12},"end":{"line":127,"column":183}},"82":{"start":{"line":128,"column":12},"end":{"line":128,"column":24}},"83":{"start":{"line":132,"column":30},"end":{"line":132,"column":42}},"84":{"start":{"line":133,"column":8},"end":{"line":135,"column":9}},"85":{"start":{"line":134,"column":12},"end":{"line":134,"column":29}},"86":{"start":{"line":136,"column":8},"end":{"line":136,"column":26}},"87":{"start":{"line":137,"column":8},"end":{"line":137,"column":29}},"88":{"start":{"line":140,"column":8},"end":{"line":140,"column":80}},"89":{"start":{"line":143,"column":0},"end":{"line":143,"column":28}},"90":{"start":{"line":144,"column":0},"end":{"line":150,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":56},"end":{"line":22,"column":5}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":23,"column":4},"end":{"line":23,"column":5}},"loc":{"start":{"line":23,"column":34},"end":{"line":59,"column":5}},"line":23},"2":{"name":"(anonymous_2)","decl":{"start":{"line":63,"column":4},"end":{"line":63,"column":5}},"loc":{"start":{"line":63,"column":44},"end":{"line":98,"column":5}},"line":63},"3":{"name":"(anonymous_3)","decl":{"start":{"line":99,"column":4},"end":{"line":99,"column":5}},"loc":{"start":{"line":99,"column":39},"end":{"line":111,"column":5}},"line":99},"4":{"name":"(anonymous_4)","decl":{"start":{"line":112,"column":4},"end":{"line":112,"column":5}},"loc":{"start":{"line":112,"column":61},"end":{"line":130,"column":5}},"line":112},"5":{"name":"(anonymous_5)","decl":{"start":{"line":131,"column":4},"end":{"line":131,"column":5}},"loc":{"start":{"line":131,"column":23},"end":{"line":138,"column":5}},"line":131},"6":{"name":"(anonymous_6)","decl":{"start":{"line":139,"column":4},"end":{"line":139,"column":5}},"loc":{"start":{"line":139,"column":22},"end":{"line":141,"column":5}},"line":139}},"branchMap":{"0":{"loc":{"start":{"line":24,"column":8},"end":{"line":25,"column":34}},"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":25,"column":34}},{"start":{"line":24,"column":8},"end":{"line":25,"column":34}}],"line":24},"1":{"loc":{"start":{"line":28,"column":29},"end":{"line":28,"column":64}},"type":"binary-expr","locations":[{"start":{"line":28,"column":29},"end":{"line":28,"column":58}},{"start":{"line":28,"column":62},"end":{"line":28,"column":64}}],"line":28},"2":{"loc":{"start":{"line":29,"column":30},"end":{"line":29,"column":73}},"type":"binary-expr","locations":[{"start":{"line":29,"column":30},"end":{"line":29,"column":67}},{"start":{"line":29,"column":71},"end":{"line":29,"column":73}}],"line":29},"3":{"loc":{"start":{"line":31,"column":8},"end":{"line":32,"column":216}},"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":32,"column":216}},{"start":{"line":31,"column":8},"end":{"line":32,"column":216}}],"line":31},"4":{"loc":{"start":{"line":41,"column":20},"end":{"line":43,"column":21}},"type":"if","locations":[{"start":{"line":41,"column":20},"end":{"line":43,"column":21}},{"start":{"line":41,"column":20},"end":{"line":43,"column":21}}],"line":41},"5":{"loc":{"start":{"line":47,"column":16},"end":{"line":51,"column":17}},"type":"if","locations":[{"start":{"line":47,"column":16},"end":{"line":51,"column":17}},{"start":{"line":47,"column":16},"end":{"line":51,"column":17}}],"line":47},"6":{"loc":{"start":{"line":47,"column":20},"end":{"line":47,"column":73}},"type":"binary-expr","locations":[{"start":{"line":47,"column":20},"end":{"line":47,"column":38}},{"start":{"line":47,"column":42},"end":{"line":47,"column":73}}],"line":47},"7":{"loc":{"start":{"line":52,"column":28},"end":{"line":52,"column":67}},"type":"cond-expr","locations":[{"start":{"line":52,"column":49},"end":{"line":52,"column":58}},{"start":{"line":52,"column":61},"end":{"line":52,"column":67}}],"line":52},"8":{"loc":{"start":{"line":67,"column":8},"end":{"line":75,"column":9}},"type":"if","locations":[{"start":{"line":67,"column":8},"end":{"line":75,"column":9}},{"start":{"line":67,"column":8},"end":{"line":75,"column":9}}],"line":67},"9":{"loc":{"start":{"line":78,"column":12},"end":{"line":79,"column":57}},"type":"if","locations":[{"start":{"line":78,"column":12},"end":{"line":79,"column":57}},{"start":{"line":78,"column":12},"end":{"line":79,"column":57}}],"line":78},"10":{"loc":{"start":{"line":78,"column":16},"end":{"line":78,"column":36}},"type":"binary-expr","locations":[{"start":{"line":78,"column":16},"end":{"line":78,"column":18}},{"start":{"line":78,"column":22},"end":{"line":78,"column":36}}],"line":78},"11":{"loc":{"start":{"line":90,"column":12},"end":{"line":91,"column":28}},"type":"if","locations":[{"start":{"line":90,"column":12},"end":{"line":91,"column":28}},{"start":{"line":90,"column":12},"end":{"line":91,"column":28}}],"line":90},"12":{"loc":{"start":{"line":90,"column":16},"end":{"line":90,"column":81}},"type":"binary-expr","locations":[{"start":{"line":90,"column":16},"end":{"line":90,"column":38}},{"start":{"line":90,"column":42},"end":{"line":90,"column":81}}],"line":90},"13":{"loc":{"start":{"line":101,"column":12},"end":{"line":102,"column":103}},"type":"if","locations":[{"start":{"line":101,"column":12},"end":{"line":102,"column":103}},{"start":{"line":101,"column":12},"end":{"line":102,"column":103}}],"line":101},"14":{"loc":{"start":{"line":103,"column":12},"end":{"line":104,"column":107}},"type":"if","locations":[{"start":{"line":103,"column":12},"end":{"line":104,"column":107}},{"start":{"line":103,"column":12},"end":{"line":104,"column":107}}],"line":103},"15":{"loc":{"start":{"line":116,"column":12},"end":{"line":117,"column":57}},"type":"if","locations":[{"start":{"line":116,"column":12},"end":{"line":117,"column":57}},{"start":{"line":116,"column":12},"end":{"line":117,"column":57}}],"line":116},"16":{"loc":{"start":{"line":116,"column":16},"end":{"line":116,"column":39}},"type":"binary-expr","locations":[{"start":{"line":116,"column":16},"end":{"line":116,"column":18}},{"start":{"line":116,"column":22},"end":{"line":116,"column":39}}],"line":116},"17":{"loc":{"start":{"line":125,"column":12},"end":{"line":126,"column":28}},"type":"if","locations":[{"start":{"line":125,"column":12},"end":{"line":126,"column":28}},{"start":{"line":125,"column":12},"end":{"line":126,"column":28}}],"line":125},"18":{"loc":{"start":{"line":125,"column":16},"end":{"line":125,"column":81}},"type":"binary-expr","locations":[{"start":{"line":125,"column":16},"end":{"line":125,"column":38}},{"start":{"line":125,"column":42},"end":{"line":125,"column":81}}],"line":125},"19":{"loc":{"start":{"line":127,"column":58},"end":{"line":127,"column":109}},"type":"cond-expr","locations":[{"start":{"line":127,"column":83},"end":{"line":127,"column":96}},{"start":{"line":127,"column":99},"end":{"line":127,"column":109}}],"line":127},"20":{"loc":{"start":{"line":133,"column":8},"end":{"line":135,"column":9}},"type":"if","locations":[{"start":{"line":133,"column":8},"end":{"line":135,"column":9}},{"start":{"line":133,"column":8},"end":{"line":135,"column":9}}],"line":133}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":1,"90":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/consumer.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/redis/consumer.ts"],"names":[],"mappings":"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","sourcesContent":["import R from 'ioredis';\nimport { Logger } from 'pino';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport {\n  Category,\n  MachineError,\n  OnboardingError,\n  returnMessageOrThrowOnboardingError,\n} from '../errors';\nimport { Message } from '../types';\nimport { Uuid } from '../utils';\n\nimport { RedisKeys } from './keys';\n\nimport { RedisClient } from '.';\n\nexport class Consumer {\n  private static _instance: Consumer;\n  private consumerId: Uuid;\n  private counter = 0;\n  private props = {};\n\n  private static streams = [\n    RedisKeys.createOrganization(),\n    RedisKeys.createSchool(),\n    RedisKeys.createClass(),\n    RedisKeys.createUser(),\n    RedisKeys.linkEntities(),\n  ];\n\n  private streamPointer = 0;\n\n  private constructor(\n    private redis: R.Redis | R.Cluster,\n    private consumerGroup: string,\n    public readonly staleMessageTime: number\n  ) {\n    this.consumerId = uuidv4();\n    this.props = {\n      consumerGroup: this.consumerGroup,\n      consumerId: this.consumerId,\n    };\n  }\n\n  public static async getInstance(log: Logger): Promise<Consumer> {\n    if (this._instance) return this._instance;\n    log.info('Attempting to initialize Redis consumer');\n    const client = (await RedisClient.getInstance(log)).client;\n    const streamPrefix = process.env.REDIS_STREAM_NAME || '';\n    const consumerGroup = process.env.REDIS_CONSUMER_GROUP_NAME || '';\n    const staleMessageTime = Number(process.env.REDIS_STALE_MESSAGE_TIMEOUT);\n    if (!staleMessageTime)\n      throw new OnboardingError(\n        MachineError.APP_CONFIG,\n        `Environment variable 'REDIS_CONSUMER_STALE_MESSAGE_TIMEOUT' must be set and be a valid number for a consumer`,\n        Category.APP\n      );\n    const props = {\n      streamPrefix,\n      consumerGroup,\n    };\n    for (const stream of this.streams) {\n      try {\n        const streamInfo = await client.xinfo('GROUPS', stream);\n        for (const i of streamInfo) {\n          if (!(i as string[]).includes(consumerGroup)) {\n            await client.xgroup('CREATE', stream, consumerGroup, 0, 'MKSTREAM');\n          }\n        }\n      } catch (e) {\n        if (e instanceof Error && e.message === 'ERR no such key') {\n          await client.xgroup('CREATE', stream, consumerGroup, 0, 'MKSTREAM');\n\n          log.info(props, 'Succesfully initialized Redis stream');\n          return new Consumer(client, consumerGroup, staleMessageTime);\n        }\n        const msg = e instanceof Error ? e.message : `${e}`;\n        throw new OnboardingError(\n          MachineError.STREAM,\n          `Failed to initialize consumer: ${stream}. ${msg}`,\n          Category.REDIS,\n          log,\n          [],\n          props\n        );\n      }\n    }\n    log.info(props, 'Succesfully initialized Redis consumer');\n    this._instance = new Consumer(client, consumerGroup, staleMessageTime);\n    return this._instance;\n  }\n\n  /**\n   * Tries to read an unread message from the queue.\n   */\n  public async readMessage(\n    messageCount: number,\n    logger: Logger\n  ): Promise<Message[]> {\n    const stream = Consumer.streams[this.streamPointer];\n    const log = logger.child({\n      ...this.props,\n      stream,\n    });\n    log.debug('Attempting to read message from stream');\n    if (this.incrementCounter() === 0) {\n      try {\n        const msgs = await this.tryAndClaimStaleMessage(\n          stream,\n          messageCount,\n          log\n        );\n        return msgs;\n      } catch (_) {\n        /* Logged in function */\n      }\n    }\n    try {\n      const m = await this.redis.xreadgroup(\n        'GROUP',\n        this.consumerGroup,\n        this.consumerId,\n        'COUNT',\n        messageCount,\n        'STREAMS',\n        stream,\n        '>'\n      );\n      if (!m || m.length === 0) throw new Error('no messages in stream');\n      const parsedMessages = [];\n      for (const [_stream, messages] of m) {\n        for (const [timestamp, msg] of messages) {\n          parsedMessages.push(Message.deserialize(msg[1], log, timestamp));\n        }\n      }\n\n      return parsedMessages;\n    } catch (error) {\n      log.warn(error);\n      if (error instanceof Error && error.message.startsWith('no messages'))\n        throw error;\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw new OnboardingError(\n        MachineError.STREAM,\n        `Failed to read message from stream. ${msg}`,\n        Category.REDIS,\n        log\n      );\n    } finally {\n      this.incrementStream();\n    }\n  }\n\n  public async acknowledgeMessage(msg: Message, log: Logger): Promise<void> {\n    try {\n      if (msg.redisMessageId === undefined)\n        throw new Error(\n          `Can't acknowledge a message if we don't have the ID of that message`\n        );\n      if (msg.redisStream === undefined)\n        throw new Error(\n          `Can't acknowledge a message if we don't have the stream of that message`\n        );\n      await this.redis.xack(\n        msg.redisStream,\n        this.consumerGroup,\n        msg.redisMessageId\n      );\n    } catch (error) {\n      const m = returnMessageOrThrowOnboardingError(error);\n      throw new OnboardingError(\n        MachineError.STREAM,\n        `Failed to acknowledge message from stream. ${m}`,\n        Category.REDIS,\n        log,\n        [],\n        { ...this.props, stream: msg.redisStream }\n      );\n    }\n  }\n\n  private async tryAndClaimStaleMessage(\n    stream: string,\n    messageCount: number,\n    log: Logger\n  ): Promise<Message[]> {\n    log.trace({ ...this.props, stream }, 'Trying to claim stale message');\n    try {\n      const m = await this.redis.xautoclaim(\n        stream,\n        this.consumerGroup,\n        this.consumerId,\n        this.staleMessageTime,\n        '0-0',\n        'COUNT',\n        messageCount\n      );\n\n      if (!m || m[1].length === 0) throw new Error('no messages in stream');\n\n      const parsedMessages: Message[] = [];\n      for (const msgs of m[1]) {\n        parsedMessages.push(\n          Message.deserialize(msgs[1][1], log, msgs[0] as string)\n        );\n      }\n\n      return parsedMessages;\n    } catch (error) {\n      if (error instanceof Error && error.message.startsWith('no messages'))\n        throw error;\n      log.warn(\n        {\n          error: error instanceof Error ? error.message : `${error}`,\n          ...this.props,\n          stream,\n        },\n        'Failed to claim stale message from redis'\n      );\n      throw error;\n    }\n  }\n\n  private incrementCounter(): number {\n    const countToReturn = this.counter;\n    if (this.counter === 10) {\n      this.counter = 0;\n    }\n    this.counter += 1;\n    return countToReturn;\n  }\n\n  private incrementStream(): void {\n    this.streamPointer = (this.streamPointer + 1) % Consumer.streams.length;\n  }\n}\n\n// async function main() {\n//   const producer = await Producer.getInstance(log);\n//   const r = new OnboardingRequest();\n//   const o = new Organization();\n//   o.setExternalUuid('12345');\n//   o.setName('Hello');\n//   r.setOrganization(o);\n//   r.setAction(Action.CREATE);\n//   const msg = Message.fromOnboardingRequest(r, log);\n//   await producer.publishMessage(msg, log);\n//   await producer.publishMessage(msg, log);\n//   await sleep(2500);\n//   const consumer = await Consumer.getInstance(log);\n//   await consumer.readMessage(5, log);\n//   // console.log(msgs);\n// }\n// main();\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cb23c9a10b50819a10f0e0a2c08cc41125d6b00a"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/types/action.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/types/action.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":37}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":44}},"4":{"start":{"line":7,"column":4},"end":{"line":14,"column":5}},"5":{"start":{"line":9,"column":12},"end":{"line":9,"column":28}},"6":{"start":{"line":11,"column":12},"end":{"line":11,"column":26}},"7":{"start":{"line":13,"column":12},"end":{"line":13,"column":39}},"8":{"start":{"line":16,"column":0},"end":{"line":16,"column":40}}},"fnMap":{"0":{"name":"actionToString","decl":{"start":{"line":6,"column":9},"end":{"line":6,"column":23}},"loc":{"start":{"line":6,"column":27},"end":{"line":15,"column":1}},"line":6}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":4},"end":{"line":14,"column":5}},"type":"switch","locations":[{"start":{"line":8,"column":8},"end":{"line":9,"column":28}},{"start":{"line":10,"column":8},"end":{"line":11,"column":26}},{"start":{"line":12,"column":8},"end":{"line":13,"column":39}}],"line":7}},"s":{"0":1,"1":1,"2":1,"3":1,"4":63,"5":63,"6":0,"7":0,"8":1},"f":{"0":63},"b":{"0":[63,0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/types/action.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/types/action.ts"],"names":[],"mappings":";;;AAAA,sCAAwC;AACxC,6CAA0C;AAE1C,SAAgB,cAAc,CAAC,CAAS;IACtC,QAAQ,CAAC,EAAE;QACT,KAAK,eAAM,CAAC,MAAM;YAChB,OAAO,QAAQ,CAAC;QAClB,KAAK,eAAM,CAAC,IAAI;YACd,OAAO,MAAM,CAAC;QAChB;YACE,MAAM,oBAAW,CAAC;KACrB;AACH,CAAC;AATD,wCASC","sourcesContent":["import { UNREACHABLE } from '../errors';\nimport { Action } from '../protos/api_pb';\n\nexport function actionToString(a: Action): string {\n  switch (a) {\n    case Action.CREATE:\n      return 'CREATE';\n    case Action.LINK:\n      return 'LINK';\n    default:\n      throw UNREACHABLE;\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"387a03e65be92dc851cc1b5f8e0a7ace00392eda"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/index.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":26},"end":{"line":4,"column":56}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":142}},"4":{"start":{"line":5,"column":91},"end":{"line":5,"column":136}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":77},"end":{"line":5,"column":78}},"loc":{"start":{"line":5,"column":89},"end":{"line":5,"column":138}},"line":5}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":63},"f":{"0":63},"b":{},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/index.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/index.ts"],"names":[],"mappings":";;;AAAA,yDAAwD;AAA/C,sHAAA,iBAAiB,OAAA","sourcesContent":["export { ValidationWrapper } from './validationWrapper';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"38c5f819423c3d0e3dbf97d64c440e72e75b5173"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/validationWrapper.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/validationWrapper.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":44}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":43}},"4":{"start":{"line":6,"column":20},"end":{"line":6,"column":49}},"5":{"start":{"line":7,"column":23},"end":{"line":7,"column":48}},"6":{"start":{"line":8,"column":23},"end":{"line":8,"column":48}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":25}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":29}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":33}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":29}},"11":{"start":{"line":17,"column":21},"end":{"line":17,"column":66}},"12":{"start":{"line":18,"column":23},"end":{"line":18,"column":39}},"13":{"start":{"line":19,"column":26},"end":{"line":19,"column":45}},"14":{"start":{"line":20,"column":24},"end":{"line":20,"column":66}},"15":{"start":{"line":21,"column":8},"end":{"line":21,"column":41}},"16":{"start":{"line":22,"column":22},"end":{"line":24,"column":9}},"17":{"start":{"line":25,"column":8},"end":{"line":27,"column":11}},"18":{"start":{"line":30,"column":8},"end":{"line":39,"column":9}},"19":{"start":{"line":32,"column":16},"end":{"line":32,"column":110}},"20":{"start":{"line":33,"column":16},"end":{"line":33,"column":22}},"21":{"start":{"line":36,"column":16},"end":{"line":36,"column":110}},"22":{"start":{"line":37,"column":16},"end":{"line":37,"column":22}},"23":{"start":{"line":40,"column":28},"end":{"line":40,"column":47}},"24":{"start":{"line":41,"column":8},"end":{"line":41,"column":74}},"25":{"start":{"line":44,"column":0},"end":{"line":44,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":48},"end":{"line":15,"column":5}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":16,"column":4},"end":{"line":16,"column":5}},"loc":{"start":{"line":16,"column":41},"end":{"line":42,"column":5}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":30,"column":8},"end":{"line":39,"column":9}},"type":"switch","locations":[{"start":{"line":31,"column":12},"end":{"line":34,"column":13}},{"start":{"line":35,"column":12},"end":{"line":38,"column":13}}],"line":30}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":6,"8":6,"9":6,"10":6,"11":63,"12":63,"13":63,"14":63,"15":63,"16":63,"17":63,"18":63,"19":63,"20":6,"21":0,"22":0,"23":6,"24":6,"25":1},"f":{"0":6,"1":63},"b":{"0":[63,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/validationWrapper.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/validationWrapper.ts"],"names":[],"mappings":";;;AAGA,6CAAqE;AACrE,4CAAiD;AAEjD,kDAAsD;AAEtD,iDAAmD;AACnD,iDAAmD;AAEnD,MAAa,iBAAiB;IAC5B,YACkB,IAAuB,EACvB,MAAc,EACd,QAAsB,EAC/B,MAAc;QAHL,SAAI,GAAJ,IAAI,CAAmB;QACvB,WAAM,GAAN,MAAM,CAAQ;QACd,aAAQ,GAAR,QAAQ,CAAc;QAC/B,WAAM,GAAN,MAAM,CAAQ;IACpB,CAAC;IAEG,MAAM,CAAC,KAAK,CAAC,YAAY,CAC9B,IAAuB,EACvB,GAAW;QAEX,IAAI,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,EAAE,gBAAgB,EAAE,YAAY,EAAE,CAAC,CAAC;QAC3D,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAChC,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QACtC,MAAM,OAAO,GAAG,4BAAgB,CAAC,WAAW,EAAE,CAAC;QAC/C,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;QACjC,MAAM,KAAK,GAAU;YACnB,MAAM,EAAE,IAAA,uBAAc,EAAC,MAAM,CAAC;SAC/B,CAAC;QACF,MAAM,CAAC,IAAI,CACT,0BAA0B,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,cAAc,EAAE,EAAE,EACjE;YACE,SAAS;SACV,CACF,CAAC;QAEF,IAAI,MAAc,CAAC;QACnB,IAAI,QAAsB,CAAC;QAC3B,QAAQ,MAAM,EAAE;YACd,KAAK,eAAM,CAAC,MAAM,CAAC,CAAC;gBAClB,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,GAAG,MAAM,IAAA,gCAAiB,EAClD,IAAI,EACJ,MAAM,EACN,KAAK,CACN,CAAC;gBACF,MAAM;aACP;YACD,KAAK,eAAM,CAAC,IAAI,CAAC,CAAC;gBAChB,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,GAAG,MAAM,IAAA,gCAAiB,EAClD,IAAI,EACJ,MAAM,EACN,KAAK,CACN,CAAC;gBACF,MAAM;aACP;SACF;QACD,MAAM,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACxC,OAAO,IAAI,iBAAiB,CAAC,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC;IACpE,CAAC;CACF;AAlDD,8CAkDC","sourcesContent":["import { Logger } from 'pino';\n\nimport { Props } from '../errors';\nimport { Action, Entity, OnboardingRequest } from '../protos/api_pb';\nimport { actionToString } from '../types/action';\nimport { ExternalUuid } from '../utils';\nimport { RequestIdTracker } from '../utils/requestId';\n\nimport { parseCreateEntity } from './createEntity';\nimport { parseLinkEntities } from './linkEntities';\n\nexport class ValidationWrapper {\n  private constructor(\n    public readonly data: OnboardingRequest,\n    public readonly entity: Entity,\n    public readonly entityId: ExternalUuid,\n    public logger: Logger\n  ) {}\n\n  public static async parseRequest(\n    data: OnboardingRequest,\n    log: Logger\n  ): Promise<ValidationWrapper> {\n    let logger = log.child({ currentOperation: 'VALIDATION' });\n    const action = data.getAction();\n    const requestId = data.getRequestId();\n    const tracker = RequestIdTracker.getInstance();\n    tracker.addId(requestId, logger);\n    const props: Props = {\n      action: actionToString(action),\n    };\n    logger.info(\n      `Attempting to validate ${props.action} ${data.getPayloadCase()}`,\n      {\n        requestId,\n      }\n    );\n\n    let entity: Entity;\n    let entityId: ExternalUuid;\n    switch (action) {\n      case Action.CREATE: {\n        [entity, entityId, logger] = await parseCreateEntity(\n          data,\n          logger,\n          props\n        );\n        break;\n      }\n      case Action.LINK: {\n        [entity, entityId, logger] = await parseLinkEntities(\n          data,\n          logger,\n          props\n        );\n        break;\n      }\n    }\n    const childLogger = logger.child(props);\n    return new ValidationWrapper(data, entity, entityId, childLogger);\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f56f8c9cc281aaca182f961371d8f575ca55c751"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/requestId.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/requestId.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":34}},"4":{"start":{"line":7,"column":20},"end":{"line":7,"column":57}},"5":{"start":{"line":8,"column":15},"end":{"line":8,"column":30}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":37}},"7":{"start":{"line":12,"column":8},"end":{"line":15,"column":11}},"8":{"start":{"line":18,"column":8},"end":{"line":19,"column":34}},"9":{"start":{"line":19,"column":12},"end":{"line":19,"column":34}},"10":{"start":{"line":20,"column":8},"end":{"line":20,"column":48}},"11":{"start":{"line":21,"column":8},"end":{"line":21,"column":30}},"12":{"start":{"line":29,"column":24},"end":{"line":29,"column":48}},"13":{"start":{"line":30,"column":8},"end":{"line":31,"column":147}},"14":{"start":{"line":31,"column":12},"end":{"line":31,"column":147}},"15":{"start":{"line":32,"column":8},"end":{"line":34,"column":75}},"16":{"start":{"line":33,"column":12},"end":{"line":34,"column":75}},"17":{"start":{"line":35,"column":8},"end":{"line":35,"column":33}},"18":{"start":{"line":38,"column":0},"end":{"line":38,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":18},"end":{"line":16,"column":5}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":25},"end":{"line":22,"column":5}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":19},"end":{"line":36,"column":5}},"line":28}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":18,"column":8},"end":{"line":19,"column":34}},"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":19,"column":34}},{"start":{"line":18,"column":8},"end":{"line":19,"column":34}}],"line":18},"4":{"loc":{"start":{"line":30,"column":8},"end":{"line":31,"column":147}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":31,"column":147}},{"start":{"line":30,"column":8},"end":{"line":31,"column":147}}],"line":30},"5":{"loc":{"start":{"line":32,"column":8},"end":{"line":34,"column":75}},"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":34,"column":75}},{"start":{"line":32,"column":8},"end":{"line":34,"column":75}}],"line":32}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":63,"9":62,"10":1,"11":1,"12":63,"13":63,"14":0,"15":63,"16":0,"17":63,"18":1},"f":{"0":1,"1":1,"2":63,"3":63},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[62,1],"4":[0,63],"5":[0,63]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/requestId.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/requestId.ts"],"names":[],"mappings":";;;;;;AAAA,0DAA4B;AAE5B,+BAAgC;AAEhC,sCAAoE;AAIpE,MAAa,gBAAgB;IAK3B;QACE,IAAI,CAAC,KAAK,GAAG,IAAI,mBAAG,CAAC;YACnB,GAAG,EAAE,GAAG;YACR,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,IAAI;SACtB,CAAC,CAAC;IACL,CAAC;IAEM,MAAM,CAAC,WAAW;QACvB,IAAI,IAAI,CAAC,SAAS;YAAE,OAAO,IAAI,CAAC,SAAS,CAAC;QAC1C,IAAI,CAAC,SAAS,GAAG,IAAI,gBAAgB,EAAE,CAAC;QACxC,OAAO,IAAI,CAAC,SAAS,CAAC;IACxB,CAAC;IAED;;;;OAIG;IACI,KAAK,CAAC,EAAQ,EAAE,GAAW;QAChC,MAAM,OAAO,GAAG,IAAA,eAAQ,EAAC,EAAE,CAAC,CAAC;QAC7B,IAAI,CAAC,OAAO;YACV,MAAM,IAAI,wBAAe,CACvB,qBAAY,CAAC,UAAU,EACvB,gCAAgC,EAChC,iBAAQ,CAAC,OAAO,EAChB,GAAG,CACJ,CAAC;QACJ,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC;YACpB,MAAM,IAAI,wBAAe,CACvB,qBAAY,CAAC,UAAU,EACvB,yBAAyB,EAAE;yCACM,EACjC,iBAAQ,CAAC,OAAO,EAChB,GAAG,CACJ,CAAC;QACJ,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;IAC3B,CAAC;CACF;AA1CD,4CA0CC","sourcesContent":["import LRU from 'lru-cache';\nimport { Logger } from 'pino';\nimport { validate } from 'uuid';\n\nimport { Category, MachineError, OnboardingError } from '../errors';\n\nimport { Uuid } from '.';\n\nexport class RequestIdTracker {\n  private static _instance: RequestIdTracker;\n\n  private cache: LRU<Uuid, null>;\n\n  private constructor() {\n    this.cache = new LRU({\n      max: 250,\n      maxAge: 5 * 60 * 1000,\n    });\n  }\n\n  public static getInstance(): RequestIdTracker {\n    if (this._instance) return this._instance;\n    this._instance = new RequestIdTracker();\n    return this._instance;\n  }\n\n  /**\n   * @param {Uuid} id - the request id to add to the tracker\n   * @throws if the id is already present in the cache\n   * @throws if the id is not a valid uuid\n   */\n  public addId(id: Uuid, log: Logger): void {\n    const isValid = validate(id);\n    if (!isValid)\n      throw new OnboardingError(\n        MachineError.VALIDATION,\n        'Request ID is not a valid uuid',\n        Category.REQUEST,\n        log\n      );\n    if (this.cache.has(id))\n      throw new OnboardingError(\n        MachineError.VALIDATION,\n        `A request with the id ${id} has already been processed, please generate\n        a new id and re-send the request`,\n        Category.REQUEST,\n        log\n      );\n    this.cache.set(id, null);\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fbde0c232ae3931dc356ba8590e451500d563bee"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/index.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":40}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":47}},"4":{"start":{"line":6,"column":19},"end":{"line":6,"column":40}},"5":{"start":{"line":8,"column":17},"end":{"line":8,"column":40}},"6":{"start":{"line":9,"column":20},"end":{"line":9,"column":40}},"7":{"start":{"line":10,"column":4},"end":{"line":54,"column":5}},"8":{"start":{"line":12,"column":12},"end":{"line":12,"column":38}},"9":{"start":{"line":13,"column":27},"end":{"line":13,"column":87}},"10":{"start":{"line":14,"column":30},"end":{"line":14,"column":106}},"11":{"start":{"line":15,"column":12},"end":{"line":19,"column":14}},"12":{"start":{"line":22,"column":12},"end":{"line":22,"column":32}},"13":{"start":{"line":23,"column":27},"end":{"line":23,"column":81}},"14":{"start":{"line":24,"column":30},"end":{"line":24,"column":100}},"15":{"start":{"line":25,"column":12},"end":{"line":29,"column":14}},"16":{"start":{"line":32,"column":12},"end":{"line":32,"column":31}},"17":{"start":{"line":33,"column":27},"end":{"line":33,"column":80}},"18":{"start":{"line":34,"column":30},"end":{"line":34,"column":99}},"19":{"start":{"line":35,"column":12},"end":{"line":39,"column":14}},"20":{"start":{"line":42,"column":12},"end":{"line":42,"column":30}},"21":{"start":{"line":43,"column":27},"end":{"line":43,"column":79}},"22":{"start":{"line":44,"column":30},"end":{"line":44,"column":98}},"23":{"start":{"line":45,"column":12},"end":{"line":49,"column":14}},"24":{"start":{"line":52,"column":12},"end":{"line":53,"column":56}},"25":{"start":{"line":56,"column":0},"end":{"line":56,"column":46}}},"fnMap":{"0":{"name":"parseCreateEntity","decl":{"start":{"line":7,"column":15},"end":{"line":7,"column":32}},"loc":{"start":{"line":7,"column":50},"end":{"line":55,"column":1}},"line":7}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":4},"end":{"line":54,"column":5}},"type":"switch","locations":[{"start":{"line":11,"column":8},"end":{"line":20,"column":9}},{"start":{"line":21,"column":8},"end":{"line":30,"column":9}},{"start":{"line":31,"column":8},"end":{"line":40,"column":9}},{"start":{"line":41,"column":8},"end":{"line":50,"column":9}},{"start":{"line":51,"column":8},"end":{"line":53,"column":56}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":63,"6":63,"7":63,"8":9,"9":9,"10":9,"11":1,"12":16,"13":16,"14":16,"15":1,"16":17,"17":17,"18":17,"19":1,"20":21,"21":21,"22":21,"23":3,"24":0,"25":1},"f":{"0":63},"b":{"0":[9,16,17,21,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/index.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/index.ts"],"names":[],"mappings":";;;AAEA,yCAA2E;AAC3E,gDAAgE;AAGhE,yCAKoB;AAEb,KAAK,UAAU,iBAAiB,CACrC,GAAsB,EACtB,GAAW,EACX,KAAY;IAEZ,MAAM,IAAI,GAAG,CAAC,GAAG,kBAAS,CAAC,CAAC;IAC5B,MAAM,OAAO,GAAG,GAAG,CAAC,cAAc,EAAE,CAAC;IACrC,QAAQ,OAAO,EAAE;QACf,KAAK,0BAAiB,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;YAC/C,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAC1B,MAAM,MAAM,GAAG,IAAA,qBAAY,EAAC,GAAG,CAAC,eAAe,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;YAC9D,MAAM,SAAS,GAAG,MAAM,gCAAqB,CAAC,WAAW,CACvD,MAAM,EACN,GAAG,EACH,IAAI,EACJ,KAAK,CACN,CAAC;YACF,OAAO;gBACL,eAAM,CAAC,YAAY;gBACnB,SAAS,CAAC,GAAG,CAAC,eAAe,EAAE;gBAC/B,SAAS,CAAC,MAAM;aACjB,CAAC;SACH;QACD,KAAK,0BAAiB,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;YACzC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACpB,MAAM,MAAM,GAAG,IAAA,qBAAY,EAAC,GAAG,CAAC,SAAS,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;YACxD,MAAM,SAAS,GAAG,MAAM,0BAAe,CAAC,WAAW,CACjD,MAAM,EACN,GAAG,EACH,IAAI,EACJ,KAAK,CACN,CAAC;YACF,OAAO;gBACL,eAAM,CAAC,YAAY;gBACnB,SAAS,CAAC,MAAM,CAAC,eAAe,EAAE;gBAClC,SAAS,CAAC,MAAM;aACjB,CAAC;SACH;QACD,KAAK,0BAAiB,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YACxC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACnB,MAAM,MAAM,GAAG,IAAA,qBAAY,EAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;YACvD,MAAM,SAAS,GAAG,MAAM,yBAAc,CAAC,WAAW,CAChD,MAAM,EACN,GAAG,EACH,IAAI,EACJ,KAAK,CACN,CAAC;YACF,OAAO;gBACL,eAAM,CAAC,YAAY;gBACnB,SAAS,CAAC,EAAE,CAAC,eAAe,EAAE;gBAC9B,SAAS,CAAC,MAAM;aACjB,CAAC;SACH;QACD,KAAK,0BAAiB,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YACvC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAClB,MAAM,MAAM,GAAG,IAAA,qBAAY,EAAC,GAAG,CAAC,OAAO,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;YACtD,MAAM,SAAS,GAAG,MAAM,wBAAa,CAAC,WAAW,CAC/C,MAAM,EACN,GAAG,EACH,IAAI,EACJ,KAAK,CACN,CAAC;YACF,OAAO;gBACL,eAAM,CAAC,YAAY;gBACnB,SAAS,CAAC,IAAI,CAAC,eAAe,EAAE;gBAChC,SAAS,CAAC,MAAM;aACjB,CAAC;SACH;QACD;YACE,MAAM,IAAA,oBAAW,EACf;oCAC4B,EAC5B,IAAI,EACJ,GAAG,EACH,KAAK,CACN,CAAC;KACL;AACH,CAAC;AA7ED,8CA6EC","sourcesContent":["import { Logger } from 'pino';\n\nimport { BAD_REQUEST, BASE_PATH, Props, tryGetMember } from '../../errors';\nimport { Entity, OnboardingRequest } from '../../protos/api_pb';\nimport { ExternalUuid } from '../../utils';\n\nimport {\n  ValidatedClass,\n  ValidatedOrganization,\n  ValidatedSchool,\n  ValidatedUser,\n} from './entities';\n\nexport async function parseCreateEntity(\n  req: OnboardingRequest,\n  log: Logger,\n  props: Props\n): Promise<[Entity, ExternalUuid, Logger]> {\n  const path = [...BASE_PATH];\n  const payload = req.getPayloadCase();\n  switch (payload) {\n    case OnboardingRequest.PayloadCase.ORGANIZATION: {\n      path.push('organization');\n      const entity = tryGetMember(req.getOrganization(), log, path);\n      const validated = await ValidatedOrganization.fromRequest(\n        entity,\n        log,\n        path,\n        props\n      );\n      return [\n        Entity.ORGANIZATION,\n        validated.org.getExternalUuid(),\n        validated.logger,\n      ];\n    }\n    case OnboardingRequest.PayloadCase.SCHOOL: {\n      path.push('school');\n      const entity = tryGetMember(req.getSchool(), log, path);\n      const validated = await ValidatedSchool.fromRequest(\n        entity,\n        log,\n        path,\n        props\n      );\n      return [\n        Entity.ORGANIZATION,\n        validated.school.getExternalUuid(),\n        validated.logger,\n      ];\n    }\n    case OnboardingRequest.PayloadCase.CLASS: {\n      path.push('class');\n      const entity = tryGetMember(req.getClass(), log, path);\n      const validated = await ValidatedClass.fromRequest(\n        entity,\n        log,\n        path,\n        props\n      );\n      return [\n        Entity.ORGANIZATION,\n        validated.cl.getExternalUuid(),\n        validated.logger,\n      ];\n    }\n    case OnboardingRequest.PayloadCase.USER: {\n      path.push('user');\n      const entity = tryGetMember(req.getUser(), log, path);\n      const validated = await ValidatedUser.fromRequest(\n        entity,\n        log,\n        path,\n        props\n      );\n      return [\n        Entity.ORGANIZATION,\n        validated.user.getExternalUuid(),\n        validated.logger,\n      ];\n    }\n    default:\n      throw BAD_REQUEST(\n        `If action is of type 'CREATE', payload must be one of 'Organization',\n        'School', 'Class' or 'User'`,\n        path,\n        log,\n        props\n      );\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9b3e420fe7a4461e3590efcfec644ea8e940cb62"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/index.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":126}},"10":{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},"11":{"start":{"line":10,"column":95},"end":{"line":10,"column":126}},"12":{"start":{"line":12,"column":0},"end":{"line":12,"column":62}},"13":{"start":{"line":13,"column":0},"end":{"line":13,"column":43}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":42}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":49}},"16":{"start":{"line":16,"column":0},"end":{"line":16,"column":41}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":50},"end":{"line":9,"column":51}},"loc":{"start":{"line":9,"column":71},"end":{"line":11,"column":1}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"type":"binary-expr","locations":[{"start":{"line":9,"column":20},"end":{"line":9,"column":24}},{"start":{"line":9,"column":28},"end":{"line":9,"column":45}},{"start":{"line":9,"column":50},"end":{"line":11,"column":1}}],"line":9},"5":{"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},"type":"if","locations":[{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},{"start":{"line":10,"column":21},"end":{"line":10,"column":126}}],"line":10},"6":{"loc":{"start":{"line":10,"column":25},"end":{"line":10,"column":93}},"type":"binary-expr","locations":[{"start":{"line":10,"column":25},"end":{"line":10,"column":40}},{"start":{"line":10,"column":44},"end":{"line":10,"column":93}}],"line":10}},"s":{"0":1,"1":8,"2":8,"3":8,"4":63,"5":0,"6":0,"7":0,"8":1,"9":4,"10":8,"11":8,"12":1,"13":1,"14":1,"15":1,"16":1},"f":{"0":8,"1":63,"2":0,"3":4},"b":{"0":[1,1,1],"1":[1,0],"2":[8,0],"3":[0,0],"4":[1,1,1],"5":[8,0],"6":[8,8]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/index.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/index.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,2CAAyB;AACzB,0CAAwB;AACxB,iDAA+B;AAC/B,yCAAuB","sourcesContent":["export * from './school';\nexport * from './class';\nexport * from './organization';\nexport * from './user';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0e40cd50d4a395c3837c45daad6b9956c08ef941"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/school.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/school.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":56}},"4":{"start":{"line":7,"column":14},"end":{"line":7,"column":45}},"5":{"start":{"line":8,"column":17},"end":{"line":8,"column":43}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":43}},"7":{"start":{"line":10,"column":16},"end":{"line":10,"column":41}},"8":{"start":{"line":11,"column":18},"end":{"line":11,"column":51}},"9":{"start":{"line":12,"column":26},"end":{"line":12,"column":58}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"11":{"start":{"line":16,"column":8},"end":{"line":16,"column":29}},"12":{"start":{"line":19,"column":20},"end":{"line":19,"column":98}},"13":{"start":{"line":20,"column":23},"end":{"line":20,"column":37}},"14":{"start":{"line":21,"column":8},"end":{"line":21,"column":67}},"15":{"start":{"line":22,"column":26},"end":{"line":26,"column":10}},"16":{"start":{"line":27,"column":8},"end":{"line":27,"column":66}},"17":{"start":{"line":28,"column":8},"end":{"line":28,"column":51}},"18":{"start":{"line":31,"column":23},"end":{"line":31,"column":32}},"19":{"start":{"line":32,"column":26},"end":{"line":32,"column":106}},"20":{"start":{"line":33,"column":8},"end":{"line":40,"column":9}},"21":{"start":{"line":34,"column":12},"end":{"line":39,"column":13}},"22":{"start":{"line":35,"column":26},"end":{"line":36,"column":188}},"23":{"start":{"line":37,"column":16},"end":{"line":37,"column":40}},"24":{"start":{"line":38,"column":16},"end":{"line":38,"column":33}},"25":{"start":{"line":41,"column":8},"end":{"line":42,"column":67}},"26":{"start":{"line":42,"column":12},"end":{"line":42,"column":67}},"27":{"start":{"line":45,"column":20},"end":{"line":45,"column":51}},"28":{"start":{"line":46,"column":28},"end":{"line":46,"column":33}},"29":{"start":{"line":47,"column":8},"end":{"line":53,"column":9}},"30":{"start":{"line":48,"column":12},"end":{"line":48,"column":59}},"31":{"start":{"line":49,"column":12},"end":{"line":49,"column":33}},"32":{"start":{"line":54,"column":8},"end":{"line":55,"column":98}},"33":{"start":{"line":55,"column":12},"end":{"line":55,"column":98}},"34":{"start":{"line":56,"column":8},"end":{"line":56,"column":73}},"35":{"start":{"line":59,"column":0},"end":{"line":59,"column":42}},"36":{"start":{"line":60,"column":0},"end":{"line":60,"column":48}},"37":{"start":{"line":61,"column":0},"end":{"line":74,"column":3}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":32},"end":{"line":17,"column":5}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":55},"end":{"line":29,"column":5}},"line":18},"3":{"name":"(anonymous_3)","decl":{"start":{"line":30,"column":4},"end":{"line":30,"column":5}},"loc":{"start":{"line":30,"column":54},"end":{"line":43,"column":5}},"line":30},"4":{"name":"(anonymous_4)","decl":{"start":{"line":44,"column":4},"end":{"line":44,"column":5}},"loc":{"start":{"line":44,"column":42},"end":{"line":57,"column":5}},"line":44}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":33,"column":8},"end":{"line":40,"column":9}},"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":40,"column":9}},{"start":{"line":33,"column":8},"end":{"line":40,"column":9}}],"line":33},"4":{"loc":{"start":{"line":35,"column":26},"end":{"line":36,"column":188}},"type":"binary-expr","locations":[{"start":{"line":35,"column":26},"end":{"line":35,"column":39}},{"start":{"line":36,"column":20},"end":{"line":36,"column":188}}],"line":35},"5":{"loc":{"start":{"line":41,"column":8},"end":{"line":42,"column":67}},"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":42,"column":67}},{"start":{"line":41,"column":8},"end":{"line":42,"column":67}}],"line":41},"6":{"loc":{"start":{"line":54,"column":8},"end":{"line":55,"column":98}},"type":"if","locations":[{"start":{"line":54,"column":8},"end":{"line":55,"column":98}},{"start":{"line":54,"column":8},"end":{"line":55,"column":98}}],"line":54}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":16,"13":16,"14":16,"15":3,"16":3,"17":1,"18":16,"19":16,"20":16,"21":13,"22":13,"23":13,"24":13,"25":16,"26":13,"27":3,"28":3,"29":3,"30":3,"31":1,"32":3,"33":1,"34":2,"35":1,"36":1,"37":1},"f":{"0":1,"1":1,"2":16,"3":16,"4":3},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[13,3],"4":[13,13],"5":[13,3],"6":[1,2]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/school.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/school.ts"],"names":[],"mappings":"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","sourcesContent":["import Joi from 'joi';\nimport { Logger } from 'pino';\n\nimport {\n  Category,\n  ENTITY_ALREADY_EXISTS,\n  Errors,\n  MachineError,\n  OnboardingError,\n  Props,\n} from '../../../errors';\nimport { Entity, School as PbSchool } from '../../../protos';\nimport { Entity as AppEntity } from '../../../types';\nimport { Context } from '../../../utils/context';\nimport {\n  JOI_VALIDATION_SETTINGS,\n  VALIDATION_RULES,\n} from '../../validationRules';\n\nexport class ValidatedSchool {\n  public static entity = Entity.SCHOOL;\n\n  private constructor(\n    public readonly school: PbSchool,\n    public logger: Logger\n  ) {}\n\n  public static async fromRequest(\n    req: PbSchool,\n    logger: Logger,\n    path: string[],\n    props: Props\n  ): Promise<ValidatedSchool> {\n    const log = logger.child({\n      ...props,\n      entity: this.entity,\n    });\n    const entity = req.toObject();\n    ValidatedSchool.schemaValidation(entity, log, path, props);\n    const newLogger = log.child({\n      organizationId: entity.externalOrganizationUuid,\n      entityId: entity.externalUuid,\n      name: entity.name,\n    });\n    await ValidatedSchool.entityValidation(entity, newLogger);\n    return new ValidatedSchool(req, newLogger);\n  }\n\n  private static schemaValidation(\n    entity: PbSchool.AsObject,\n    log: Logger,\n    path: string[],\n    props: Props\n  ): void {\n    const errors = new Map();\n    const { error } = schoolSchema.validate(entity, JOI_VALIDATION_SETTINGS);\n    if (error) {\n      for (const { path: p, message } of error.details) {\n        const e =\n          errors.get(p) ||\n          new OnboardingError(\n            MachineError.VALIDATION,\n            `${this.entity} failed validation`,\n            Category.REQUEST,\n            log,\n            [...path, ...p.map(toString)],\n            props\n          );\n        e.details.push(message);\n        errors.set(p, e);\n      }\n    }\n    if (errors.size > 0) throw new Errors(Array.from(errors.values()));\n  }\n\n  private static async entityValidation(\n    e: PbSchool.AsObject,\n    log: Logger\n  ): Promise<void> {\n    const ctx = Context.getInstance();\n    let alreadyExists = false;\n    try {\n      await ctx.schoolIdIsValid(e.externalUuid, log);\n      alreadyExists = true;\n    } catch (_) {\n      /* if the school id is NOT valid, then we want to add it */\n    }\n    if (alreadyExists)\n      throw ENTITY_ALREADY_EXISTS(e.externalUuid, AppEntity.SCHOOL, log);\n    await ctx.organizationIdIsValid(e.externalOrganizationUuid, log);\n  }\n}\n\nexport const schoolSchema = Joi.object({\n  externalUuid: Joi.string().guid({ version: ['uuidv4'] }),\n\n  externalOrganizationUuid: Joi.string()\n    .guid({ version: ['uuidv4'] })\n    .required(),\n\n  name: Joi.string()\n    .min(VALIDATION_RULES.SCHOOL_NAME_MIN_LENGTH)\n    .max(VALIDATION_RULES.SCHOOL_NAME_MAX_LENGTH)\n    .required(),\n\n  shortCode: Joi.string()\n    .min(VALIDATION_RULES.SHORTCODE_MIN_LENGTH)\n    .max(VALIDATION_RULES.SHORTCODE_MAX_LENGTH)\n    .required(),\n});\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c170311b086c43a421e1666757a9b3d1d011e5c5"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/context.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/context.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"4":{"start":{"line":7,"column":20},"end":{"line":7,"column":57}},"5":{"start":{"line":8,"column":19},"end":{"line":8,"column":41}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":37}},"7":{"start":{"line":10,"column":16},"end":{"line":10,"column":35}},"8":{"start":{"line":13,"column":8},"end":{"line":17,"column":11}},"9":{"start":{"line":18,"column":8},"end":{"line":22,"column":11}},"10":{"start":{"line":23,"column":8},"end":{"line":27,"column":11}},"11":{"start":{"line":28,"column":8},"end":{"line":32,"column":11}},"12":{"start":{"line":33,"column":8},"end":{"line":37,"column":11}},"13":{"start":{"line":38,"column":8},"end":{"line":42,"column":11}},"14":{"start":{"line":43,"column":8},"end":{"line":47,"column":11}},"15":{"start":{"line":51,"column":8},"end":{"line":52,"column":34}},"16":{"start":{"line":52,"column":12},"end":{"line":52,"column":34}},"17":{"start":{"line":53,"column":8},"end":{"line":53,"column":39}},"18":{"start":{"line":54,"column":8},"end":{"line":54,"column":30}},"19":{"start":{"line":62,"column":8},"end":{"line":63,"column":87}},"20":{"start":{"line":63,"column":12},"end":{"line":63,"column":87}},"21":{"start":{"line":65,"column":25},"end":{"line":65,"column":51}},"22":{"start":{"line":66,"column":12},"end":{"line":67,"column":28}},"23":{"start":{"line":67,"column":16},"end":{"line":67,"column":28}},"24":{"start":{"line":70,"column":8},"end":{"line":78,"column":9}},"25":{"start":{"line":71,"column":25},"end":{"line":71,"column":69}},"26":{"start":{"line":72,"column":12},"end":{"line":72,"column":45}},"27":{"start":{"line":73,"column":12},"end":{"line":73,"column":24}},"28":{"start":{"line":76,"column":12},"end":{"line":76,"column":52}},"29":{"start":{"line":77,"column":12},"end":{"line":77,"column":20}},"30":{"start":{"line":86,"column":25},"end":{"line":86,"column":45}},"31":{"start":{"line":87,"column":12},"end":{"line":88,"column":28}},"32":{"start":{"line":88,"column":16},"end":{"line":88,"column":28}},"33":{"start":{"line":91,"column":8},"end":{"line":91,"column":49}},"34":{"start":{"line":92,"column":8},"end":{"line":92,"column":35}},"35":{"start":{"line":100,"column":25},"end":{"line":100,"column":45}},"36":{"start":{"line":101,"column":12},"end":{"line":102,"column":28}},"37":{"start":{"line":102,"column":16},"end":{"line":102,"column":28}},"38":{"start":{"line":105,"column":8},"end":{"line":105,"column":48}},"39":{"start":{"line":106,"column":8},"end":{"line":106,"column":35}},"40":{"start":{"line":114,"column":25},"end":{"line":114,"column":45}},"41":{"start":{"line":115,"column":12},"end":{"line":116,"column":28}},"42":{"start":{"line":116,"column":16},"end":{"line":116,"column":28}},"43":{"start":{"line":119,"column":8},"end":{"line":119,"column":47}},"44":{"start":{"line":120,"column":8},"end":{"line":120,"column":33}},"45":{"start":{"line":129,"column":8},"end":{"line":130,"column":98}},"46":{"start":{"line":130,"column":12},"end":{"line":130,"column":98}},"47":{"start":{"line":131,"column":18},"end":{"line":131,"column":42}},"48":{"start":{"line":132,"column":8},"end":{"line":140,"column":9}},"49":{"start":{"line":133,"column":24},"end":{"line":133,"column":84}},"50":{"start":{"line":134,"column":24},"end":{"line":134,"column":33}},"51":{"start":{"line":135,"column":12},"end":{"line":137,"column":13}},"52":{"start":{"line":136,"column":16},"end":{"line":136,"column":34}},"53":{"start":{"line":138,"column":12},"end":{"line":138,"column":42}},"54":{"start":{"line":139,"column":12},"end":{"line":139,"column":23}},"55":{"start":{"line":141,"column":27},"end":{"line":141,"column":29}},"56":{"start":{"line":142,"column":29},"end":{"line":142,"column":31}},"57":{"start":{"line":143,"column":8},"end":{"line":150,"column":9}},"58":{"start":{"line":144,"column":23},"end":{"line":144,"column":37}},"59":{"start":{"line":145,"column":12},"end":{"line":148,"column":13}},"60":{"start":{"line":146,"column":16},"end":{"line":146,"column":55}},"61":{"start":{"line":147,"column":16},"end":{"line":147,"column":25}},"62":{"start":{"line":149,"column":12},"end":{"line":149,"column":39}},"63":{"start":{"line":151,"column":8},"end":{"line":152,"column":30}},"64":{"start":{"line":152,"column":12},"end":{"line":152,"column":30}},"65":{"start":{"line":153,"column":8},"end":{"line":153,"column":161}},"66":{"start":{"line":161,"column":18},"end":{"line":161,"column":39}},"67":{"start":{"line":162,"column":8},"end":{"line":170,"column":9}},"68":{"start":{"line":163,"column":24},"end":{"line":163,"column":78}},"69":{"start":{"line":164,"column":24},"end":{"line":164,"column":33}},"70":{"start":{"line":165,"column":12},"end":{"line":167,"column":13}},"71":{"start":{"line":166,"column":16},"end":{"line":166,"column":34}},"72":{"start":{"line":168,"column":12},"end":{"line":168,"column":39}},"73":{"start":{"line":169,"column":12},"end":{"line":169,"column":23}},"74":{"start":{"line":171,"column":27},"end":{"line":171,"column":29}},"75":{"start":{"line":172,"column":29},"end":{"line":172,"column":31}},"76":{"start":{"line":173,"column":8},"end":{"line":180,"column":9}},"77":{"start":{"line":174,"column":23},"end":{"line":174,"column":34}},"78":{"start":{"line":175,"column":12},"end":{"line":178,"column":13}},"79":{"start":{"line":176,"column":16},"end":{"line":176,"column":52}},"80":{"start":{"line":177,"column":16},"end":{"line":177,"column":25}},"81":{"start":{"line":179,"column":12},"end":{"line":179,"column":36}},"82":{"start":{"line":181,"column":8},"end":{"line":182,"column":30}},"83":{"start":{"line":182,"column":12},"end":{"line":182,"column":30}},"84":{"start":{"line":183,"column":8},"end":{"line":183,"column":158}},"85":{"start":{"line":186,"column":0},"end":{"line":186,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":18},"end":{"line":49,"column":5}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":50,"column":4},"end":{"line":50,"column":5}},"loc":{"start":{"line":50,"column":25},"end":{"line":55,"column":5}},"line":50},"3":{"name":"(anonymous_3)","decl":{"start":{"line":61,"column":4},"end":{"line":61,"column":5}},"loc":{"start":{"line":61,"column":41},"end":{"line":79,"column":5}},"line":61},"4":{"name":"(anonymous_4)","decl":{"start":{"line":84,"column":4},"end":{"line":84,"column":5}},"loc":{"start":{"line":84,"column":35},"end":{"line":93,"column":5}},"line":84},"5":{"name":"(anonymous_5)","decl":{"start":{"line":98,"column":4},"end":{"line":98,"column":5}},"loc":{"start":{"line":98,"column":34},"end":{"line":107,"column":5}},"line":98},"6":{"name":"(anonymous_6)","decl":{"start":{"line":112,"column":4},"end":{"line":112,"column":5}},"loc":{"start":{"line":112,"column":33},"end":{"line":121,"column":5}},"line":112},"7":{"name":"(anonymous_7)","decl":{"start":{"line":127,"column":4},"end":{"line":127,"column":5}},"loc":{"start":{"line":127,"column":59},"end":{"line":154,"column":5}},"line":127},"8":{"name":"(anonymous_8)","decl":{"start":{"line":160,"column":4},"end":{"line":160,"column":5}},"loc":{"start":{"line":160,"column":43},"end":{"line":184,"column":5}},"line":160}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":51,"column":8},"end":{"line":52,"column":34}},"type":"if","locations":[{"start":{"line":51,"column":8},"end":{"line":52,"column":34}},{"start":{"line":51,"column":8},"end":{"line":52,"column":34}}],"line":51},"4":{"loc":{"start":{"line":62,"column":8},"end":{"line":63,"column":87}},"type":"if","locations":[{"start":{"line":62,"column":8},"end":{"line":63,"column":87}},{"start":{"line":62,"column":8},"end":{"line":63,"column":87}}],"line":62},"5":{"loc":{"start":{"line":66,"column":12},"end":{"line":67,"column":28}},"type":"if","locations":[{"start":{"line":66,"column":12},"end":{"line":67,"column":28}},{"start":{"line":66,"column":12},"end":{"line":67,"column":28}}],"line":66},"6":{"loc":{"start":{"line":87,"column":12},"end":{"line":88,"column":28}},"type":"if","locations":[{"start":{"line":87,"column":12},"end":{"line":88,"column":28}},{"start":{"line":87,"column":12},"end":{"line":88,"column":28}}],"line":87},"7":{"loc":{"start":{"line":101,"column":12},"end":{"line":102,"column":28}},"type":"if","locations":[{"start":{"line":101,"column":12},"end":{"line":102,"column":28}},{"start":{"line":101,"column":12},"end":{"line":102,"column":28}}],"line":101},"8":{"loc":{"start":{"line":115,"column":12},"end":{"line":116,"column":28}},"type":"if","locations":[{"start":{"line":115,"column":12},"end":{"line":116,"column":28}},{"start":{"line":115,"column":12},"end":{"line":116,"column":28}}],"line":115},"9":{"loc":{"start":{"line":129,"column":8},"end":{"line":130,"column":98}},"type":"if","locations":[{"start":{"line":129,"column":8},"end":{"line":130,"column":98}},{"start":{"line":129,"column":8},"end":{"line":130,"column":98}}],"line":129},"10":{"loc":{"start":{"line":132,"column":8},"end":{"line":140,"column":9}},"type":"if","locations":[{"start":{"line":132,"column":8},"end":{"line":140,"column":9}},{"start":{"line":132,"column":8},"end":{"line":140,"column":9}}],"line":132},"11":{"loc":{"start":{"line":145,"column":12},"end":{"line":148,"column":13}},"type":"if","locations":[{"start":{"line":145,"column":12},"end":{"line":148,"column":13}},{"start":{"line":145,"column":12},"end":{"line":148,"column":13}}],"line":145},"12":{"loc":{"start":{"line":151,"column":8},"end":{"line":152,"column":30}},"type":"if","locations":[{"start":{"line":151,"column":8},"end":{"line":152,"column":30}},{"start":{"line":151,"column":8},"end":{"line":152,"column":30}}],"line":151},"13":{"loc":{"start":{"line":162,"column":8},"end":{"line":170,"column":9}},"type":"if","locations":[{"start":{"line":162,"column":8},"end":{"line":170,"column":9}},{"start":{"line":162,"column":8},"end":{"line":170,"column":9}}],"line":162},"14":{"loc":{"start":{"line":175,"column":12},"end":{"line":178,"column":13}},"type":"if","locations":[{"start":{"line":175,"column":12},"end":{"line":178,"column":13}},{"start":{"line":175,"column":12},"end":{"line":178,"column":13}}],"line":175},"15":{"loc":{"start":{"line":181,"column":8},"end":{"line":182,"column":30}},"type":"if","locations":[{"start":{"line":181,"column":8},"end":{"line":182,"column":30}},{"start":{"line":181,"column":8},"end":{"line":182,"column":30}}],"line":181}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":19,"16":18,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":1},"f":{"0":1,"1":1,"2":19,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[18,1],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/context.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/context.ts"],"names":[],"mappings":"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","sourcesContent":["import LRU from 'lru-cache';\nimport { Logger } from 'pino';\n\nimport { Class, Organization, Program, Role, School, User } from '../entities';\nimport {\n  Category,\n  ENTITY_NOT_FOUND,\n  MachineError,\n  OnboardingError,\n} from '../errors';\nimport { IdNameMapper } from '../services/adminService';\nimport { Entity } from '../types';\n\nimport { ExternalUuid, Uuid } from '.';\n\nexport class Context {\n  private static _instance: Context;\n\n  private invalidOrganizations = new LRU<ExternalUuid, null>({\n    max: 100,\n    maxAge: 60 * 1000 * 5,\n    updateAgeOnGet: true,\n  });\n\n  private organizations = new LRU<ExternalUuid, Uuid>({\n    max: 50,\n    maxAge: 60 * 1000,\n    updateAgeOnGet: true,\n  });\n\n  private schools = new LRU<ExternalUuid, null>({\n    max: 50,\n    maxAge: 60 * 1000,\n    updateAgeOnGet: true,\n  });\n\n  private classes = new LRU<ExternalUuid, null>({\n    max: 50,\n    maxAge: 60 * 1000,\n    updateAgeOnGet: true,\n  });\n\n  private users = new LRU<ExternalUuid, null>({\n    max: 100,\n    maxAge: 60 * 1000,\n    updateAgeOnGet: true,\n  });\n\n  private roles = new LRU<ExternalUuid, Map<string, Uuid>>({\n    max: 10,\n    maxAge: 60 * 1000,\n    updateAgeOnGet: true,\n  });\n\n  private programs = new LRU<ExternalUuid, Map<string, Uuid>>({\n    max: 10,\n    maxAge: 60 * 1000,\n    updateAgeOnGet: true,\n  });\n\n  private constructor() {\n    // Handled in Context.getInstance();\n  }\n\n  public static getInstance(): Context {\n    if (this._instance) return this._instance;\n    this._instance = new Context();\n    return this._instance;\n  }\n\n  /**\n   * @param {ExternalUuid} id - The external uuid of the organization\n   * @returns {Uuid} the KidsLoop uuid for the organization\n   * @errors if the id does not correspond to an organization in our system\n   */\n  public async organizationIdIsValid(\n    id: ExternalUuid,\n    log: Logger\n  ): Promise<Uuid> {\n    if (this.invalidOrganizations.has(id))\n      throw ENTITY_NOT_FOUND(id, Entity.ORGANIZATION, log);\n    {\n      const klId = this.organizations.get(id);\n      if (klId) return klId;\n    }\n\n    // Will error\n    try {\n      const klId = await Organization.getId(id, log);\n      this.organizations.set(id, klId);\n      return klId;\n    } catch (e) {\n      this.invalidOrganizations.set(id, null);\n      throw e;\n    }\n  }\n\n  /**\n   * @param {ExternalUuid} id - The external uuid of the school\n   * @errors if the id does not correspond to a school in our system\n   */\n  public async schoolIdIsValid(id: ExternalUuid, log: Logger): Promise<void> {\n    {\n      const klId = this.schools.get(id);\n      if (klId) return klId;\n    }\n\n    // Will error\n    await School.isValid(id, log);\n    this.schools.set(id, null);\n  }\n\n  /**\n   * @param {ExternalUuid} id - The external uuid of the class\n   * @errors if the id does not correspond to a class in our system\n   */\n  public async classIdIsValid(id: ExternalUuid, log: Logger): Promise<void> {\n    {\n      const klId = this.classes.get(id);\n      if (klId) return klId;\n    }\n\n    // Will error\n    await Class.isValid(id, log);\n    this.classes.set(id, null);\n  }\n\n  /**\n   * @param {ExternalUuid} id - The external uuid of the user\n   * @errors if the id does not correspond to a school in our system\n   */\n  public async userIdIsValid(id: ExternalUuid, log: Logger): Promise<void> {\n    {\n      const klId = this.schools.get(id);\n      if (klId) return klId;\n    }\n\n    // Will error\n    await User.isValid(id, log);\n    this.users.set(id, null);\n  }\n\n  /**\n   * @param {string[]} programs - The program names to be validated\n   * @param {string} orgId - The client UUID for the organization\n   * @errors if any of the programs are invalid\n   */\n  public async programsAreValid(\n    programs: string[],\n    orgId: ExternalUuid,\n    log: Logger,\n    schoolId?: ExternalUuid\n  ): Promise<IdNameMapper[]> {\n    // @TODO - Implement some form of caching on this\n    if (schoolId)\n      return await Program.getIdsByNamesForClass(\n        programs,\n        orgId,\n        schoolId,\n        log\n      );\n    const p = this.programs.get(orgId);\n    if (!p) {\n      const ids = await Program.getIdsByNames(programs, orgId, log);\n      const map = new Map();\n      for (const { id, name } of ids) {\n        map.set(name, id);\n      }\n      this.programs.set(orgId, map);\n      return ids;\n    }\n    const validNames = [];\n    const invalidNames = [];\n    for (const program of programs) {\n      const id = p.get(program);\n      if (id) {\n        validNames.push({ id, name: program });\n        continue;\n      }\n      invalidNames.push(program);\n    }\n    if (invalidNames.length === 0) return validNames;\n    throw new OnboardingError(\n      MachineError.VALIDATION,\n      `Programs: ${invalidNames.join(', ')} are invalid`,\n      Category.REQUEST,\n      log\n    );\n  }\n\n  /**\n   * @param {string[]} roles - The role names to be validated\n   * @param {string} orgId - The client UUID for the organization\n   * @errors if any of the programs are invalid\n   */\n  public async rolesAreValid(\n    roles: string[],\n    orgId: ExternalUuid,\n    log: Logger\n  ): Promise<IdNameMapper[]> {\n    const r = this.roles.get(orgId);\n    if (!r) {\n      const ids = await Role.getIdsByNames(roles, orgId, log);\n      const map = new Map();\n      for (const { id, name } of ids) {\n        map.set(name, id);\n      }\n      this.roles.set(orgId, map);\n      return ids;\n    }\n    const validNames = [];\n    const invalidNames = [];\n    for (const role of roles) {\n      const id = r.get(role);\n      if (id) {\n        validNames.push({ id, name: role });\n        continue;\n      }\n      invalidNames.push(role);\n    }\n    if (invalidNames.length === 0) return validNames;\n    throw new OnboardingError(\n      MachineError.VALIDATION,\n      `Roles: ${invalidNames.join(', ')} are invalid`,\n      Category.REQUEST,\n      log\n    );\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b40815d47bc9c617ea0b144b7fef6b3fc2df331d"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/validationRules.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/validationRules.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":68}},"2":{"start":{"line":4,"column":0},"end":{"line":31,"column":2}},"3":{"start":{"line":32,"column":0},"end":{"line":35,"column":3}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/validationRules.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/validationRules.ts"],"names":[],"mappings":";;;AAAa,QAAA,gBAAgB,GAAG;IAC9B,oBAAoB,EAAE,CAAC;IACvB,oBAAoB,EAAE,EAAE;IAExB,4BAA4B,EAAE,CAAC;IAC/B,4BAA4B,EAAE,EAAE;IAEhC,sBAAsB,EAAE,CAAC;IACzB,yBAAyB;IACzB,sBAAsB,EAAE,GAAG;IAE3B,uBAAuB,EAAE,CAAC;IAC1B,uBAAuB,EAAE,EAAE;IAE3B,oBAAoB,EAAE,EAAE;IAExB,qBAAqB,EAAE,CAAC;IACxB,qBAAqB,EAAE,EAAE;IACzB,2BAA2B,EAAE,EAAE;IAE/B,iCAAiC,EAAE,CAAC;IACpC,yBAAyB;IACzB,iCAAiC,EAAE,EAAE;IAErC,mBAAmB,EAAE,CAAC;IACtB,wCAAwC;IACxC,mBAAmB,EAAE,EAAE;IAEvB,gBAAgB,EAAE,GAAG;IACrB,WAAW,EACT,sJAAsJ;IAExJ,WAAW,EAAE,mBAAmB;IAEhC,SAAS,EAAE,mCAAmC;IAE9C,iBAAiB,EAAE,CAAC;IACpB,iBAAiB,EAAE,EAAE;IAErB,YAAY,EAAE,uBAAuB;CACtC,CAAC;AAEW,QAAA,uBAAuB,GAAG,MAAM,CAAC,MAAM,CAAC;IACnD,UAAU,EAAE,KAAK;IACjB,YAAY,EAAE,KAAK;CACpB,CAAC,CAAC","sourcesContent":["export const VALIDATION_RULES = {\n  SHORTCODE_MIN_LENGTH: 3,\n  SHORTCODE_MAX_LENGTH: 16,\n\n  ORGANIZATION_NAME_MIN_LENGTH: 3,\n  ORGANIZATION_NAME_MAX_LENGTH: 30,\n\n  SCHOOL_NAME_MIN_LENGTH: 3,\n  // This will be truncated\n  SCHOOL_NAME_MAX_LENGTH: 120,\n\n  PROGRAM_NAME_MIN_LENGTH: 3,\n  PROGRAM_NAME_MAX_LENGTH: 30,\n\n  ROLE_NAME_MAX_LENGTH: 20,\n\n  CLASS_NAME_MIN_LENGTH: 3,\n  CLASS_NAME_MAX_LENGTH: 45,\n  CLASS_SHORT_CODE_MAX_LENGTH: 16,\n\n  USER_GIVEN_FAMILY_NAME_MIN_LENGTH: 2,\n  // This will be truncated\n  USER_GIVEN_FAMILY_NAME_MAX_LENGTH: 35,\n\n  USERNAME_MIN_LENGTH: 2,\n  // This might need to be truncated to 35\n  USERNAME_MAX_LENGTH: 50,\n\n  EMAIL_MAX_LENGTH: 250,\n  EMAIL_REGEX:\n    /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n\n  PHONE_REGEX: /^\\+[1-9]\\d{8,14}$/,\n\n  DOB_REGEX: /^(((0)[0-9])|((1)[0-2]))(-)\\d{4}$/,\n\n  GENDER_MIN_LENGTH: 3,\n  GENDER_MAX_LENGTH: 16,\n\n  ALPHANUMERIC: /^[A-Za-z0-9 &,'-/.]*$/,\n};\n\nexport const JOI_VALIDATION_SETTINGS = Object.freeze({\n  abortEarly: false,\n  allowUnknown: false,\n});\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"03919f58aad892eb97318670c2796b54982b3295"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/class.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/class.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":54}},"4":{"start":{"line":7,"column":14},"end":{"line":7,"column":45}},"5":{"start":{"line":8,"column":17},"end":{"line":8,"column":43}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":43}},"7":{"start":{"line":10,"column":16},"end":{"line":10,"column":41}},"8":{"start":{"line":11,"column":18},"end":{"line":11,"column":51}},"9":{"start":{"line":12,"column":26},"end":{"line":12,"column":58}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":21}},"11":{"start":{"line":16,"column":8},"end":{"line":16,"column":29}},"12":{"start":{"line":19,"column":20},"end":{"line":19,"column":98}},"13":{"start":{"line":20,"column":23},"end":{"line":20,"column":37}},"14":{"start":{"line":21,"column":8},"end":{"line":21,"column":66}},"15":{"start":{"line":22,"column":26},"end":{"line":26,"column":10}},"16":{"start":{"line":27,"column":8},"end":{"line":27,"column":65}},"17":{"start":{"line":28,"column":8},"end":{"line":28,"column":50}},"18":{"start":{"line":31,"column":23},"end":{"line":31,"column":32}},"19":{"start":{"line":32,"column":26},"end":{"line":32,"column":105}},"20":{"start":{"line":33,"column":8},"end":{"line":40,"column":9}},"21":{"start":{"line":34,"column":12},"end":{"line":39,"column":13}},"22":{"start":{"line":35,"column":26},"end":{"line":36,"column":188}},"23":{"start":{"line":37,"column":16},"end":{"line":37,"column":40}},"24":{"start":{"line":38,"column":16},"end":{"line":38,"column":33}},"25":{"start":{"line":41,"column":8},"end":{"line":42,"column":67}},"26":{"start":{"line":42,"column":12},"end":{"line":42,"column":67}},"27":{"start":{"line":45,"column":20},"end":{"line":45,"column":51}},"28":{"start":{"line":46,"column":28},"end":{"line":46,"column":33}},"29":{"start":{"line":47,"column":8},"end":{"line":54,"column":9}},"30":{"start":{"line":48,"column":12},"end":{"line":48,"column":58}},"31":{"start":{"line":50,"column":12},"end":{"line":50,"column":33}},"32":{"start":{"line":55,"column":8},"end":{"line":56,"column":97}},"33":{"start":{"line":56,"column":12},"end":{"line":56,"column":97}},"34":{"start":{"line":57,"column":8},"end":{"line":57,"column":73}},"35":{"start":{"line":58,"column":8},"end":{"line":58,"column":61}},"36":{"start":{"line":61,"column":0},"end":{"line":61,"column":40}},"37":{"start":{"line":62,"column":0},"end":{"line":62,"column":46}},"38":{"start":{"line":63,"column":0},"end":{"line":75,"column":3}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":28},"end":{"line":17,"column":5}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":55},"end":{"line":29,"column":5}},"line":18},"3":{"name":"(anonymous_3)","decl":{"start":{"line":30,"column":4},"end":{"line":30,"column":5}},"loc":{"start":{"line":30,"column":54},"end":{"line":43,"column":5}},"line":30},"4":{"name":"(anonymous_4)","decl":{"start":{"line":44,"column":4},"end":{"line":44,"column":5}},"loc":{"start":{"line":44,"column":42},"end":{"line":59,"column":5}},"line":44}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":33,"column":8},"end":{"line":40,"column":9}},"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":40,"column":9}},{"start":{"line":33,"column":8},"end":{"line":40,"column":9}}],"line":33},"4":{"loc":{"start":{"line":35,"column":26},"end":{"line":36,"column":188}},"type":"binary-expr","locations":[{"start":{"line":35,"column":26},"end":{"line":35,"column":39}},{"start":{"line":36,"column":20},"end":{"line":36,"column":188}}],"line":35},"5":{"loc":{"start":{"line":41,"column":8},"end":{"line":42,"column":67}},"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":42,"column":67}},{"start":{"line":41,"column":8},"end":{"line":42,"column":67}}],"line":41},"6":{"loc":{"start":{"line":55,"column":8},"end":{"line":56,"column":97}},"type":"if","locations":[{"start":{"line":55,"column":8},"end":{"line":56,"column":97}},{"start":{"line":55,"column":8},"end":{"line":56,"column":97}}],"line":55}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":17,"13":17,"14":17,"15":4,"16":4,"17":1,"18":17,"19":17,"20":17,"21":13,"22":13,"23":13,"24":13,"25":17,"26":13,"27":4,"28":4,"29":4,"30":4,"31":1,"32":4,"33":1,"34":3,"35":2,"36":1,"37":1,"38":1},"f":{"0":1,"1":1,"2":17,"3":17,"4":4},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[13,4],"4":[13,13],"5":[13,4],"6":[1,3]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/class.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/class.ts"],"names":[],"mappings":"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","sourcesContent":["import Joi from 'joi';\nimport { Logger } from 'pino';\n\nimport {\n  Category,\n  ENTITY_ALREADY_EXISTS,\n  Errors,\n  MachineError,\n  OnboardingError,\n  Props,\n} from '../../../errors';\nimport { Entity, Class as PbClass } from '../../../protos';\nimport { Entity as AppEntity } from '../../../types';\nimport { Context } from '../../../utils/context';\nimport {\n  JOI_VALIDATION_SETTINGS,\n  VALIDATION_RULES,\n} from '../../validationRules';\n\nexport class ValidatedClass {\n  public static entity = Entity.CLASS;\n\n  private constructor(public readonly cl: PbClass, public logger: Logger) {}\n\n  public static async fromRequest(\n    req: PbClass,\n    logger: Logger,\n    path: string[],\n    props: Props\n  ): Promise<ValidatedClass> {\n    const log = logger.child({\n      ...props,\n      entity: this.entity,\n    });\n    const entity = req.toObject();\n    ValidatedClass.schemaValidation(entity, log, path, props);\n    const newLogger = log.child({\n      organizationId: entity.externalOrganizationUuid,\n      entityId: entity.externalUuid,\n      name: entity.name,\n    });\n    await ValidatedClass.entityValidation(entity, newLogger);\n    return new ValidatedClass(req, newLogger);\n  }\n\n  private static schemaValidation(\n    entity: PbClass.AsObject,\n    log: Logger,\n    path: string[],\n    props: Props\n  ): void {\n    const errors = new Map();\n    const { error } = classSchema.validate(entity, JOI_VALIDATION_SETTINGS);\n\n    if (error) {\n      for (const { path: p, message } of error.details) {\n        const e =\n          errors.get(p) ||\n          new OnboardingError(\n            MachineError.VALIDATION,\n            `${this.entity} failed validation`,\n            Category.REQUEST,\n            log,\n            [...path, ...p.map(toString)],\n            props\n          );\n        e.details.push(message);\n        errors.set(p, e);\n      }\n    }\n    if (errors.size > 0) throw new Errors(Array.from(errors.values()));\n  }\n\n  private static async entityValidation(\n    e: PbClass.AsObject,\n    log: Logger\n  ): Promise<void> {\n    const ctx = Context.getInstance();\n    let alreadyExists = false;\n    try {\n      await ctx.classIdIsValid(e.externalUuid, log);\n      // If the class already exists, then we want to error and not add it\n      alreadyExists = true;\n    } catch (_) {\n      /* if the class id is NOT valid, then we want to add it */\n    }\n    if (alreadyExists)\n      throw ENTITY_ALREADY_EXISTS(e.externalUuid, AppEntity.CLASS, log);\n    await ctx.organizationIdIsValid(e.externalOrganizationUuid, log);\n    await ctx.schoolIdIsValid(e.externalSchoolUuid, log);\n  }\n}\n\nexport const classSchema = Joi.object({\n  externalUuid: Joi.string().guid({ version: ['uuidv4'] }),\n\n  externalOrganizationUuid: Joi.string()\n    .guid({ version: ['uuidv4'] })\n    .required(),\n\n  name: Joi.string()\n    .min(VALIDATION_RULES.CLASS_NAME_MIN_LENGTH)\n    .max(VALIDATION_RULES.CLASS_NAME_MAX_LENGTH)\n    .required(),\n\n  externalSchoolUuid: Joi.string()\n    .guid({ version: ['uuidv4'] })\n    .required(),\n});\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"44ab8d15995f04ab994db3d70f8accddc1dc7aa4"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/organization.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/organization.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":68}},"4":{"start":{"line":7,"column":14},"end":{"line":7,"column":45}},"5":{"start":{"line":8,"column":19},"end":{"line":8,"column":47}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":43}},"7":{"start":{"line":10,"column":17},"end":{"line":10,"column":43}},"8":{"start":{"line":11,"column":18},"end":{"line":11,"column":51}},"9":{"start":{"line":12,"column":26},"end":{"line":12,"column":58}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":23}},"11":{"start":{"line":16,"column":8},"end":{"line":16,"column":29}},"12":{"start":{"line":19,"column":20},"end":{"line":19,"column":98}},"13":{"start":{"line":20,"column":23},"end":{"line":20,"column":37}},"14":{"start":{"line":21,"column":8},"end":{"line":21,"column":73}},"15":{"start":{"line":22,"column":26},"end":{"line":25,"column":10}},"16":{"start":{"line":26,"column":8},"end":{"line":26,"column":72}},"17":{"start":{"line":27,"column":8},"end":{"line":27,"column":57}},"18":{"start":{"line":30,"column":23},"end":{"line":30,"column":32}},"19":{"start":{"line":31,"column":26},"end":{"line":31,"column":112}},"20":{"start":{"line":32,"column":8},"end":{"line":39,"column":9}},"21":{"start":{"line":33,"column":12},"end":{"line":38,"column":13}},"22":{"start":{"line":34,"column":26},"end":{"line":35,"column":199}},"23":{"start":{"line":35,"column":177},"end":{"line":35,"column":189}},"24":{"start":{"line":36,"column":16},"end":{"line":36,"column":40}},"25":{"start":{"line":37,"column":16},"end":{"line":37,"column":33}},"26":{"start":{"line":40,"column":8},"end":{"line":41,"column":67}},"27":{"start":{"line":41,"column":12},"end":{"line":41,"column":67}},"28":{"start":{"line":44,"column":8},"end":{"line":51,"column":9}},"29":{"start":{"line":45,"column":24},"end":{"line":45,"column":55}},"30":{"start":{"line":47,"column":12},"end":{"line":47,"column":65}},"31":{"start":{"line":55,"column":8},"end":{"line":55,"column":69}},"32":{"start":{"line":58,"column":0},"end":{"line":58,"column":54}},"33":{"start":{"line":59,"column":0},"end":{"line":59,"column":60}},"34":{"start":{"line":60,"column":0},"end":{"line":68,"column":3}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":29},"end":{"line":17,"column":5}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":55},"end":{"line":28,"column":5}},"line":18},"3":{"name":"(anonymous_3)","decl":{"start":{"line":29,"column":4},"end":{"line":29,"column":5}},"loc":{"start":{"line":29,"column":54},"end":{"line":42,"column":5}},"line":29},"4":{"name":"(anonymous_4)","decl":{"start":{"line":35,"column":170},"end":{"line":35,"column":171}},"loc":{"start":{"line":35,"column":177},"end":{"line":35,"column":189}},"line":35},"5":{"name":"(anonymous_5)","decl":{"start":{"line":43,"column":4},"end":{"line":43,"column":5}},"loc":{"start":{"line":43,"column":42},"end":{"line":56,"column":5}},"line":43}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":32,"column":8},"end":{"line":39,"column":9}},"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":39,"column":9}},{"start":{"line":32,"column":8},"end":{"line":39,"column":9}}],"line":32},"4":{"loc":{"start":{"line":34,"column":26},"end":{"line":35,"column":199}},"type":"binary-expr","locations":[{"start":{"line":34,"column":26},"end":{"line":34,"column":39}},{"start":{"line":35,"column":20},"end":{"line":35,"column":199}}],"line":34},"5":{"loc":{"start":{"line":40,"column":8},"end":{"line":41,"column":67}},"type":"if","locations":[{"start":{"line":40,"column":8},"end":{"line":41,"column":67}},{"start":{"line":40,"column":8},"end":{"line":41,"column":67}}],"line":40}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":9,"13":9,"14":9,"15":2,"16":2,"17":1,"18":9,"19":9,"20":9,"21":7,"22":8,"23":8,"24":8,"25":8,"26":9,"27":7,"28":2,"29":2,"30":2,"31":2,"32":1,"33":1,"34":1},"f":{"0":1,"1":1,"2":9,"3":9,"4":8,"5":2},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[7,2],"4":[8,8],"5":[7,2]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/organization.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/organization.ts"],"names":[],"mappings":"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","sourcesContent":["import Joi from 'joi';\nimport { Logger } from 'pino';\n\nimport { Organization } from '../../../entities';\nimport {\n  Category,\n  Errors,\n  MachineError,\n  OnboardingError,\n  Props,\n} from '../../../errors';\nimport { Entity, Organization as PbOrganization } from '../../../protos';\nimport { Context } from '../../../utils/context';\nimport {\n  JOI_VALIDATION_SETTINGS,\n  VALIDATION_RULES,\n} from '../../validationRules';\n\nexport class ValidatedOrganization {\n  public static entity = Entity.ORGANIZATION;\n\n  private constructor(\n    public readonly org: PbOrganization,\n    public logger: Logger\n  ) {}\n\n  public static async fromRequest(\n    req: PbOrganization,\n    logger: Logger,\n    path: string[],\n    props: Props\n  ): Promise<ValidatedOrganization> {\n    const log = logger.child({\n      ...props,\n      entity: this.entity,\n    });\n    const entity = req.toObject();\n    ValidatedOrganization.schemaValidation(entity, log, path, props);\n    const newLogger = log.child({\n      entityId: entity.externalUuid,\n      name: entity.name,\n    });\n    await ValidatedOrganization.entityValidation(entity, newLogger);\n    return new ValidatedOrganization(req, newLogger);\n  }\n\n  private static schemaValidation(\n    entity: PbOrganization.AsObject,\n    log: Logger,\n    path: string[],\n    props: Props\n  ): void {\n    const errors = new Map();\n    const { error } = organizationSchema.validate(\n      entity,\n      JOI_VALIDATION_SETTINGS\n    );\n    if (error) {\n      for (const { path: p, message } of error.details) {\n        const e =\n          errors.get(p) ||\n          new OnboardingError(\n            MachineError.VALIDATION,\n            `${this.entity} failed validation`,\n            Category.REQUEST,\n            log,\n            [...path, ...p.map((p) => p.toString())],\n            props\n          );\n        e.details.push(message);\n        errors.set(p, e);\n      }\n    }\n    if (errors.size > 0) throw new Errors(Array.from(errors.values()));\n  }\n\n  private static async entityValidation(\n    e: PbOrganization.AsObject,\n    log: Logger\n  ): Promise<void> {\n    try {\n      const ctx = Context.getInstance();\n      // Organizations should already exist\n      await ctx.organizationIdIsValid(e.externalUuid, log);\n    } catch (_) {\n      /* In this case we can try and fetch the organization*/\n    }\n    // If this errors, then looks like the organization is invalid\n    // NOTE: There are a lot of moving parts in this.. can we revisit for better\n    // error handling?\n    await Organization.initializeOrganization(e, log);\n  }\n}\n\nexport const organizationSchema = Joi.object({\n  name: Joi.string()\n    .min(VALIDATION_RULES.ORGANIZATION_NAME_MIN_LENGTH)\n    .max(VALIDATION_RULES.ORGANIZATION_NAME_MAX_LENGTH)\n    .required(),\n\n  externalUuid: Joi.string()\n    .guid({ version: ['uuidv4'] })\n    .required(),\n});\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8c26da0f91a68f45fa46770e1436e9287505e9a6"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/user.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/user.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":52}},"4":{"start":{"line":7,"column":14},"end":{"line":7,"column":45}},"5":{"start":{"line":8,"column":17},"end":{"line":8,"column":43}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":43}},"7":{"start":{"line":10,"column":16},"end":{"line":10,"column":41}},"8":{"start":{"line":11,"column":18},"end":{"line":11,"column":51}},"9":{"start":{"line":12,"column":26},"end":{"line":12,"column":58}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":25}},"11":{"start":{"line":16,"column":8},"end":{"line":16,"column":29}},"12":{"start":{"line":19,"column":20},"end":{"line":19,"column":98}},"13":{"start":{"line":20,"column":23},"end":{"line":20,"column":37}},"14":{"start":{"line":21,"column":8},"end":{"line":21,"column":65}},"15":{"start":{"line":22,"column":26},"end":{"line":24,"column":10}},"16":{"start":{"line":25,"column":8},"end":{"line":25,"column":64}},"17":{"start":{"line":26,"column":8},"end":{"line":26,"column":49}},"18":{"start":{"line":29,"column":23},"end":{"line":29,"column":32}},"19":{"start":{"line":30,"column":26},"end":{"line":30,"column":104}},"20":{"start":{"line":31,"column":8},"end":{"line":38,"column":9}},"21":{"start":{"line":32,"column":12},"end":{"line":37,"column":13}},"22":{"start":{"line":33,"column":26},"end":{"line":34,"column":188}},"23":{"start":{"line":35,"column":16},"end":{"line":35,"column":40}},"24":{"start":{"line":36,"column":16},"end":{"line":36,"column":33}},"25":{"start":{"line":43,"column":33},"end":{"line":43,"column":39}},"26":{"start":{"line":44,"column":27},"end":{"line":44,"column":85}},"27":{"start":{"line":45,"column":27},"end":{"line":45,"column":85}},"28":{"start":{"line":46,"column":29},"end":{"line":46,"column":51}},"29":{"start":{"line":47,"column":29},"end":{"line":47,"column":51}},"30":{"start":{"line":48,"column":8},"end":{"line":53,"column":9}},"31":{"start":{"line":49,"column":12},"end":{"line":52,"column":16}},"32":{"start":{"line":54,"column":8},"end":{"line":55,"column":67}},"33":{"start":{"line":55,"column":12},"end":{"line":55,"column":67}},"34":{"start":{"line":58,"column":20},"end":{"line":58,"column":51}},"35":{"start":{"line":59,"column":28},"end":{"line":59,"column":33}},"36":{"start":{"line":60,"column":8},"end":{"line":67,"column":9}},"37":{"start":{"line":61,"column":12},"end":{"line":61,"column":57}},"38":{"start":{"line":63,"column":12},"end":{"line":63,"column":33}},"39":{"start":{"line":68,"column":8},"end":{"line":69,"column":96}},"40":{"start":{"line":69,"column":12},"end":{"line":69,"column":96}},"41":{"start":{"line":70,"column":8},"end":{"line":70,"column":73}},"42":{"start":{"line":71,"column":8},"end":{"line":71,"column":61}},"43":{"start":{"line":74,"column":0},"end":{"line":74,"column":38}},"44":{"start":{"line":75,"column":0},"end":{"line":75,"column":44}},"45":{"start":{"line":76,"column":0},"end":{"line":105,"column":3}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":30},"end":{"line":17,"column":5}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":55},"end":{"line":27,"column":5}},"line":18},"3":{"name":"(anonymous_3)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":54},"end":{"line":56,"column":5}},"line":28},"4":{"name":"(anonymous_4)","decl":{"start":{"line":57,"column":4},"end":{"line":57,"column":5}},"loc":{"start":{"line":57,"column":42},"end":{"line":72,"column":5}},"line":57}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":31,"column":8},"end":{"line":38,"column":9}},"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":38,"column":9}},{"start":{"line":31,"column":8},"end":{"line":38,"column":9}}],"line":31},"4":{"loc":{"start":{"line":33,"column":26},"end":{"line":34,"column":188}},"type":"binary-expr","locations":[{"start":{"line":33,"column":26},"end":{"line":33,"column":39}},{"start":{"line":34,"column":20},"end":{"line":34,"column":188}}],"line":33},"5":{"loc":{"start":{"line":48,"column":8},"end":{"line":53,"column":9}},"type":"if","locations":[{"start":{"line":48,"column":8},"end":{"line":53,"column":9}},{"start":{"line":48,"column":8},"end":{"line":53,"column":9}}],"line":48},"6":{"loc":{"start":{"line":48,"column":12},"end":{"line":48,"column":58}},"type":"binary-expr","locations":[{"start":{"line":48,"column":12},"end":{"line":48,"column":33}},{"start":{"line":48,"column":37},"end":{"line":48,"column":58}}],"line":48},"7":{"loc":{"start":{"line":54,"column":8},"end":{"line":55,"column":67}},"type":"if","locations":[{"start":{"line":54,"column":8},"end":{"line":55,"column":67}},{"start":{"line":54,"column":8},"end":{"line":55,"column":67}}],"line":54},"8":{"loc":{"start":{"line":68,"column":8},"end":{"line":69,"column":96}},"type":"if","locations":[{"start":{"line":68,"column":8},"end":{"line":69,"column":96}},{"start":{"line":68,"column":8},"end":{"line":69,"column":96}}],"line":68}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":3,"11":3,"12":21,"13":21,"14":21,"15":6,"16":6,"17":3,"18":21,"19":21,"20":21,"21":14,"22":14,"23":14,"24":14,"25":21,"26":21,"27":21,"28":21,"29":21,"30":21,"31":1,"32":21,"33":15,"34":6,"35":6,"36":6,"37":6,"38":1,"39":6,"40":1,"41":5,"42":4,"43":1,"44":1,"45":1},"f":{"0":1,"1":3,"2":21,"3":21,"4":6},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[14,7],"4":[14,14],"5":[1,20],"6":[21,2],"7":[15,6],"8":[1,5]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/user.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/createEntity/entities/user.ts"],"names":[],"mappings":"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","sourcesContent":["import Joi from 'joi';\nimport { Logger } from 'pino';\n\nimport {\n  Category,\n  ENTITY_ALREADY_EXISTS,\n  Errors,\n  MachineError,\n  OnboardingError,\n  Props,\n} from '../../../errors';\nimport { Entity, User as PbUser } from '../../../protos';\nimport { Entity as AppEntity } from '../../../types';\nimport { Context } from '../../../utils/context';\nimport {\n  JOI_VALIDATION_SETTINGS,\n  VALIDATION_RULES,\n} from '../../validationRules';\n\nexport class ValidatedUser {\n  public static entity = Entity.USER;\n\n  private constructor(public readonly user: PbUser, public logger: Logger) {}\n\n  public static async fromRequest(\n    req: PbUser,\n    logger: Logger,\n    path: string[],\n    props: Props\n  ): Promise<ValidatedUser> {\n    const log = logger.child({\n      ...props,\n      entity: this.entity,\n    });\n    const entity = req.toObject();\n    ValidatedUser.schemaValidation(entity, log, path, props);\n    const newLogger = log.child({\n      entityId: entity.externalUuid,\n    });\n    await ValidatedUser.entityValidation(entity, newLogger);\n    return new ValidatedUser(req, newLogger);\n  }\n\n  private static schemaValidation(\n    entity: PbUser.AsObject,\n    log: Logger,\n    path: string[],\n    props: Props\n  ): void {\n    const errors = new Map();\n    const { error } = userSchema.validate(entity, JOI_VALIDATION_SETTINGS);\n    if (error) {\n      for (const { path: p, message } of error.details) {\n        const e =\n          errors.get(p) ||\n          new OnboardingError(\n            MachineError.VALIDATION,\n            `${this.entity} failed validation`,\n            Category.REQUEST,\n            log,\n            [...path, ...p.map(toString)],\n            props\n          );\n        e.details.push(message);\n        errors.set(p, e);\n      }\n    }\n    // This is to validate the custom logic around requiring either\n    // - USERNAME + PHONE\n    // - USERNAME + EMAIL\n    // (or both). This can't be handled by JOI\n    const { email, phone } = entity;\n    const phoneRegex = new RegExp(VALIDATION_RULES.PHONE_REGEX);\n    const emailRegex = new RegExp(VALIDATION_RULES.EMAIL_REGEX);\n    const phoneIsValid = phoneRegex.exec(phone);\n    const emailIsValid = emailRegex.exec(email);\n    if (phoneIsValid === null && emailIsValid === null) {\n      errors.set(\n        'phone',\n        new OnboardingError(\n          MachineError.VALIDATION,\n          `${this.entity} failed validation`,\n          Category.REQUEST,\n          log,\n          ['$', 'user', '[email | phone]'],\n          {},\n          [\n            'Phone and Email are invalid, at least one of the two must be valid',\n            `Must provide a combination of either 'PHONE' + 'USERNAME' or 'EMAIL' + 'USERNAME'`,\n          ]\n        )\n      );\n    }\n    if (errors.size > 0) throw new Errors(Array.from(errors.values()));\n  }\n\n  private static async entityValidation(\n    e: PbUser.AsObject,\n    log: Logger\n  ): Promise<void> {\n    const ctx = Context.getInstance();\n    let alreadyExists = false;\n    try {\n      await ctx.userIdIsValid(e.externalUuid, log);\n      // If the user already exists, then we want to error and not add it\n      alreadyExists = true;\n    } catch (_) {\n      /* if the user id is NOT valid, then we want to add it */\n    }\n    if (alreadyExists)\n      throw ENTITY_ALREADY_EXISTS(e.externalUuid, AppEntity.USER, log);\n    await ctx.organizationIdIsValid(e.externalOrganizationUuid, log);\n    await ctx.schoolIdIsValid(e.externalSchoolUuid, log);\n  }\n}\n\nexport const userSchema = Joi.object({\n  externalUuid: Joi.string().guid({ version: ['uuidv4'] }),\n\n  externalOrganizationUuid: Joi.string()\n    .guid({ version: ['uuidv4'] })\n    .required(),\n\n  externalSchoolUuid: Joi.string()\n    .guid({ version: ['uuidv4'] })\n    .required(),\n\n  givenName: Joi.string()\n    .min(VALIDATION_RULES.USER_GIVEN_FAMILY_NAME_MIN_LENGTH)\n    .max(VALIDATION_RULES.USER_GIVEN_FAMILY_NAME_MAX_LENGTH)\n    .regex(VALIDATION_RULES.ALPHANUMERIC)\n    .required(),\n\n  familyName: Joi.string()\n    .min(VALIDATION_RULES.USER_GIVEN_FAMILY_NAME_MIN_LENGTH)\n    .max(VALIDATION_RULES.USER_GIVEN_FAMILY_NAME_MAX_LENGTH)\n    .regex(VALIDATION_RULES.ALPHANUMERIC)\n    .required(),\n\n  username: Joi.string()\n    .min(VALIDATION_RULES.USERNAME_MIN_LENGTH)\n    .max(VALIDATION_RULES.USERNAME_MAX_LENGTH)\n    .alphanum()\n    .required(),\n\n  // Due to niche rules, need to validate in ValidationWrapper.validate\n  email: Joi.any(),\n  phone: Joi.any(),\n\n  dateOfBirth: Joi.date().max('now'),\n\n  // 0 = Male, 1 = Female\n  gender: Joi.number().min(0).max(1).required(),\n});\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b261486658e08f7452539059795a34f5d948dffd"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/linkEntities.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/linkEntities.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":12},"end":{"line":4,"column":28}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":37}},"4":{"start":{"line":6,"column":17},"end":{"line":6,"column":44}},"5":{"start":{"line":7,"column":18},"end":{"line":7,"column":45}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":40}},"7":{"start":{"line":10,"column":20},"end":{"line":10,"column":40}},"8":{"start":{"line":11,"column":4},"end":{"line":12,"column":120}},"9":{"start":{"line":12,"column":8},"end":{"line":12,"column":120}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":30}},"11":{"start":{"line":14,"column":17},"end":{"line":14,"column":77}},"12":{"start":{"line":15,"column":55},"end":{"line":15,"column":95}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":41}},"14":{"start":{"line":17,"column":4},"end":{"line":17,"column":45}},"15":{"start":{"line":18,"column":22},"end":{"line":18,"column":43}},"16":{"start":{"line":19,"column":39},"end":{"line":19,"column":232}},"17":{"start":{"line":20,"column":4},"end":{"line":20,"column":41}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":40}},"19":{"start":{"line":22,"column":4},"end":{"line":22,"column":56}},"20":{"start":{"line":24,"column":0},"end":{"line":24,"column":46}},"21":{"start":{"line":29,"column":16},"end":{"line":29,"column":47}},"22":{"start":{"line":30,"column":4},"end":{"line":76,"column":5}},"23":{"start":{"line":32,"column":12},"end":{"line":32,"column":52}},"24":{"start":{"line":33,"column":12},"end":{"line":33,"column":51}},"25":{"start":{"line":34,"column":12},"end":{"line":37,"column":33}},"26":{"start":{"line":38,"column":12},"end":{"line":38,"column":65}},"27":{"start":{"line":39,"column":12},"end":{"line":40,"column":259}},"28":{"start":{"line":40,"column":16},"end":{"line":40,"column":259}},"29":{"start":{"line":41,"column":12},"end":{"line":41,"column":18}},"30":{"start":{"line":44,"column":12},"end":{"line":44,"column":46}},"31":{"start":{"line":45,"column":12},"end":{"line":45,"column":45}},"32":{"start":{"line":46,"column":12},"end":{"line":49,"column":33}},"33":{"start":{"line":50,"column":12},"end":{"line":50,"column":59}},"34":{"start":{"line":51,"column":12},"end":{"line":51,"column":18}},"35":{"start":{"line":54,"column":12},"end":{"line":54,"column":45}},"36":{"start":{"line":55,"column":12},"end":{"line":55,"column":44}},"37":{"start":{"line":56,"column":12},"end":{"line":59,"column":33}},"38":{"start":{"line":60,"column":12},"end":{"line":60,"column":58}},"39":{"start":{"line":61,"column":12},"end":{"line":61,"column":18}},"40":{"start":{"line":64,"column":12},"end":{"line":64,"column":44}},"41":{"start":{"line":65,"column":12},"end":{"line":65,"column":43}},"42":{"start":{"line":66,"column":12},"end":{"line":69,"column":33}},"43":{"start":{"line":70,"column":12},"end":{"line":70,"column":57}},"44":{"start":{"line":71,"column":12},"end":{"line":71,"column":18}},"45":{"start":{"line":74,"column":12},"end":{"line":75,"column":49}},"46":{"start":{"line":77,"column":4},"end":{"line":77,"column":54}},"47":{"start":{"line":80,"column":54},"end":{"line":80,"column":69}},"48":{"start":{"line":81,"column":16},"end":{"line":81,"column":47}},"49":{"start":{"line":83,"column":4},"end":{"line":128,"column":5}},"50":{"start":{"line":86,"column":12},"end":{"line":88,"column":13}},"51":{"start":{"line":87,"column":16},"end":{"line":87,"column":57}},"52":{"start":{"line":89,"column":12},"end":{"line":89,"column":40}},"53":{"start":{"line":90,"column":12},"end":{"line":90,"column":18}},"54":{"start":{"line":94,"column":12},"end":{"line":96,"column":13}},"55":{"start":{"line":95,"column":16},"end":{"line":95,"column":51}},"56":{"start":{"line":97,"column":12},"end":{"line":97,"column":34}},"57":{"start":{"line":98,"column":12},"end":{"line":98,"column":18}},"58":{"start":{"line":102,"column":12},"end":{"line":104,"column":13}},"59":{"start":{"line":103,"column":16},"end":{"line":103,"column":50}},"60":{"start":{"line":105,"column":12},"end":{"line":105,"column":33}},"61":{"start":{"line":106,"column":12},"end":{"line":106,"column":18}},"62":{"start":{"line":110,"column":12},"end":{"line":112,"column":13}},"63":{"start":{"line":111,"column":16},"end":{"line":111,"column":49}},"64":{"start":{"line":113,"column":12},"end":{"line":113,"column":32}},"65":{"start":{"line":114,"column":12},"end":{"line":114,"column":18}},"66":{"start":{"line":117,"column":12},"end":{"line":117,"column":151}},"67":{"start":{"line":118,"column":12},"end":{"line":118,"column":35}},"68":{"start":{"line":119,"column":12},"end":{"line":119,"column":18}},"69":{"start":{"line":122,"column":12},"end":{"line":122,"column":79}},"70":{"start":{"line":123,"column":12},"end":{"line":123,"column":32}},"71":{"start":{"line":124,"column":12},"end":{"line":124,"column":18}},"72":{"start":{"line":127,"column":12},"end":{"line":127,"column":108}},"73":{"start":{"line":129,"column":4},"end":{"line":132,"column":6}}},"fnMap":{"0":{"name":"parseLinkEntities","decl":{"start":{"line":8,"column":15},"end":{"line":8,"column":32}},"loc":{"start":{"line":8,"column":50},"end":{"line":23,"column":1}},"line":8},"1":{"name":"parseTargetEntity","decl":{"start":{"line":25,"column":15},"end":{"line":25,"column":32}},"loc":{"start":{"line":25,"column":50},"end":{"line":78,"column":1}},"line":25},"2":{"name":"parseEntitiesToLink","decl":{"start":{"line":79,"column":15},"end":{"line":79,"column":34}},"loc":{"start":{"line":79,"column":68},"end":{"line":133,"column":1}},"line":79}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":4},"end":{"line":12,"column":120}},"type":"if","locations":[{"start":{"line":11,"column":4},"end":{"line":12,"column":120}},{"start":{"line":11,"column":4},"end":{"line":12,"column":120}}],"line":11},"1":{"loc":{"start":{"line":30,"column":4},"end":{"line":76,"column":5}},"type":"switch","locations":[{"start":{"line":31,"column":8},"end":{"line":42,"column":9}},{"start":{"line":43,"column":8},"end":{"line":52,"column":9}},{"start":{"line":53,"column":8},"end":{"line":62,"column":9}},{"start":{"line":63,"column":8},"end":{"line":72,"column":9}},{"start":{"line":73,"column":8},"end":{"line":75,"column":49}}],"line":30},"2":{"loc":{"start":{"line":39,"column":12},"end":{"line":40,"column":259}},"type":"if","locations":[{"start":{"line":39,"column":12},"end":{"line":40,"column":259}},{"start":{"line":39,"column":12},"end":{"line":40,"column":259}}],"line":39},"3":{"loc":{"start":{"line":83,"column":4},"end":{"line":128,"column":5}},"type":"switch","locations":[{"start":{"line":84,"column":8},"end":{"line":91,"column":9}},{"start":{"line":92,"column":8},"end":{"line":99,"column":9}},{"start":{"line":100,"column":8},"end":{"line":107,"column":9}},{"start":{"line":108,"column":8},"end":{"line":115,"column":9}},{"start":{"line":116,"column":8},"end":{"line":120,"column":9}},{"start":{"line":121,"column":8},"end":{"line":125,"column":9}},{"start":{"line":126,"column":8},"end":{"line":127,"column":108}}],"line":83},"4":{"loc":{"start":{"line":117,"column":82},"end":{"line":117,"column":149}},"type":"cond-expr","locations":[{"start":{"line":117,"column":121},"end":{"line":117,"column":137}},{"start":{"line":117,"column":140},"end":{"line":117,"column":149}}],"line":117}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0],"1":[0,0,0,0,0],"2":[0,0],"3":[0,0,0,0,0,0,0],"4":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/linkEntities.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/validation/linkEntities.ts"],"names":[],"mappings":"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","sourcesContent":["import { Logger } from 'pino';\n\nimport { Entity, ExternalUuid, Uuid } from '../..';\nimport {\n  BAD_REQUEST,\n  BASE_PATH,\n  Category,\n  MachineError,\n  OnboardingError,\n  Props,\n  tryGetMember,\n} from '../errors';\nimport {\n  EntitiesToLink,\n  LinkEntities,\n  OnboardingRequest,\n  Entity as PbEntity,\n} from '../protos/api_pb';\nimport { Context } from '../utils/context';\n\nexport type LinkEntitiesRequest = {\n  primary: LinkEntity;\n  secondary: LinkEntity;\n};\n\nexport type LinkEntity = {\n  entity: Entity;\n  identifier: string | Uuid;\n};\n\nexport async function parseLinkEntities(\n  req: OnboardingRequest,\n  log: Logger,\n  props: Props\n): Promise<[PbEntity, ExternalUuid, Logger]> {\n  const path = [...BASE_PATH];\n  const payload = req.getPayloadCase();\n  if (payload !== OnboardingRequest.PayloadCase.LINK_ENTITIES)\n    throw BAD_REQUEST(\n      `If Action is of type 'LINK', payload must be 'LinkEntites'`,\n      path,\n      log,\n      props\n    );\n\n  path.push('linkEntities');\n  const body = tryGetMember(req.getLinkEntities(), log, path);\n  const { pbEntity, targetEntity, targetEntityId } = await parseTargetEntity(\n    body,\n    log,\n    path\n  );\n\n  props['targetEntity'] = targetEntity;\n  props['targetEntityId'] = targetEntityId;\n\n  const childPath = [...path, 'entities'];\n  const { childEntites, childIds } = await parseEntitiesToLink(\n    body.getExternalOrganizationUuid(),\n    tryGetMember(body.getEntities(), log, childPath),\n    { entity: targetEntity, targetId: targetEntityId },\n    log,\n    childPath\n  );\n\n  props['entityToLink'] = childEntites;\n  props['entityIdsToLink'] = childIds;\n\n  return [pbEntity, targetEntityId, log.child(props)];\n}\n\nasync function parseTargetEntity(\n  body: LinkEntities,\n  log: Logger,\n  path: string[]\n): Promise<{\n  pbEntity: PbEntity;\n  targetEntity: Entity;\n  targetEntityId: ExternalUuid;\n}> {\n  let pbEntity: PbEntity;\n  let targetEntity: Entity;\n  let targetEntityId: ExternalUuid;\n  const ctx = Context.getInstance();\n  switch (body.getTargetCase()) {\n    case LinkEntities.TargetCase.ORGANIZATION: {\n      pbEntity = PbEntity.ORGANIZATION;\n      targetEntity = Entity.ORGANIZATION;\n      targetEntityId = tryGetMember(body.getOrganization(), log, [\n        ...path,\n        'organization',\n      ]).getExternalUuid();\n      await ctx.organizationIdIsValid(targetEntityId, log);\n      if (body.getExternalOrganizationUuid() !== targetEntity)\n        throw new OnboardingError(\n          MachineError.REQUEST,\n          `Found that the Organization ID provided and the entity identifier provided did not match despite the entity being set to 'ORGANIZATION'`,\n          Category.REQUEST,\n          log,\n          path\n        );\n      break;\n    }\n    case LinkEntities.TargetCase.SCHOOL: {\n      pbEntity = PbEntity.SCHOOL;\n      targetEntity = Entity.SCHOOL;\n      targetEntityId = tryGetMember(body.getSchool(), log, [\n        ...path,\n        'school',\n      ]).getExternalUuid();\n      await ctx.schoolIdIsValid(targetEntityId, log);\n      break;\n    }\n    case LinkEntities.TargetCase.CLASS: {\n      pbEntity = PbEntity.CLASS;\n      targetEntity = Entity.CLASS;\n      targetEntityId = tryGetMember(body.getClass(), log, [\n        ...path,\n        'class',\n      ]).getExternalUuid();\n      await ctx.classIdIsValid(targetEntityId, log);\n      break;\n    }\n    case LinkEntities.TargetCase.USER: {\n      pbEntity = PbEntity.USER;\n      targetEntity = Entity.USER;\n      targetEntityId = tryGetMember(body.getUser(), log, [\n        ...path,\n        'user',\n      ]).getExternalUuid();\n      await ctx.userIdIsValid(targetEntityId, log);\n      break;\n    }\n    default:\n      throw BAD_REQUEST(\n        `A request to LinkEntites must include either an 'ORGANIZATION',\n        'SCHOOL', 'CLASS' or 'USER'`,\n        path,\n        log\n      );\n  }\n  return { pbEntity, targetEntity, targetEntityId };\n}\n\nasync function parseEntitiesToLink(\n  orgId: ExternalUuid,\n  body: EntitiesToLink,\n  targets: { entity: Entity; targetId: ExternalUuid },\n  log: Logger,\n  path: string[]\n): Promise<{\n  childEntites: Entity;\n  childIds: ExternalUuid[];\n}> {\n  const { externalEntityIdentifiersList, entity } = body.toObject();\n  const ctx = Context.getInstance();\n  let e: Entity;\n  switch (entity) {\n    case PbEntity.ORGANIZATION: {\n      // @TODO - Create Find Many Queries\n      for (const id of externalEntityIdentifiersList) {\n        await ctx.organizationIdIsValid(id, log);\n      }\n      e = Entity.ORGANIZATION;\n      break;\n    }\n    case PbEntity.SCHOOL: {\n      // @TODO - Create Find Many Queries\n      for (const id of externalEntityIdentifiersList) {\n        await ctx.schoolIdIsValid(id, log);\n      }\n      e = Entity.SCHOOL;\n      break;\n    }\n    case PbEntity.CLASS: {\n      // @TODO - Create Find Many Queries\n      for (const id of externalEntityIdentifiersList) {\n        await ctx.classIdIsValid(id, log);\n      }\n      e = Entity.CLASS;\n      break;\n    }\n    case PbEntity.USER: {\n      // @TODO - Create Find Many Queries\n      for (const id of externalEntityIdentifiersList) {\n        await ctx.userIdIsValid(id, log);\n      }\n      e = Entity.USER;\n      break;\n    }\n    case PbEntity.PROGRAM: {\n      await ctx.programsAreValid(\n        externalEntityIdentifiersList,\n        orgId,\n        log,\n        targets.entity === Entity.SCHOOL ? targets.targetId : undefined\n      );\n      e = Entity.PROGRAM;\n      break;\n    }\n    case PbEntity.ROLE: {\n      await ctx.rolesAreValid(externalEntityIdentifiersList, orgId, log);\n      e = Entity.ROLE;\n      break;\n    }\n    default:\n      throw BAD_REQUEST(\n        `'ENTITY' must be set when trying to link entities`,\n        path,\n        log\n      );\n  }\n  return {\n    childEntites: e,\n    childIds: externalEntityIdentifiersList,\n  };\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b0c7403d975cb9c80f80dec87389826aa397315a"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/serde.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/serde.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":12},"end":{"line":4,"column":28}},"3":{"start":{"line":7,"column":8},"end":{"line":16,"column":9}},"4":{"start":{"line":8,"column":26},"end":{"line":8,"column":48}},"5":{"start":{"line":9,"column":12},"end":{"line":9,"column":25}},"6":{"start":{"line":12,"column":24},"end":{"line":14,"column":56}},"7":{"start":{"line":15,"column":12},"end":{"line":15,"column":99}},"8":{"start":{"line":19,"column":0},"end":{"line":19,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":32},"end":{"line":17,"column":5}},"line":6}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":24},"end":{"line":14,"column":56}},"type":"cond-expr","locations":[{"start":{"line":13,"column":18},"end":{"line":13,"column":31}},{"start":{"line":14,"column":18},"end":{"line":14,"column":56}}],"line":12}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1},"f":{"0":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/serde.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/serde.ts"],"names":[],"mappings":";;;AAGA,6BAAgE;AAEhE,MAAa,KAAK;IACT,MAAM,CAAC,SAAS,CAAoB,IAAO,EAAE,GAAW;QAC7D,IAAI;YACF,MAAM,KAAK,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;YACrC,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,KAAK,EAAE;YACd,MAAM,GAAG,GACP,KAAK,YAAY,KAAK;gBACpB,CAAC,CAAC,KAAK,CAAC,OAAO;gBACf,CAAC,CAAC,sCAAsC,CAAC;YAC7C,MAAM,IAAI,mBAAe,CACvB,gBAAY,CAAC,KAAK,EAClB,GAAG,EACH,YAAQ,CAAC,QAAQ,EACjB,GAAG,CACJ,CAAC;SACH;IACH,CAAC;CACF;AAlBD,sBAkBC","sourcesContent":["import { Message } from 'google-protobuf';\nimport { Logger } from 'pino';\n\nimport { Category, MachineError, OnboardingError } from '../..';\n\nexport class Serde {\n  public static serialize<T extends Message>(data: T, log: Logger): Uint8Array {\n    try {\n      const bytes = data.serializeBinary();\n      return bytes;\n    } catch (error) {\n      const msg =\n        error instanceof Error\n          ? error.message\n          : 'Failed to serialize protobuf message';\n      throw new OnboardingError(\n        MachineError.SERDE,\n        msg,\n        Category.PROTOBUF,\n        log\n      );\n    }\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f4c79d9c4edff8985369609fc2a5bc433c2a7291"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/parseRequestForMetadata.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/parseRequestForMetadata.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":51}},"2":{"start":{"line":4,"column":12},"end":{"line":4,"column":28}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":37}},"4":{"start":{"line":8,"column":17},"end":{"line":8,"column":35}},"5":{"start":{"line":9,"column":21},"end":{"line":9,"column":30}},"6":{"start":{"line":10,"column":19},"end":{"line":10,"column":32}},"7":{"start":{"line":11,"column":4},"end":{"line":58,"column":5}},"8":{"start":{"line":13,"column":12},"end":{"line":13,"column":45}},"9":{"start":{"line":14,"column":12},"end":{"line":14,"column":110}},"10":{"start":{"line":15,"column":12},"end":{"line":15,"column":18}},"11":{"start":{"line":18,"column":12},"end":{"line":18,"column":39}},"12":{"start":{"line":19,"column":12},"end":{"line":19,"column":110}},"13":{"start":{"line":20,"column":12},"end":{"line":20,"column":18}},"14":{"start":{"line":23,"column":12},"end":{"line":23,"column":38}},"15":{"start":{"line":24,"column":12},"end":{"line":24,"column":110}},"16":{"start":{"line":25,"column":12},"end":{"line":25,"column":18}},"17":{"start":{"line":28,"column":12},"end":{"line":28,"column":37}},"18":{"start":{"line":29,"column":12},"end":{"line":29,"column":110}},"19":{"start":{"line":30,"column":12},"end":{"line":30,"column":18}},"20":{"start":{"line":33,"column":33},"end":{"line":33,"column":52}},"21":{"start":{"line":34,"column":12},"end":{"line":55,"column":13}},"22":{"start":{"line":36,"column":20},"end":{"line":36,"column":53}},"23":{"start":{"line":37,"column":20},"end":{"line":37,"column":129}},"24":{"start":{"line":38,"column":20},"end":{"line":38,"column":26}},"25":{"start":{"line":41,"column":20},"end":{"line":41,"column":47}},"26":{"start":{"line":42,"column":20},"end":{"line":42,"column":123}},"27":{"start":{"line":43,"column":20},"end":{"line":43,"column":26}},"28":{"start":{"line":46,"column":20},"end":{"line":46,"column":46}},"29":{"start":{"line":47,"column":20},"end":{"line":47,"column":122}},"30":{"start":{"line":48,"column":20},"end":{"line":48,"column":26}},"31":{"start":{"line":51,"column":20},"end":{"line":51,"column":45}},"32":{"start":{"line":52,"column":20},"end":{"line":52,"column":121}},"33":{"start":{"line":53,"column":20},"end":{"line":53,"column":26}},"34":{"start":{"line":56,"column":12},"end":{"line":56,"column":18}},"35":{"start":{"line":59,"column":4},"end":{"line":59,"column":67}},"36":{"start":{"line":61,"column":0},"end":{"line":61,"column":78}}},"fnMap":{"0":{"name":"parseOnboardingRequestForMetadata","decl":{"start":{"line":6,"column":9},"end":{"line":6,"column":42}},"loc":{"start":{"line":6,"column":46},"end":{"line":60,"column":1}},"line":6}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":4},"end":{"line":58,"column":5}},"type":"switch","locations":[{"start":{"line":12,"column":8},"end":{"line":16,"column":9}},{"start":{"line":17,"column":8},"end":{"line":21,"column":9}},{"start":{"line":22,"column":8},"end":{"line":26,"column":9}},{"start":{"line":27,"column":8},"end":{"line":31,"column":9}},{"start":{"line":32,"column":8},"end":{"line":57,"column":9}}],"line":11},"1":{"loc":{"start":{"line":14,"column":25},"end":{"line":14,"column":109}},"type":"cond-expr","locations":[{"start":{"line":14,"column":80},"end":{"line":14,"column":86}},{"start":{"line":14,"column":89},"end":{"line":14,"column":109}}],"line":14},"2":{"loc":{"start":{"line":14,"column":25},"end":{"line":14,"column":77}},"type":"binary-expr","locations":[{"start":{"line":14,"column":25},"end":{"line":14,"column":60}},{"start":{"line":14,"column":64},"end":{"line":14,"column":77}}],"line":14},"3":{"loc":{"start":{"line":19,"column":25},"end":{"line":19,"column":109}},"type":"cond-expr","locations":[{"start":{"line":19,"column":80},"end":{"line":19,"column":86}},{"start":{"line":19,"column":89},"end":{"line":19,"column":109}}],"line":19},"4":{"loc":{"start":{"line":19,"column":25},"end":{"line":19,"column":77}},"type":"binary-expr","locations":[{"start":{"line":19,"column":25},"end":{"line":19,"column":60}},{"start":{"line":19,"column":64},"end":{"line":19,"column":77}}],"line":19},"5":{"loc":{"start":{"line":24,"column":25},"end":{"line":24,"column":109}},"type":"cond-expr","locations":[{"start":{"line":24,"column":80},"end":{"line":24,"column":86}},{"start":{"line":24,"column":89},"end":{"line":24,"column":109}}],"line":24},"6":{"loc":{"start":{"line":24,"column":25},"end":{"line":24,"column":77}},"type":"binary-expr","locations":[{"start":{"line":24,"column":25},"end":{"line":24,"column":60}},{"start":{"line":24,"column":64},"end":{"line":24,"column":77}}],"line":24},"7":{"loc":{"start":{"line":29,"column":25},"end":{"line":29,"column":109}},"type":"cond-expr","locations":[{"start":{"line":29,"column":80},"end":{"line":29,"column":86}},{"start":{"line":29,"column":89},"end":{"line":29,"column":109}}],"line":29},"8":{"loc":{"start":{"line":29,"column":25},"end":{"line":29,"column":77}},"type":"binary-expr","locations":[{"start":{"line":29,"column":25},"end":{"line":29,"column":60}},{"start":{"line":29,"column":64},"end":{"line":29,"column":77}}],"line":29},"9":{"loc":{"start":{"line":34,"column":12},"end":{"line":55,"column":13}},"type":"switch","locations":[{"start":{"line":35,"column":16},"end":{"line":39,"column":17}},{"start":{"line":40,"column":16},"end":{"line":44,"column":17}},{"start":{"line":45,"column":16},"end":{"line":49,"column":17}},{"start":{"line":50,"column":16},"end":{"line":54,"column":17}}],"line":34},"10":{"loc":{"start":{"line":34,"column":20},"end":{"line":34,"column":108}},"type":"cond-expr","locations":[{"start":{"line":34,"column":71},"end":{"line":34,"column":77}},{"start":{"line":34,"column":80},"end":{"line":34,"column":108}}],"line":34},"11":{"loc":{"start":{"line":34,"column":20},"end":{"line":34,"column":68}},"type":"binary-expr","locations":[{"start":{"line":34,"column":20},"end":{"line":34,"column":41}},{"start":{"line":34,"column":45},"end":{"line":34,"column":68}}],"line":34},"12":{"loc":{"start":{"line":37,"column":33},"end":{"line":37,"column":128}},"type":"cond-expr","locations":[{"start":{"line":37,"column":99},"end":{"line":37,"column":105}},{"start":{"line":37,"column":108},"end":{"line":37,"column":128}}],"line":37},"13":{"loc":{"start":{"line":37,"column":33},"end":{"line":37,"column":96}},"type":"binary-expr","locations":[{"start":{"line":37,"column":33},"end":{"line":37,"column":79}},{"start":{"line":37,"column":83},"end":{"line":37,"column":96}}],"line":37},"14":{"loc":{"start":{"line":42,"column":33},"end":{"line":42,"column":122}},"type":"cond-expr","locations":[{"start":{"line":42,"column":93},"end":{"line":42,"column":99}},{"start":{"line":42,"column":102},"end":{"line":42,"column":122}}],"line":42},"15":{"loc":{"start":{"line":42,"column":33},"end":{"line":42,"column":90}},"type":"binary-expr","locations":[{"start":{"line":42,"column":33},"end":{"line":42,"column":73}},{"start":{"line":42,"column":77},"end":{"line":42,"column":90}}],"line":42},"16":{"loc":{"start":{"line":47,"column":33},"end":{"line":47,"column":121}},"type":"cond-expr","locations":[{"start":{"line":47,"column":92},"end":{"line":47,"column":98}},{"start":{"line":47,"column":101},"end":{"line":47,"column":121}}],"line":47},"17":{"loc":{"start":{"line":47,"column":33},"end":{"line":47,"column":89}},"type":"binary-expr","locations":[{"start":{"line":47,"column":33},"end":{"line":47,"column":72}},{"start":{"line":47,"column":76},"end":{"line":47,"column":89}}],"line":47},"18":{"loc":{"start":{"line":52,"column":33},"end":{"line":52,"column":120}},"type":"cond-expr","locations":[{"start":{"line":52,"column":91},"end":{"line":52,"column":97}},{"start":{"line":52,"column":100},"end":{"line":52,"column":120}}],"line":52},"19":{"loc":{"start":{"line":52,"column":33},"end":{"line":52,"column":88}},"type":"binary-expr","locations":[{"start":{"line":52,"column":33},"end":{"line":52,"column":71}},{"start":{"line":52,"column":75},"end":{"line":52,"column":88}}],"line":52},"20":{"loc":{"start":{"line":59,"column":33},"end":{"line":59,"column":56}},"type":"binary-expr","locations":[{"start":{"line":59,"column":33},"end":{"line":59,"column":43}},{"start":{"line":59,"column":47},"end":{"line":59,"column":56}}],"line":59}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1},"f":{"0":0},"b":{"0":[0,0,0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/parseRequestForMetadata.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/utils/parseRequestForMetadata.ts"],"names":[],"mappings":";;;AAAA,6BAA+B;AAC/B,sCAAoE;AAQpE,SAAgB,iCAAiC,CAC/C,CAAoB;;IAEpB,IAAI,MAAM,GAAG,UAAM,CAAC,OAAO,CAAC;IAC5B,IAAI,UAAU,GAAuB,SAAS,CAAC;IAC/C,MAAM,MAAM,GAAG,CAAC,CAAC,SAAS,EAAE,CAAC;IAC7B,QAAQ,CAAC,CAAC,cAAc,EAAE,EAAE;QAC1B,KAAK,0BAAiB,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;YAC/C,MAAM,GAAG,UAAM,CAAC,YAAY,CAAC;YAC7B,UAAU,GAAG,MAAA,CAAC,CAAC,eAAe,EAAE,0CAAE,eAAe,EAAE,CAAC;YACpD,MAAM;SACP;QACD,KAAK,0BAAiB,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;YACzC,MAAM,GAAG,UAAM,CAAC,MAAM,CAAC;YACvB,UAAU,GAAG,MAAA,CAAC,CAAC,eAAe,EAAE,0CAAE,eAAe,EAAE,CAAC;YACpD,MAAM;SACP;QACD,KAAK,0BAAiB,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YACxC,MAAM,GAAG,UAAM,CAAC,KAAK,CAAC;YACtB,UAAU,GAAG,MAAA,CAAC,CAAC,eAAe,EAAE,0CAAE,eAAe,EAAE,CAAC;YACpD,MAAM;SACP;QACD,KAAK,0BAAiB,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YACvC,MAAM,GAAG,UAAM,CAAC,IAAI,CAAC;YACrB,UAAU,GAAG,MAAA,CAAC,CAAC,eAAe,EAAE,0CAAE,eAAe,EAAE,CAAC;YACpD,MAAM;SACP;QACD,KAAK,0BAAiB,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;YAChD,MAAM,YAAY,GAAG,CAAC,CAAC,eAAe,EAAE,CAAC;YACzC,QAAQ,YAAY,aAAZ,YAAY,uBAAZ,YAAY,CAAE,aAAa,EAAE,EAAE;gBACrC,KAAK,qBAAY,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;oBACzC,MAAM,GAAG,UAAM,CAAC,YAAY,CAAC;oBAC7B,UAAU,GAAG,MAAA,YAAY,CAAC,eAAe,EAAE,0CAAE,eAAe,EAAE,CAAC;oBAC/D,MAAM;iBACP;gBACD,KAAK,qBAAY,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;oBACnC,MAAM,GAAG,UAAM,CAAC,MAAM,CAAC;oBACvB,UAAU,GAAG,MAAA,YAAY,CAAC,SAAS,EAAE,0CAAE,eAAe,EAAE,CAAC;oBACzD,MAAM;iBACP;gBACD,KAAK,qBAAY,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;oBAClC,MAAM,GAAG,UAAM,CAAC,KAAK,CAAC;oBACtB,UAAU,GAAG,MAAA,YAAY,CAAC,QAAQ,EAAE,0CAAE,eAAe,EAAE,CAAC;oBACxD,MAAM;iBACP;gBACD,KAAK,qBAAY,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;oBACjC,MAAM,GAAG,UAAM,CAAC,IAAI,CAAC;oBACrB,UAAU,GAAG,MAAA,YAAY,CAAC,OAAO,EAAE,0CAAE,eAAe,EAAE,CAAC;oBACvD,MAAM;iBACP;aACF;YACD,MAAM;SACP;KACF;IACD,OAAO,EAAE,MAAM,EAAE,UAAU,EAAE,UAAU,IAAI,SAAS,EAAE,MAAM,EAAE,CAAC;AACjE,CAAC;AAvDD,8EAuDC","sourcesContent":["import { Entity } from '../..';\nimport { Action, LinkEntities, OnboardingRequest } from '../protos';\n\ntype Metadata = {\n  entity: Entity;\n  identifier: string;\n  action: Action;\n};\n\nexport function parseOnboardingRequestForMetadata(\n  r: OnboardingRequest\n): Metadata {\n  let entity = Entity.UNKNOWN;\n  let identifier: string | undefined = 'UNKNOWN';\n  const action = r.getAction();\n  switch (r.getPayloadCase()) {\n    case OnboardingRequest.PayloadCase.ORGANIZATION: {\n      entity = Entity.ORGANIZATION;\n      identifier = r.getOrganization()?.getExternalUuid();\n      break;\n    }\n    case OnboardingRequest.PayloadCase.SCHOOL: {\n      entity = Entity.SCHOOL;\n      identifier = r.getOrganization()?.getExternalUuid();\n      break;\n    }\n    case OnboardingRequest.PayloadCase.CLASS: {\n      entity = Entity.CLASS;\n      identifier = r.getOrganization()?.getExternalUuid();\n      break;\n    }\n    case OnboardingRequest.PayloadCase.USER: {\n      entity = Entity.USER;\n      identifier = r.getOrganization()?.getExternalUuid();\n      break;\n    }\n    case OnboardingRequest.PayloadCase.LINK_ENTITIES: {\n      const linkEntities = r.getLinkEntities();\n      switch (linkEntities?.getTargetCase()) {\n        case LinkEntities.TargetCase.ORGANIZATION: {\n          entity = Entity.ORGANIZATION;\n          identifier = linkEntities.getOrganization()?.getExternalUuid();\n          break;\n        }\n        case LinkEntities.TargetCase.SCHOOL: {\n          entity = Entity.SCHOOL;\n          identifier = linkEntities.getSchool()?.getExternalUuid();\n          break;\n        }\n        case LinkEntities.TargetCase.CLASS: {\n          entity = Entity.CLASS;\n          identifier = linkEntities.getClass()?.getExternalUuid();\n          break;\n        }\n        case LinkEntities.TargetCase.USER: {\n          entity = Entity.USER;\n          identifier = linkEntities.getUser()?.getExternalUuid();\n          break;\n        }\n      }\n      break;\n    }\n  }\n  return { entity, identifier: identifier || 'UNKNOWN', action };\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3448d2b6bfd68de76ef8c96d0dc685e6efcd73ba"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/adminService/organization.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/adminService/organization.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":45}},"3":{"start":{"line":5,"column":0},"end":{"line":32,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/adminService/organization.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/adminService/organization.ts"],"names":[],"mappings":";;;AAAA,8CAA0C;AAE7B,QAAA,gBAAgB,GAAG,IAAA,UAAG,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;CA2BlC,CAAC","sourcesContent":["import { gql } from '@apollo/client/core';\n\nexport const GET_ORGANIZATION = gql`\n  query getOrganization($count: PageSize, $cursor: String, $orgName: String!) {\n    organizationsConnection(\n      direction: FORWARD\n      directionArgs: { count: $count, cursor: $cursor }\n      filter: {\n        AND: [\n          { status: { operator: eq, value: \"active\" } }\n          { name: { operator: eq, value: $orgName } }\n        ]\n      }\n    ) {\n      totalCount\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n  }\n`;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9a72db1ccd2fcf5ee3f7eb5fd2107f5adc26c531"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/adminService/programs.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/adminService/programs.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":76}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":45}},"3":{"start":{"line":5,"column":0},"end":{"line":32,"column":2}},"4":{"start":{"line":33,"column":0},"end":{"line":64,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/adminService/programs.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/adminService/programs.ts"],"names":[],"mappings":";;;AAAA,8CAA0C;AAE7B,QAAA,mBAAmB,GAAG,IAAA,UAAG,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;CA2BrC,CAAC;AAEW,QAAA,4BAA4B,GAAG,IAAA,UAAG,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA+B9C,CAAC","sourcesContent":["import { gql } from '@apollo/client/core';\n\nexport const GET_SYSTEM_PROGRAMS = gql`\n  query getSystemPrograms($count: PageSize, $cursor: String) {\n    programsConnection(\n      direction: FORWARD\n      directionArgs: { count: $count, cursor: $cursor }\n      filter: {\n        AND: [\n          { status: { operator: eq, value: \"active\" } }\n          { system: { operator: eq, value: true } }\n        ]\n      }\n    ) {\n      totalCount\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n  }\n`;\n\nexport const GET_PROGRAMS_BY_ORGANIZATION = gql`\n  query getProgramsByOrganization(\n    $count: PageSize\n    $cursor: String\n    $orgId: UUID!\n  ) {\n    programsConnection(\n      direction: FORWARD\n      directionArgs: { count: $count, cursor: $cursor }\n      filter: {\n        AND: [\n          { status: { operator: eq, value: \"active\" } }\n          { organizationId: { operator: eq, value: $orgId } }\n        ]\n      }\n    ) {\n      totalCount\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n  }\n`;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e1ca864de58c6ecd06f844fb53207848b5941da0"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/adminService/roles.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/adminService/roles.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":67}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":45}},"3":{"start":{"line":5,"column":0},"end":{"line":32,"column":2}},"4":{"start":{"line":33,"column":0},"end":{"line":62,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/adminService/roles.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/adminService/roles.ts"],"names":[],"mappings":";;;AAAA,8CAA0C;AAE7B,QAAA,gBAAgB,GAAG,IAAA,UAAG,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;CA2BlC,CAAC;AAEW,QAAA,sBAAsB,GAAG,IAAA,UAAG,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA6BxC,CAAC","sourcesContent":["import { gql } from '@apollo/client/core';\n\nexport const GET_SYSTEM_ROLES = gql`\n  query getSystemRoles($count: PageSize, $cursor: String) {\n    rolesConnection(\n      direction: FORWARD\n      directionArgs: { count: $count, cursor: $cursor }\n      filter: {\n        AND: [\n          { status: { operator: eq, value: \"active\" } }\n          { system: { operator: eq, value: true } }\n        ]\n      }\n    ) {\n      totalCount\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n  }\n`;\n\nexport const GET_ORGANIZATION_ROLES = gql`\n  query getRoles($count: PageSize, $cursor: String, $orgId: UUID!) {\n    rolesConnection(\n      direction: FORWARD\n      directionArgs: { count: $count, cursor: $cursor }\n      filter: {\n        AND: [\n          { status: { operator: eq, value: \"active\" } }\n          { organizationId: { operator: eq, value: $orgId } }\n        ]\n      }\n    ) {\n      totalCount\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          name\n          status\n          system\n        }\n      }\n    }\n  }\n`;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1ce58796245dd57134162f71001b9ecb56870b1e"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/program.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/program.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":25}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":42}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":37}},"4":{"start":{"line":6,"column":16},"end":{"line":6,"column":35}},"5":{"start":{"line":7,"column":15},"end":{"line":7,"column":42}},"6":{"start":{"line":10,"column":8},"end":{"line":28,"column":9}},"7":{"start":{"line":11,"column":12},"end":{"line":21,"column":15}},"8":{"start":{"line":24,"column":12},"end":{"line":25,"column":28}},"9":{"start":{"line":25,"column":16},"end":{"line":25,"column":28}},"10":{"start":{"line":26,"column":24},"end":{"line":26,"column":75}},"11":{"start":{"line":27,"column":12},"end":{"line":27,"column":147}},"12":{"start":{"line":31,"column":23},"end":{"line":31,"column":25}},"13":{"start":{"line":32,"column":8},"end":{"line":45,"column":9}},"14":{"start":{"line":33,"column":12},"end":{"line":44,"column":13}},"15":{"start":{"line":34,"column":16},"end":{"line":34,"column":70}},"16":{"start":{"line":37,"column":16},"end":{"line":43,"column":17}},"17":{"start":{"line":38,"column":20},"end":{"line":38,"column":39}},"18":{"start":{"line":41,"column":32},"end":{"line":41,"column":83}},"19":{"start":{"line":42,"column":20},"end":{"line":42,"column":163}},"20":{"start":{"line":46,"column":8},"end":{"line":47,"column":46}},"21":{"start":{"line":47,"column":12},"end":{"line":47,"column":46}},"22":{"start":{"line":50,"column":8},"end":{"line":71,"column":9}},"23":{"start":{"line":51,"column":27},"end":{"line":61,"column":14}},"24":{"start":{"line":62,"column":12},"end":{"line":63,"column":147}},"25":{"start":{"line":63,"column":16},"end":{"line":63,"column":147}},"26":{"start":{"line":64,"column":12},"end":{"line":64,"column":33}},"27":{"start":{"line":67,"column":12},"end":{"line":68,"column":28}},"28":{"start":{"line":68,"column":16},"end":{"line":68,"column":28}},"29":{"start":{"line":69,"column":24},"end":{"line":69,"column":75}},"30":{"start":{"line":70,"column":12},"end":{"line":70,"column":145}},"31":{"start":{"line":74,"column":8},"end":{"line":104,"column":9}},"32":{"start":{"line":75,"column":28},"end":{"line":88,"column":14}},"33":{"start":{"line":89,"column":12},"end":{"line":90,"column":175}},"34":{"start":{"line":90,"column":16},"end":{"line":90,"column":175}},"35":{"start":{"line":91,"column":28},"end":{"line":91,"column":49}},"36":{"start":{"line":92,"column":12},"end":{"line":94,"column":13}},"37":{"start":{"line":93,"column":16},"end":{"line":93,"column":39}},"38":{"start":{"line":95,"column":12},"end":{"line":96,"column":79}},"39":{"start":{"line":96,"column":16},"end":{"line":96,"column":79}},"40":{"start":{"line":96,"column":44},"end":{"line":96,"column":76}},"41":{"start":{"line":97,"column":12},"end":{"line":97,"column":171}},"42":{"start":{"line":100,"column":12},"end":{"line":101,"column":28}},"43":{"start":{"line":101,"column":16},"end":{"line":101,"column":28}},"44":{"start":{"line":102,"column":24},"end":{"line":102,"column":75}},"45":{"start":{"line":103,"column":12},"end":{"line":103,"column":146}},"46":{"start":{"line":107,"column":8},"end":{"line":153,"column":9}},"47":{"start":{"line":108,"column":28},"end":{"line":121,"column":14}},"48":{"start":{"line":122,"column":36},"end":{"line":129,"column":14}},"49":{"start":{"line":130,"column":12},"end":{"line":131,"column":91}},"50":{"start":{"line":131,"column":16},"end":{"line":131,"column":91}},"51":{"start":{"line":132,"column":12},"end":{"line":133,"column":175}},"52":{"start":{"line":133,"column":16},"end":{"line":133,"column":175}},"53":{"start":{"line":134,"column":35},"end":{"line":134,"column":72}},"54":{"start":{"line":135,"column":28},"end":{"line":135,"column":49}},"55":{"start":{"line":136,"column":12},"end":{"line":142,"column":13}},"56":{"start":{"line":138,"column":16},"end":{"line":139,"column":43}},"57":{"start":{"line":139,"column":20},"end":{"line":139,"column":43}},"58":{"start":{"line":143,"column":12},"end":{"line":144,"column":79}},"59":{"start":{"line":144,"column":16},"end":{"line":144,"column":79}},"60":{"start":{"line":144,"column":44},"end":{"line":144,"column":76}},"61":{"start":{"line":145,"column":12},"end":{"line":146,"column":35}},"62":{"start":{"line":149,"column":12},"end":{"line":150,"column":28}},"63":{"start":{"line":150,"column":16},"end":{"line":150,"column":28}},"64":{"start":{"line":151,"column":24},"end":{"line":151,"column":75}},"65":{"start":{"line":152,"column":12},"end":{"line":152,"column":146}},"66":{"start":{"line":156,"column":0},"end":{"line":156,"column":26}},"67":{"start":{"line":157,"column":0},"end":{"line":157,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":61},"end":{"line":29,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":30,"column":4},"end":{"line":30,"column":5}},"loc":{"start":{"line":30,"column":58},"end":{"line":48,"column":5}},"line":30},"2":{"name":"(anonymous_2)","decl":{"start":{"line":49,"column":4},"end":{"line":49,"column":5}},"loc":{"start":{"line":49,"column":47},"end":{"line":72,"column":5}},"line":49},"3":{"name":"(anonymous_3)","decl":{"start":{"line":73,"column":4},"end":{"line":73,"column":5}},"loc":{"start":{"line":73,"column":57},"end":{"line":105,"column":5}},"line":73},"4":{"name":"(anonymous_4)","decl":{"start":{"line":96,"column":35},"end":{"line":96,"column":36}},"loc":{"start":{"line":96,"column":44},"end":{"line":96,"column":76}},"line":96},"5":{"name":"(anonymous_5)","decl":{"start":{"line":106,"column":4},"end":{"line":106,"column":5}},"loc":{"start":{"line":106,"column":75},"end":{"line":154,"column":5}},"line":106},"6":{"name":"(anonymous_6)","decl":{"start":{"line":144,"column":35},"end":{"line":144,"column":36}},"loc":{"start":{"line":144,"column":44},"end":{"line":144,"column":76}},"line":144}},"branchMap":{"0":{"loc":{"start":{"line":24,"column":12},"end":{"line":25,"column":28}},"type":"if","locations":[{"start":{"line":24,"column":12},"end":{"line":25,"column":28}},{"start":{"line":24,"column":12},"end":{"line":25,"column":28}}],"line":24},"1":{"loc":{"start":{"line":26,"column":24},"end":{"line":26,"column":75}},"type":"cond-expr","locations":[{"start":{"line":26,"column":49},"end":{"line":26,"column":62}},{"start":{"line":26,"column":65},"end":{"line":26,"column":75}}],"line":26},"2":{"loc":{"start":{"line":37,"column":16},"end":{"line":43,"column":17}},"type":"if","locations":[{"start":{"line":37,"column":16},"end":{"line":43,"column":17}},{"start":{"line":37,"column":16},"end":{"line":43,"column":17}}],"line":37},"3":{"loc":{"start":{"line":41,"column":32},"end":{"line":41,"column":83}},"type":"cond-expr","locations":[{"start":{"line":41,"column":57},"end":{"line":41,"column":70}},{"start":{"line":41,"column":73},"end":{"line":41,"column":83}}],"line":41},"4":{"loc":{"start":{"line":46,"column":8},"end":{"line":47,"column":46}},"type":"if","locations":[{"start":{"line":46,"column":8},"end":{"line":47,"column":46}},{"start":{"line":46,"column":8},"end":{"line":47,"column":46}}],"line":46},"5":{"loc":{"start":{"line":62,"column":12},"end":{"line":63,"column":147}},"type":"if","locations":[{"start":{"line":62,"column":12},"end":{"line":63,"column":147}},{"start":{"line":62,"column":12},"end":{"line":63,"column":147}}],"line":62},"6":{"loc":{"start":{"line":67,"column":12},"end":{"line":68,"column":28}},"type":"if","locations":[{"start":{"line":67,"column":12},"end":{"line":68,"column":28}},{"start":{"line":67,"column":12},"end":{"line":68,"column":28}}],"line":67},"7":{"loc":{"start":{"line":69,"column":24},"end":{"line":69,"column":75}},"type":"cond-expr","locations":[{"start":{"line":69,"column":49},"end":{"line":69,"column":62}},{"start":{"line":69,"column":65},"end":{"line":69,"column":75}}],"line":69},"8":{"loc":{"start":{"line":89,"column":12},"end":{"line":90,"column":175}},"type":"if","locations":[{"start":{"line":89,"column":12},"end":{"line":90,"column":175}},{"start":{"line":89,"column":12},"end":{"line":90,"column":175}}],"line":89},"9":{"loc":{"start":{"line":95,"column":12},"end":{"line":96,"column":79}},"type":"if","locations":[{"start":{"line":95,"column":12},"end":{"line":96,"column":79}},{"start":{"line":95,"column":12},"end":{"line":96,"column":79}}],"line":95},"10":{"loc":{"start":{"line":100,"column":12},"end":{"line":101,"column":28}},"type":"if","locations":[{"start":{"line":100,"column":12},"end":{"line":101,"column":28}},{"start":{"line":100,"column":12},"end":{"line":101,"column":28}}],"line":100},"11":{"loc":{"start":{"line":102,"column":24},"end":{"line":102,"column":75}},"type":"cond-expr","locations":[{"start":{"line":102,"column":49},"end":{"line":102,"column":62}},{"start":{"line":102,"column":65},"end":{"line":102,"column":75}}],"line":102},"12":{"loc":{"start":{"line":130,"column":12},"end":{"line":131,"column":91}},"type":"if","locations":[{"start":{"line":130,"column":12},"end":{"line":131,"column":91}},{"start":{"line":130,"column":12},"end":{"line":131,"column":91}}],"line":130},"13":{"loc":{"start":{"line":132,"column":12},"end":{"line":133,"column":175}},"type":"if","locations":[{"start":{"line":132,"column":12},"end":{"line":133,"column":175}},{"start":{"line":132,"column":12},"end":{"line":133,"column":175}}],"line":132},"14":{"loc":{"start":{"line":138,"column":16},"end":{"line":139,"column":43}},"type":"if","locations":[{"start":{"line":138,"column":16},"end":{"line":139,"column":43}},{"start":{"line":138,"column":16},"end":{"line":139,"column":43}}],"line":138},"15":{"loc":{"start":{"line":143,"column":12},"end":{"line":144,"column":79}},"type":"if","locations":[{"start":{"line":143,"column":12},"end":{"line":144,"column":79}},{"start":{"line":143,"column":12},"end":{"line":144,"column":79}}],"line":143},"16":{"loc":{"start":{"line":149,"column":12},"end":{"line":150,"column":28}},"type":"if","locations":[{"start":{"line":149,"column":12},"end":{"line":150,"column":28}},{"start":{"line":149,"column":12},"end":{"line":150,"column":28}}],"line":149},"17":{"loc":{"start":{"line":151,"column":24},"end":{"line":151,"column":75}},"type":"cond-expr","locations":[{"start":{"line":151,"column":49},"end":{"line":151,"column":62}},{"start":{"line":151,"column":65},"end":{"line":151,"column":75}}],"line":151}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":1,"67":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/program.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/program.ts"],"names":[],"mappings":"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","sourcesContent":["import { PrismaClient } from '@prisma/client';\nimport { Logger } from 'pino';\n\nimport {\n  Category,\n  ENTITY_NOT_FOUND,\n  Errors,\n  MachineError,\n  OnboardingError,\n  POSTGRES_GET_KIDSLOOP_ID_QUERY,\n} from '../errors';\nimport { IdNameMapper } from '../services/adminService';\nimport { Entity } from '../types';\nimport { ExternalUuid, Uuid } from '../utils';\n\nconst prisma = new PrismaClient();\n\nexport class Program {\n  public static entity = Entity.PROGRAM;\n\n  public static async insertOne(\n    name: string,\n    klUuid: Uuid,\n    externalOrgId: ExternalUuid,\n    log: Logger\n  ): Promise<void> {\n    try {\n      await prisma.program.create({\n        data: {\n          name,\n          klUuid,\n          organization: {\n            connect: {\n              externalUuid: externalOrgId,\n            },\n          },\n        },\n      });\n    } catch (error) {\n      if (error instanceof OnboardingError) throw error;\n      const msg = error instanceof Error ? error.message : `${error}`;\n      throw new OnboardingError(\n        MachineError.WRITE,\n        msg,\n        Category.POSTGRES,\n        log,\n        [],\n        { operation: 'INSERT ONE' }\n      );\n    }\n  }\n\n  public static async insertMany(\n    programs: IdNameMapper[],\n    externalOrgId: ExternalUuid,\n    log: Logger\n  ): Promise<void> {\n    const errors = [];\n    for (const { name, id } of programs) {\n      try {\n        await Program.insertOne(name, id, externalOrgId, log);\n      } catch (error) {\n        if (error instanceof OnboardingError) {\n          errors.push(error);\n        } else {\n          const msg = error instanceof Error ? error.message : `${error}`;\n          errors.push(\n            new OnboardingError(\n              MachineError.WRITE,\n              msg,\n              Category.POSTGRES,\n              log,\n              [],\n              { operation: 'INSERT MANY' }\n            )\n          );\n        }\n      }\n    }\n    if (errors.length > 0) throw new Errors(errors);\n  }\n\n  public static async getIdByName(\n    name: string,\n    orgId: ExternalUuid,\n    log: Logger\n  ): Promise<Uuid> {\n    try {\n      const klUuid = await prisma.program.findFirst({\n        where: {\n          name,\n          organization: {\n            externalUuid: orgId,\n          },\n        },\n        select: {\n          klUuid: true,\n        },\n      });\n      if (!klUuid)\n        throw POSTGRES_GET_KIDSLOOP_ID_QUERY(\n          name,\n          this.entity,\n          `Program: ${name} not found for organization ${orgId}`,\n          log\n        );\n      return klUuid.klUuid;\n    } catch (error) {\n      if (error instanceof OnboardingError) throw error;\n      const msg = error instanceof Error ? error.message : `${error}`;\n      throw new OnboardingError(\n        MachineError.WRITE,\n        msg,\n        Category.POSTGRES,\n        log,\n        [],\n        { operation: 'FIND ONE' }\n      );\n    }\n  }\n\n  public static async getIdsByNames(\n    programNames: string[],\n    orgId: ExternalUuid,\n    log: Logger\n  ): Promise<IdNameMapper[]> {\n    try {\n      const klUuids = await prisma.program.findMany({\n        where: {\n          name: {\n            in: programNames,\n          },\n          organization: {\n            externalUuid: orgId,\n          },\n        },\n        select: {\n          klUuid: true,\n          name: true,\n        },\n      });\n      if (!klUuids)\n        throw POSTGRES_GET_KIDSLOOP_ID_QUERY(\n          programNames,\n          this.entity,\n          `Programs: ${programNames.join(\n            ', '\n          )} not found for organization ${orgId}`,\n          log\n        );\n      const targets = new Set(programNames);\n      for (const { klUuid } of klUuids) {\n        targets.delete(klUuid);\n      }\n      if (targets.size === 0)\n        return klUuids.map((id) => ({ id: id.klUuid, name: id.name }));\n      throw POSTGRES_GET_KIDSLOOP_ID_QUERY(\n        programNames,\n        this.entity,\n        `Programs: ${programNames.join(\n          ', '\n        )} not found for organization ${orgId}`,\n        log\n      );\n    } catch (error) {\n      if (error instanceof OnboardingError) throw error;\n      const msg = error instanceof Error ? error.message : `${error}`;\n      throw new OnboardingError(\n        MachineError.WRITE,\n        msg,\n        Category.POSTGRES,\n        log,\n        [],\n        { operation: 'FIND MANY' }\n      );\n    }\n  }\n\n  public static async getIdsByNamesForClass(\n    programNames: string[],\n    orgId: ExternalUuid,\n    schoolId: ExternalUuid,\n    log: Logger\n  ): Promise<IdNameMapper[]> {\n    try {\n      const klUuids = await prisma.program.findMany({\n        where: {\n          name: {\n            in: programNames,\n          },\n          organization: {\n            externalUuid: orgId,\n          },\n        },\n        select: {\n          klUuid: true,\n          name: true,\n        },\n      });\n      const schoolsPrograms = await prisma.school.findUnique({\n        where: {\n          externalUuid: schoolId,\n        },\n        select: {\n          programUuids: true,\n        },\n      });\n      if (!schoolsPrograms)\n        throw ENTITY_NOT_FOUND(schoolId, Entity.SCHOOL, log);\n      if (!klUuids)\n        throw POSTGRES_GET_KIDSLOOP_ID_QUERY(\n          programNames,\n          this.entity,\n          `Programs: ${programNames.join(\n            ', '\n          )} not found for organization ${orgId}`,\n          log\n        );\n      const validForSchool = new Set(schoolsPrograms.programUuids);\n      const targets = new Set(programNames);\n      for (const { klUuid } of klUuids) {\n        // If the school also has the program, then add it\n        if (validForSchool.has(klUuid)) targets.delete(klUuid);\n        // Otherwise that program hasn't been added to that school yet\n        // so it is treated as invalid\n      }\n      if (targets.size === 0)\n        return klUuids.map((id) => ({ id: id.klUuid, name: id.name }));\n      throw POSTGRES_GET_KIDSLOOP_ID_QUERY(\n        programNames,\n        this.entity,\n        `Programs: ${programNames.join(\n          ', '\n        )} not found for organization ${orgId},\n        school: ${schoolId}`,\n        log\n      );\n    } catch (error) {\n      if (error instanceof OnboardingError) throw error;\n      const msg = error instanceof Error ? error.message : `${error}`;\n      throw new OnboardingError(\n        MachineError.WRITE,\n        msg,\n        Category.POSTGRES,\n        log,\n        [],\n        { operation: 'FIND MANY' }\n      );\n    }\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"68b3751aab040cfd19fb3d87e56aaa44d970dc78"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/role.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/role.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":22}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":42}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":37}},"4":{"start":{"line":6,"column":16},"end":{"line":6,"column":35}},"5":{"start":{"line":7,"column":15},"end":{"line":7,"column":42}},"6":{"start":{"line":10,"column":8},"end":{"line":28,"column":9}},"7":{"start":{"line":11,"column":12},"end":{"line":21,"column":15}},"8":{"start":{"line":24,"column":12},"end":{"line":25,"column":28}},"9":{"start":{"line":25,"column":16},"end":{"line":25,"column":28}},"10":{"start":{"line":26,"column":24},"end":{"line":26,"column":75}},"11":{"start":{"line":27,"column":12},"end":{"line":27,"column":147}},"12":{"start":{"line":31,"column":23},"end":{"line":31,"column":25}},"13":{"start":{"line":32,"column":8},"end":{"line":45,"column":9}},"14":{"start":{"line":33,"column":12},"end":{"line":44,"column":13}},"15":{"start":{"line":34,"column":16},"end":{"line":34,"column":67}},"16":{"start":{"line":37,"column":16},"end":{"line":43,"column":17}},"17":{"start":{"line":38,"column":20},"end":{"line":38,"column":39}},"18":{"start":{"line":41,"column":32},"end":{"line":41,"column":83}},"19":{"start":{"line":42,"column":20},"end":{"line":42,"column":163}},"20":{"start":{"line":46,"column":8},"end":{"line":47,"column":46}},"21":{"start":{"line":47,"column":12},"end":{"line":47,"column":46}},"22":{"start":{"line":50,"column":8},"end":{"line":71,"column":9}},"23":{"start":{"line":51,"column":27},"end":{"line":61,"column":14}},"24":{"start":{"line":62,"column":12},"end":{"line":63,"column":154}},"25":{"start":{"line":63,"column":16},"end":{"line":63,"column":154}},"26":{"start":{"line":64,"column":12},"end":{"line":64,"column":33}},"27":{"start":{"line":67,"column":12},"end":{"line":68,"column":28}},"28":{"start":{"line":68,"column":16},"end":{"line":68,"column":28}},"29":{"start":{"line":69,"column":24},"end":{"line":69,"column":75}},"30":{"start":{"line":70,"column":12},"end":{"line":70,"column":145}},"31":{"start":{"line":74,"column":8},"end":{"line":104,"column":9}},"32":{"start":{"line":75,"column":28},"end":{"line":88,"column":14}},"33":{"start":{"line":89,"column":12},"end":{"line":90,"column":167}},"34":{"start":{"line":90,"column":16},"end":{"line":90,"column":167}},"35":{"start":{"line":91,"column":28},"end":{"line":91,"column":42}},"36":{"start":{"line":92,"column":12},"end":{"line":94,"column":13}},"37":{"start":{"line":93,"column":16},"end":{"line":93,"column":39}},"38":{"start":{"line":95,"column":12},"end":{"line":96,"column":79}},"39":{"start":{"line":96,"column":16},"end":{"line":96,"column":79}},"40":{"start":{"line":96,"column":44},"end":{"line":96,"column":76}},"41":{"start":{"line":97,"column":12},"end":{"line":97,"column":163}},"42":{"start":{"line":100,"column":12},"end":{"line":101,"column":28}},"43":{"start":{"line":101,"column":16},"end":{"line":101,"column":28}},"44":{"start":{"line":102,"column":24},"end":{"line":102,"column":75}},"45":{"start":{"line":103,"column":12},"end":{"line":103,"column":146}},"46":{"start":{"line":107,"column":0},"end":{"line":107,"column":20}},"47":{"start":{"line":108,"column":0},"end":{"line":108,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":61},"end":{"line":29,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":30,"column":4},"end":{"line":30,"column":5}},"loc":{"start":{"line":30,"column":58},"end":{"line":48,"column":5}},"line":30},"2":{"name":"(anonymous_2)","decl":{"start":{"line":49,"column":4},"end":{"line":49,"column":5}},"loc":{"start":{"line":49,"column":47},"end":{"line":72,"column":5}},"line":49},"3":{"name":"(anonymous_3)","decl":{"start":{"line":73,"column":4},"end":{"line":73,"column":5}},"loc":{"start":{"line":73,"column":50},"end":{"line":105,"column":5}},"line":73},"4":{"name":"(anonymous_4)","decl":{"start":{"line":96,"column":35},"end":{"line":96,"column":36}},"loc":{"start":{"line":96,"column":44},"end":{"line":96,"column":76}},"line":96}},"branchMap":{"0":{"loc":{"start":{"line":24,"column":12},"end":{"line":25,"column":28}},"type":"if","locations":[{"start":{"line":24,"column":12},"end":{"line":25,"column":28}},{"start":{"line":24,"column":12},"end":{"line":25,"column":28}}],"line":24},"1":{"loc":{"start":{"line":26,"column":24},"end":{"line":26,"column":75}},"type":"cond-expr","locations":[{"start":{"line":26,"column":49},"end":{"line":26,"column":62}},{"start":{"line":26,"column":65},"end":{"line":26,"column":75}}],"line":26},"2":{"loc":{"start":{"line":37,"column":16},"end":{"line":43,"column":17}},"type":"if","locations":[{"start":{"line":37,"column":16},"end":{"line":43,"column":17}},{"start":{"line":37,"column":16},"end":{"line":43,"column":17}}],"line":37},"3":{"loc":{"start":{"line":41,"column":32},"end":{"line":41,"column":83}},"type":"cond-expr","locations":[{"start":{"line":41,"column":57},"end":{"line":41,"column":70}},{"start":{"line":41,"column":73},"end":{"line":41,"column":83}}],"line":41},"4":{"loc":{"start":{"line":46,"column":8},"end":{"line":47,"column":46}},"type":"if","locations":[{"start":{"line":46,"column":8},"end":{"line":47,"column":46}},{"start":{"line":46,"column":8},"end":{"line":47,"column":46}}],"line":46},"5":{"loc":{"start":{"line":62,"column":12},"end":{"line":63,"column":154}},"type":"if","locations":[{"start":{"line":62,"column":12},"end":{"line":63,"column":154}},{"start":{"line":62,"column":12},"end":{"line":63,"column":154}}],"line":62},"6":{"loc":{"start":{"line":67,"column":12},"end":{"line":68,"column":28}},"type":"if","locations":[{"start":{"line":67,"column":12},"end":{"line":68,"column":28}},{"start":{"line":67,"column":12},"end":{"line":68,"column":28}}],"line":67},"7":{"loc":{"start":{"line":69,"column":24},"end":{"line":69,"column":75}},"type":"cond-expr","locations":[{"start":{"line":69,"column":49},"end":{"line":69,"column":62}},{"start":{"line":69,"column":65},"end":{"line":69,"column":75}}],"line":69},"8":{"loc":{"start":{"line":89,"column":12},"end":{"line":90,"column":167}},"type":"if","locations":[{"start":{"line":89,"column":12},"end":{"line":90,"column":167}},{"start":{"line":89,"column":12},"end":{"line":90,"column":167}}],"line":89},"9":{"loc":{"start":{"line":95,"column":12},"end":{"line":96,"column":79}},"type":"if","locations":[{"start":{"line":95,"column":12},"end":{"line":96,"column":79}},{"start":{"line":95,"column":12},"end":{"line":96,"column":79}}],"line":95},"10":{"loc":{"start":{"line":100,"column":12},"end":{"line":101,"column":28}},"type":"if","locations":[{"start":{"line":100,"column":12},"end":{"line":101,"column":28}},{"start":{"line":100,"column":12},"end":{"line":101,"column":28}}],"line":100},"11":{"loc":{"start":{"line":102,"column":24},"end":{"line":102,"column":75}},"type":"cond-expr","locations":[{"start":{"line":102,"column":49},"end":{"line":102,"column":62}},{"start":{"line":102,"column":65},"end":{"line":102,"column":75}}],"line":102}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1,"47":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/role.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/role.ts"],"names":[],"mappings":"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","sourcesContent":["import { PrismaClient } from '@prisma/client';\nimport { Logger } from 'pino';\n\nimport {\n  Category,\n  Errors,\n  MachineError,\n  OnboardingError,\n  POSTGRES_GET_KIDSLOOP_ID_QUERY,\n} from '../errors';\nimport { IdNameMapper } from '../services/adminService';\nimport { Entity } from '../types';\nimport { ExternalUuid, Uuid } from '../utils';\n\nconst prisma = new PrismaClient();\n\nexport class Role {\n  public static entity = Entity.ROLE;\n\n  public static async insertOne(\n    name: string,\n    klUuid: Uuid,\n    externalOrgId: ExternalUuid,\n    log: Logger\n  ): Promise<void> {\n    try {\n      await prisma.role.create({\n        data: {\n          name,\n          klUuid,\n          organization: {\n            connect: {\n              externalUuid: externalOrgId,\n            },\n          },\n        },\n      });\n    } catch (error) {\n      if (error instanceof OnboardingError) throw error;\n      const msg = error instanceof Error ? error.message : `${error}`;\n      throw new OnboardingError(\n        MachineError.WRITE,\n        msg,\n        Category.POSTGRES,\n        log,\n        [],\n        { operation: 'INSERT ONE' }\n      );\n    }\n  }\n\n  public static async insertMany(\n    programs: IdNameMapper[],\n    externalOrgId: ExternalUuid,\n    log: Logger\n  ): Promise<void> {\n    const errors = [];\n    for (const { name, id } of programs) {\n      try {\n        await Role.insertOne(name, id, externalOrgId, log);\n      } catch (error) {\n        if (error instanceof OnboardingError) {\n          errors.push(error);\n        } else {\n          const msg = error instanceof Error ? error.message : `${error}`;\n          errors.push(\n            new OnboardingError(\n              MachineError.WRITE,\n              msg,\n              Category.POSTGRES,\n              log,\n              [],\n              { operation: 'INSERT MANY' }\n            )\n          );\n        }\n      }\n    }\n    if (errors.length > 0) throw new Errors(errors);\n  }\n\n  public static async getIdByName(\n    name: string,\n    orgId: ExternalUuid,\n    log: Logger\n  ): Promise<Uuid> {\n    try {\n      const klUuid = await prisma.role.findFirst({\n        where: {\n          name,\n          organization: {\n            externalUuid: orgId,\n          },\n        },\n        select: {\n          klUuid: true,\n        },\n      });\n      if (!klUuid)\n        throw POSTGRES_GET_KIDSLOOP_ID_QUERY(\n          name,\n          this.entity,\n          `${this.entity}: ${name} not found for organization ${orgId}`,\n          log\n        );\n      return klUuid.klUuid;\n    } catch (error) {\n      if (error instanceof OnboardingError) throw error;\n      const msg = error instanceof Error ? error.message : `${error}`;\n      throw new OnboardingError(\n        MachineError.WRITE,\n        msg,\n        Category.POSTGRES,\n        log,\n        [],\n        { operation: 'FIND ONE' }\n      );\n    }\n  }\n\n  public static async getIdsByNames(\n    names: string[],\n    orgId: ExternalUuid,\n    log: Logger\n  ): Promise<{ id: Uuid; name: string }[]> {\n    try {\n      const klUuids = await prisma.role.findMany({\n        where: {\n          name: {\n            in: names,\n          },\n          organization: {\n            externalUuid: orgId,\n          },\n        },\n        select: {\n          klUuid: true,\n          name: true,\n        },\n      });\n      if (!klUuids)\n        throw POSTGRES_GET_KIDSLOOP_ID_QUERY(\n          names,\n          this.entity,\n          `${this.entity}: ${names.join(\n            ', '\n          )} not found for organization ${orgId}`,\n          log\n        );\n      const targets = new Set(names);\n      for (const { klUuid } of klUuids) {\n        targets.delete(klUuid);\n      }\n      if (targets.size === 0)\n        return klUuids.map((id) => ({ id: id.klUuid, name: id.name }));\n      throw POSTGRES_GET_KIDSLOOP_ID_QUERY(\n        names,\n        this.entity,\n        `${this.entity}: ${names.join(\n          ', '\n        )} not found for organization ${orgId}`,\n        log\n      );\n    } catch (error) {\n      if (error instanceof OnboardingError) throw error;\n      const msg = error instanceof Error ? error.message : `${error}`;\n      throw new OnboardingError(\n        MachineError.WRITE,\n        msg,\n        Category.POSTGRES,\n        log,\n        [],\n        { operation: 'FIND MANY' }\n      );\n    }\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6b0d12465fc708c401cd63b7caef671af2df606e"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/school.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/school.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":42}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":37}},"4":{"start":{"line":6,"column":16},"end":{"line":6,"column":35}},"5":{"start":{"line":7,"column":15},"end":{"line":7,"column":42}},"6":{"start":{"line":10,"column":8},"end":{"line":18,"column":9}},"7":{"start":{"line":11,"column":12},"end":{"line":13,"column":15}},"8":{"start":{"line":16,"column":24},"end":{"line":16,"column":80}},"9":{"start":{"line":17,"column":12},"end":{"line":17,"column":178}},"10":{"start":{"line":21,"column":8},"end":{"line":34,"column":9}},"11":{"start":{"line":22,"column":27},"end":{"line":26,"column":14}},"12":{"start":{"line":27,"column":12},"end":{"line":28,"column":75}},"13":{"start":{"line":28,"column":16},"end":{"line":28,"column":75}},"14":{"start":{"line":29,"column":12},"end":{"line":29,"column":26}},"15":{"start":{"line":32,"column":24},"end":{"line":32,"column":80}},"16":{"start":{"line":33,"column":12},"end":{"line":33,"column":158}},"17":{"start":{"line":37,"column":8},"end":{"line":53,"column":9}},"18":{"start":{"line":38,"column":27},"end":{"line":45,"column":14}},"19":{"start":{"line":46,"column":12},"end":{"line":47,"column":28}},"20":{"start":{"line":47,"column":16},"end":{"line":47,"column":28}},"21":{"start":{"line":48,"column":12},"end":{"line":48,"column":71}},"22":{"start":{"line":51,"column":24},"end":{"line":51,"column":80}},"23":{"start":{"line":52,"column":12},"end":{"line":52,"column":83}},"24":{"start":{"line":56,"column":8},"end":{"line":72,"column":9}},"25":{"start":{"line":57,"column":27},"end":{"line":64,"column":14}},"26":{"start":{"line":65,"column":12},"end":{"line":66,"column":37}},"27":{"start":{"line":66,"column":16},"end":{"line":66,"column":37}},"28":{"start":{"line":67,"column":12},"end":{"line":67,"column":71}},"29":{"start":{"line":70,"column":24},"end":{"line":70,"column":80}},"30":{"start":{"line":71,"column":12},"end":{"line":71,"column":90}},"31":{"start":{"line":75,"column":0},"end":{"line":75,"column":24}},"32":{"start":{"line":76,"column":0},"end":{"line":76,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":40},"end":{"line":19,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":34},"end":{"line":35,"column":5}},"line":20},"2":{"name":"(anonymous_2)","decl":{"start":{"line":36,"column":4},"end":{"line":36,"column":5}},"loc":{"start":{"line":36,"column":34},"end":{"line":54,"column":5}},"line":36},"3":{"name":"(anonymous_3)","decl":{"start":{"line":55,"column":4},"end":{"line":55,"column":5}},"loc":{"start":{"line":55,"column":32},"end":{"line":73,"column":5}},"line":55}},"branchMap":{"0":{"loc":{"start":{"line":27,"column":12},"end":{"line":28,"column":75}},"type":"if","locations":[{"start":{"line":27,"column":12},"end":{"line":28,"column":75}},{"start":{"line":27,"column":12},"end":{"line":28,"column":75}}],"line":27},"1":{"loc":{"start":{"line":46,"column":12},"end":{"line":47,"column":28}},"type":"if","locations":[{"start":{"line":46,"column":12},"end":{"line":47,"column":28}},{"start":{"line":46,"column":12},"end":{"line":47,"column":28}}],"line":46},"2":{"loc":{"start":{"line":65,"column":12},"end":{"line":66,"column":37}},"type":"if","locations":[{"start":{"line":65,"column":12},"end":{"line":66,"column":37}},{"start":{"line":65,"column":12},"end":{"line":66,"column":37}}],"line":65},"3":{"loc":{"start":{"line":65,"column":16},"end":{"line":65,"column":39}},"type":"binary-expr","locations":[{"start":{"line":65,"column":16},"end":{"line":65,"column":22}},{"start":{"line":65,"column":26},"end":{"line":65,"column":39}}],"line":65}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":1},"f":{"0":0,"1":0,"2":0,"3":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/school.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/school.ts"],"names":[],"mappings":"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","sourcesContent":["import { School as DbSchool, Prisma, PrismaClient } from '@prisma/client';\nimport { Logger } from 'pino';\n\nimport {\n  Category,\n  ENTITY_NOT_FOUND,\n  MachineError,\n  OnboardingError,\n  POSTGRES_GET_KIDSLOOP_ID_QUERY,\n  POSTGRES_IS_VALID_QUERY,\n  returnMessageOrThrowOnboardingError,\n} from '../errors';\nimport { Entity } from '../types';\nimport { ExternalUuid, Uuid } from '../utils';\n\nconst prisma = new PrismaClient();\n\nexport class School {\n  public static entity = Entity.SCHOOL;\n\n  public static async insertOne(\n    school: Prisma.SchoolCreateInput,\n    log: Logger\n  ): Promise<void> {\n    try {\n      await prisma.school.create({\n        data: school,\n      });\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw new OnboardingError(\n        MachineError.WRITE,\n        msg,\n        Category.POSTGRES,\n        log,\n        [],\n        { entityId: school.externalUuid, operation: 'INSERT ONE' }\n      );\n    }\n  }\n\n  public static async findOne(\n    id: ExternalUuid,\n    log: Logger\n  ): Promise<DbSchool> {\n    try {\n      const school = await prisma.school.findUnique({\n        where: {\n          externalUuid: id,\n        },\n      });\n      if (!school) throw ENTITY_NOT_FOUND(id, this.entity, log);\n      return school;\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw new OnboardingError(\n        MachineError.READ,\n        msg,\n        Category.POSTGRES,\n        log,\n        [],\n        { entityId: id, operation: 'FIND ONE' }\n      );\n    }\n  }\n\n  public static async isValid(id: ExternalUuid, log: Logger): Promise<boolean> {\n    try {\n      const school = await prisma.school.findUnique({\n        where: {\n          externalUuid: id,\n        },\n        select: {\n          externalUuid: true,\n        },\n      });\n      if (school) return true;\n      throw ENTITY_NOT_FOUND(id, this.entity, log);\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw POSTGRES_IS_VALID_QUERY(id, this.entity, msg, log);\n    }\n  }\n\n  public static async getId(id: ExternalUuid, log: Logger): Promise<Uuid> {\n    try {\n      const klUuid = await prisma.school.findUnique({\n        where: {\n          externalUuid: id,\n        },\n        select: {\n          klUuid: true,\n        },\n      });\n      if (klUuid && klUuid.klUuid) return klUuid.klUuid;\n      throw ENTITY_NOT_FOUND(id, this.entity, log);\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw POSTGRES_GET_KIDSLOOP_ID_QUERY(id, this.entity, msg, log);\n    }\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"00a2f667a7fb643f8985217e38437214eac843b3"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/class.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/class.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":42}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":37}},"4":{"start":{"line":6,"column":16},"end":{"line":6,"column":35}},"5":{"start":{"line":7,"column":15},"end":{"line":7,"column":42}},"6":{"start":{"line":10,"column":8},"end":{"line":18,"column":9}},"7":{"start":{"line":11,"column":12},"end":{"line":13,"column":15}},"8":{"start":{"line":16,"column":24},"end":{"line":16,"column":80}},"9":{"start":{"line":17,"column":12},"end":{"line":17,"column":173}},"10":{"start":{"line":21,"column":8},"end":{"line":34,"column":9}},"11":{"start":{"line":22,"column":22},"end":{"line":26,"column":14}},"12":{"start":{"line":27,"column":12},"end":{"line":28,"column":75}},"13":{"start":{"line":28,"column":16},"end":{"line":28,"column":75}},"14":{"start":{"line":29,"column":12},"end":{"line":29,"column":21}},"15":{"start":{"line":32,"column":24},"end":{"line":32,"column":80}},"16":{"start":{"line":33,"column":12},"end":{"line":33,"column":158}},"17":{"start":{"line":37,"column":8},"end":{"line":53,"column":9}},"18":{"start":{"line":38,"column":27},"end":{"line":45,"column":14}},"19":{"start":{"line":46,"column":12},"end":{"line":47,"column":28}},"20":{"start":{"line":47,"column":16},"end":{"line":47,"column":28}},"21":{"start":{"line":48,"column":12},"end":{"line":48,"column":71}},"22":{"start":{"line":51,"column":24},"end":{"line":51,"column":80}},"23":{"start":{"line":52,"column":12},"end":{"line":52,"column":83}},"24":{"start":{"line":56,"column":8},"end":{"line":72,"column":9}},"25":{"start":{"line":57,"column":27},"end":{"line":64,"column":14}},"26":{"start":{"line":65,"column":12},"end":{"line":66,"column":37}},"27":{"start":{"line":66,"column":16},"end":{"line":66,"column":37}},"28":{"start":{"line":67,"column":12},"end":{"line":67,"column":71}},"29":{"start":{"line":70,"column":24},"end":{"line":70,"column":80}},"30":{"start":{"line":71,"column":12},"end":{"line":71,"column":90}},"31":{"start":{"line":75,"column":8},"end":{"line":98,"column":9}},"32":{"start":{"line":76,"column":26},"end":{"line":86,"column":42}},"33":{"start":{"line":86,"column":27},"end":{"line":86,"column":41}},"34":{"start":{"line":87,"column":12},"end":{"line":88,"column":23}},"35":{"start":{"line":88,"column":16},"end":{"line":88,"column":23}},"36":{"start":{"line":89,"column":26},"end":{"line":89,"column":38}},"37":{"start":{"line":90,"column":12},"end":{"line":92,"column":13}},"38":{"start":{"line":91,"column":16},"end":{"line":91,"column":33}},"39":{"start":{"line":93,"column":12},"end":{"line":93,"column":88}},"40":{"start":{"line":96,"column":24},"end":{"line":96,"column":75}},"41":{"start":{"line":97,"column":12},"end":{"line":97,"column":177}},"42":{"start":{"line":101,"column":0},"end":{"line":101,"column":22}},"43":{"start":{"line":102,"column":0},"end":{"line":102,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":35},"end":{"line":19,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":34},"end":{"line":35,"column":5}},"line":20},"2":{"name":"(anonymous_2)","decl":{"start":{"line":36,"column":4},"end":{"line":36,"column":5}},"loc":{"start":{"line":36,"column":34},"end":{"line":54,"column":5}},"line":36},"3":{"name":"(anonymous_3)","decl":{"start":{"line":55,"column":4},"end":{"line":55,"column":5}},"loc":{"start":{"line":55,"column":32},"end":{"line":73,"column":5}},"line":55},"4":{"name":"(anonymous_4)","decl":{"start":{"line":74,"column":4},"end":{"line":74,"column":5}},"loc":{"start":{"line":74,"column":46},"end":{"line":99,"column":5}},"line":74},"5":{"name":"(anonymous_5)","decl":{"start":{"line":86,"column":20},"end":{"line":86,"column":21}},"loc":{"start":{"line":86,"column":27},"end":{"line":86,"column":41}},"line":86}},"branchMap":{"0":{"loc":{"start":{"line":27,"column":12},"end":{"line":28,"column":75}},"type":"if","locations":[{"start":{"line":27,"column":12},"end":{"line":28,"column":75}},{"start":{"line":27,"column":12},"end":{"line":28,"column":75}}],"line":27},"1":{"loc":{"start":{"line":46,"column":12},"end":{"line":47,"column":28}},"type":"if","locations":[{"start":{"line":46,"column":12},"end":{"line":47,"column":28}},{"start":{"line":46,"column":12},"end":{"line":47,"column":28}}],"line":46},"2":{"loc":{"start":{"line":65,"column":12},"end":{"line":66,"column":37}},"type":"if","locations":[{"start":{"line":65,"column":12},"end":{"line":66,"column":37}},{"start":{"line":65,"column":12},"end":{"line":66,"column":37}}],"line":65},"3":{"loc":{"start":{"line":65,"column":16},"end":{"line":65,"column":39}},"type":"binary-expr","locations":[{"start":{"line":65,"column":16},"end":{"line":65,"column":22}},{"start":{"line":65,"column":26},"end":{"line":65,"column":39}}],"line":65},"4":{"loc":{"start":{"line":87,"column":12},"end":{"line":88,"column":23}},"type":"if","locations":[{"start":{"line":87,"column":12},"end":{"line":88,"column":23}},{"start":{"line":87,"column":12},"end":{"line":88,"column":23}}],"line":87},"5":{"loc":{"start":{"line":96,"column":24},"end":{"line":96,"column":75}},"type":"cond-expr","locations":[{"start":{"line":96,"column":49},"end":{"line":96,"column":62}},{"start":{"line":96,"column":65},"end":{"line":96,"column":75}}],"line":96}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/class.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/class.ts"],"names":[],"mappings":"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","sourcesContent":["import { Class as DbClass, Prisma, PrismaClient } from '@prisma/client';\nimport { Logger } from 'pino';\n\nimport {\n  Category,\n  ENTITY_NOT_FOUND,\n  MachineError,\n  OnboardingError,\n  POSTGRES_GET_KIDSLOOP_ID_QUERY,\n  POSTGRES_IS_VALID_QUERY,\n  returnMessageOrThrowOnboardingError,\n} from '../errors';\nimport { Entity } from '../types';\nimport { ExternalUuid, Uuid } from '../utils';\n\nconst prisma = new PrismaClient();\n\nexport class Class {\n  public static entity = Entity.CLASS;\n  public static async insertOne(\n    c: Prisma.ClassCreateInput,\n    log: Logger\n  ): Promise<void> {\n    try {\n      await prisma.class.create({\n        data: c,\n      });\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw new OnboardingError(\n        MachineError.WRITE,\n        msg,\n        Category.POSTGRES,\n        log,\n        [],\n        { entityId: c.externalUuid, operation: 'INSERT ONE' }\n      );\n    }\n  }\n\n  public static async findOne(id: ExternalUuid, log: Logger): Promise<DbClass> {\n    try {\n      const c = await prisma.class.findUnique({\n        where: {\n          externalUuid: id,\n        },\n      });\n      if (!c) throw ENTITY_NOT_FOUND(id, this.entity, log);\n      return c;\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw new OnboardingError(\n        MachineError.READ,\n        msg,\n        Category.POSTGRES,\n        log,\n        [],\n        { entityId: id, operation: 'FIND ONE' }\n      );\n    }\n  }\n\n  public static async isValid(id: ExternalUuid, log: Logger): Promise<boolean> {\n    try {\n      const entity = await prisma.class.findUnique({\n        where: {\n          externalUuid: id,\n        },\n        select: {\n          externalUuid: true,\n        },\n      });\n      if (entity) return true;\n      throw ENTITY_NOT_FOUND(id, this.entity, log);\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw POSTGRES_IS_VALID_QUERY(id, this.entity, msg, log);\n    }\n  }\n\n  public static async getId(id: ExternalUuid, log: Logger): Promise<Uuid> {\n    try {\n      const klUuid = await prisma.organization.findUnique({\n        where: {\n          externalUuid: id,\n        },\n        select: {\n          klUuid: true,\n        },\n      });\n      if (klUuid && klUuid.klUuid) return klUuid.klUuid;\n      throw ENTITY_NOT_FOUND(id, this.entity, log);\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw POSTGRES_GET_KIDSLOOP_ID_QUERY(id, this.entity, msg, log);\n    }\n  }\n\n  public static async areValid(\n    schoolId: ExternalUuid,\n    ids: ExternalUuid[],\n    log: Logger\n  ): Promise<void> {\n    try {\n      const count = (\n        await prisma.class.findMany({\n          where: {\n            externalUuid: {\n              in: ids,\n            },\n            externalSchoolUuid: schoolId,\n          },\n          select: {\n            externalUuid: true,\n          },\n        })\n      ).map((c) => c.externalUuid);\n      if (count.length === ids.length) return;\n      const idSet = new Set(ids);\n      for (const id of count) {\n        idSet.delete(id);\n      }\n      throw new Error(\n        `Classes: ${[Array.from(idSet).join(', ')]} are not valid`\n      );\n    } catch (error) {\n      const msg = error instanceof Error ? error.message : `${error}`;\n      throw new OnboardingError(\n        MachineError.ENTITY_DOES_NOT_EXIST,\n        msg,\n        Category.REQUEST,\n        log,\n        [],\n        { entityIds: ids, operation: 'ARE VALID' }\n      );\n    }\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"49908df55da570d7a8cbd3a5423bef0e4b463ea2"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/user.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/user.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":22}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":42}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":37}},"4":{"start":{"line":6,"column":16},"end":{"line":6,"column":35}},"5":{"start":{"line":7,"column":15},"end":{"line":7,"column":42}},"6":{"start":{"line":10,"column":8},"end":{"line":18,"column":9}},"7":{"start":{"line":11,"column":12},"end":{"line":13,"column":15}},"8":{"start":{"line":16,"column":24},"end":{"line":16,"column":80}},"9":{"start":{"line":17,"column":12},"end":{"line":17,"column":176}},"10":{"start":{"line":21,"column":8},"end":{"line":34,"column":9}},"11":{"start":{"line":22,"column":25},"end":{"line":26,"column":14}},"12":{"start":{"line":27,"column":12},"end":{"line":28,"column":75}},"13":{"start":{"line":28,"column":16},"end":{"line":28,"column":75}},"14":{"start":{"line":29,"column":12},"end":{"line":29,"column":24}},"15":{"start":{"line":32,"column":24},"end":{"line":32,"column":80}},"16":{"start":{"line":33,"column":12},"end":{"line":33,"column":158}},"17":{"start":{"line":37,"column":8},"end":{"line":53,"column":9}},"18":{"start":{"line":38,"column":27},"end":{"line":45,"column":14}},"19":{"start":{"line":46,"column":12},"end":{"line":47,"column":28}},"20":{"start":{"line":47,"column":16},"end":{"line":47,"column":28}},"21":{"start":{"line":48,"column":12},"end":{"line":48,"column":71}},"22":{"start":{"line":51,"column":24},"end":{"line":51,"column":80}},"23":{"start":{"line":52,"column":12},"end":{"line":52,"column":83}},"24":{"start":{"line":56,"column":8},"end":{"line":74,"column":9}},"25":{"start":{"line":57,"column":27},"end":{"line":64,"column":14}},"26":{"start":{"line":65,"column":12},"end":{"line":66,"column":70}},"27":{"start":{"line":66,"column":16},"end":{"line":66,"column":70}},"28":{"start":{"line":67,"column":12},"end":{"line":68,"column":37}},"29":{"start":{"line":68,"column":16},"end":{"line":68,"column":37}},"30":{"start":{"line":69,"column":12},"end":{"line":69,"column":71}},"31":{"start":{"line":72,"column":24},"end":{"line":72,"column":80}},"32":{"start":{"line":73,"column":12},"end":{"line":73,"column":90}},"33":{"start":{"line":77,"column":0},"end":{"line":77,"column":20}},"34":{"start":{"line":78,"column":0},"end":{"line":78,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":38},"end":{"line":19,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":34},"end":{"line":35,"column":5}},"line":20},"2":{"name":"(anonymous_2)","decl":{"start":{"line":36,"column":4},"end":{"line":36,"column":5}},"loc":{"start":{"line":36,"column":34},"end":{"line":54,"column":5}},"line":36},"3":{"name":"(anonymous_3)","decl":{"start":{"line":55,"column":4},"end":{"line":55,"column":5}},"loc":{"start":{"line":55,"column":32},"end":{"line":75,"column":5}},"line":55}},"branchMap":{"0":{"loc":{"start":{"line":27,"column":12},"end":{"line":28,"column":75}},"type":"if","locations":[{"start":{"line":27,"column":12},"end":{"line":28,"column":75}},{"start":{"line":27,"column":12},"end":{"line":28,"column":75}}],"line":27},"1":{"loc":{"start":{"line":46,"column":12},"end":{"line":47,"column":28}},"type":"if","locations":[{"start":{"line":46,"column":12},"end":{"line":47,"column":28}},{"start":{"line":46,"column":12},"end":{"line":47,"column":28}}],"line":46},"2":{"loc":{"start":{"line":65,"column":12},"end":{"line":66,"column":70}},"type":"if","locations":[{"start":{"line":65,"column":12},"end":{"line":66,"column":70}},{"start":{"line":65,"column":12},"end":{"line":66,"column":70}}],"line":65},"3":{"loc":{"start":{"line":67,"column":12},"end":{"line":68,"column":37}},"type":"if","locations":[{"start":{"line":67,"column":12},"end":{"line":68,"column":37}},{"start":{"line":67,"column":12},"end":{"line":68,"column":37}}],"line":67},"4":{"loc":{"start":{"line":67,"column":16},"end":{"line":67,"column":39}},"type":"binary-expr","locations":[{"start":{"line":67,"column":16},"end":{"line":67,"column":22}},{"start":{"line":67,"column":26},"end":{"line":67,"column":39}}],"line":67}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1,"34":1},"f":{"0":0,"1":0,"2":0,"3":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/user.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/entities/user.ts"],"names":[],"mappings":"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","sourcesContent":["import { User as DbUser, Prisma, PrismaClient } from '@prisma/client';\nimport { Logger } from 'pino';\n\nimport {\n  Category,\n  ENTITY_NOT_FOUND,\n  MachineError,\n  OnboardingError,\n  POSTGRES_GET_KIDSLOOP_ID_QUERY,\n  POSTGRES_IS_VALID_QUERY,\n  returnMessageOrThrowOnboardingError,\n} from '../errors';\nimport { Entity } from '../types';\nimport { ExternalUuid, Uuid } from '../utils';\n\nconst prisma = new PrismaClient();\n\nexport class User {\n  public static entity = Entity.USER;\n  public static async insertOne(\n    user: Prisma.UserCreateInput,\n    log: Logger\n  ): Promise<void> {\n    try {\n      await prisma.user.create({\n        data: user,\n      });\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw new OnboardingError(\n        MachineError.WRITE,\n        msg,\n        Category.POSTGRES,\n        log,\n        [],\n        { entityId: user.externalUuid, operation: 'INSERT ONE' }\n      );\n    }\n  }\n\n  public static async findOne(id: ExternalUuid, log: Logger): Promise<DbUser> {\n    try {\n      const user = await prisma.user.findUnique({\n        where: {\n          externalUuid: id,\n        },\n      });\n      if (!user) throw ENTITY_NOT_FOUND(id, this.entity, log);\n      return user;\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw new OnboardingError(\n        MachineError.READ,\n        msg,\n        Category.POSTGRES,\n        log,\n        [],\n        { entityId: id, operation: 'FIND ONE' }\n      );\n    }\n  }\n\n  public static async isValid(id: ExternalUuid, log: Logger): Promise<boolean> {\n    try {\n      const entity = await prisma.user.findUnique({\n        where: {\n          externalUuid: id,\n        },\n        select: {\n          externalUuid: true,\n        },\n      });\n      if (entity) return true;\n      throw ENTITY_NOT_FOUND(id, this.entity, log);\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw POSTGRES_IS_VALID_QUERY(id, this.entity, msg, log);\n    }\n  }\n\n  public static async getId(id: ExternalUuid, log: Logger): Promise<Uuid> {\n    try {\n      const klUuid = await prisma.user.findUnique({\n        where: {\n          externalUuid: id,\n        },\n        select: {\n          klUuid: true,\n        },\n      });\n      if (!klUuid) throw new Error(`${this.entity}: ${id} is not valid`);\n      if (klUuid && klUuid.klUuid) return klUuid.klUuid;\n      throw ENTITY_NOT_FOUND(id, this.entity, log);\n    } catch (error) {\n      const msg = returnMessageOrThrowOnboardingError(error);\n      throw POSTGRES_GET_KIDSLOOP_ID_QUERY(id, this.entity, msg, log);\n    }\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"65f61505b24112199a46a8bab0884f26875c2661"},"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/index.ts":{"path":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":46}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":127}},"4":{"start":{"line":5,"column":86},"end":{"line":5,"column":121}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":72},"end":{"line":5,"column":73}},"loc":{"start":{"line":5,"column":84},"end":{"line":5,"column":123}},"line":5}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":0},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/index.ts","sources":["/home/ncurtis/code/kidsloop/client_integration_layer_backend/cil-lib/src/lib/services/index.ts"],"names":[],"mappings":";;;AAAA,+CAA8C;AAArC,4GAAA,YAAY,OAAA","sourcesContent":["export { AdminService } from './adminService';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4d8cbd489e4be5b95b4d829c4ab9ddf334f1c06b"}}